var e=Object.defineProperty,t=Object.getOwnPropertyNames,n=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{r as s,a as i,g as r,R as a,b as o,c}from"./vendor-yXRYaY_D.js";import{X as l,U as d,M as u,L as p,a as h,C as m,A as f,V as g,b as v,I as x,F as y,c as b,B as _,Z as w,d as j,e as k,f as S,g as E,P as T,S as N,h as C,D as O,i as A,G as I,j as P,k as R,l as $,m as D,T as L,n as M,Y as U,o as F,H as z,p as q,q as B,r as H,E as W,s as G,t as Y,u as K,v as J,R as V,w as X,x as Z,y as Q,z as ee,J as te,K as ne,N as se,O as ie,Q as re}from"./ui-Gq0NWwj_.js";import{P as ae,R as oe,B as ce,C as le,X as de,Y as ue,T as pe,a as he,b as me,c as fe,d as ge,L as ve,e as xe}from"./charts-CwRTPBqb.js";var ye,be,_e=(ye={"assets/index-CaDov0gr.js"(e,t){var ye,be;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var _e={exports:{}},we={},je=s,ke=Symbol.for("react.element"),Se=Symbol.for("react.fragment"),Ee=Object.prototype.hasOwnProperty,Te=je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ne={key:!0,ref:!0,__self:!0,__source:!0};function Ce(e,t,n){var s,i={},r=null,a=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(a=t.ref),t)Ee.call(t,s)&&!Ne.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:ke,type:e,key:r,ref:a,props:i,_owner:Te.current}}we.Fragment=Se,we.jsx=Ce,we.jsxs=Ce,_e.exports=we;var Oe,Ae=_e.exports,Ie=i;Oe=Ie.createRoot,Ie.hydrateRoot;var Pe="undefined"!=typeof Element,Re="function"==typeof Map,$e="function"==typeof Set,De="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Le(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,s,i,r;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(s=n;0!==s--;)if(!Le(e[s],t[s]))return!1;return!0}if(Re&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r=e.entries();!(s=r.next()).done;)if(!t.has(s.value[0]))return!1;for(r=e.entries();!(s=r.next()).done;)if(!Le(s.value[1],t.get(s.value[0])))return!1;return!0}if($e&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r=e.entries();!(s=r.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(De&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(s=n;0!==s--;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(s=n;0!==s--;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;if(Pe&&e instanceof Element)return!1;for(s=n;0!==s--;)if(("_owner"!==i[s]&&"__v"!==i[s]&&"__o"!==i[s]||!e.$$typeof)&&!Le(e[i[s]],t[i[s]]))return!1;return!0}return e!=e&&t!=t}const Me=r(function(e,t){try{return Le(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return!1;throw n}});var Ue=function(e,t,n,s,i,r,a,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,s,i,r,a,o],d=0;(c=new Error(t.replace(/%s/g,function(){return l[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}};const Fe=r(Ue),ze=r(function(e,t,n,s){var i=n?n.call(s,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),c=0;c<r.length;c++){var l=r[c];if(!o(l))return!1;var d=e[l],u=t[l];if(!1===(i=n?n.call(s,d,u,l):void 0)||void 0===i&&d!==u)return!1}return!0});var qe=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(qe||{}),Be={rel:["amphtml","canonical","alternate"]},He={type:["application/ld+json"]},We={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Ge=Object.values(qe),Ye={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ke=Object.entries(Ye).reduce((e,[t,n])=>(e[n]=t,e),{}),Je="data-rh",Ve="defaultTitle",Xe="defer",Ze="encodeSpecialCharacters",Qe="onChangeClientState",et="titleTemplate",tt="prioritizeSeoTags",nt=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const s=e[n];if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}return null},st=e=>{let t=nt(e,"title");const n=nt(e,et);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const s=nt(e,Ve);return t||s||void 0},it=e=>nt(e,Qe)||(()=>{}),rt=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),at=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,n)=>{if(!t.length){const s=Object.keys(n);for(let i=0;i<s.length;i+=1){const r=s[i].toLowerCase();if(-1!==e.indexOf(r)&&n[r])return t.concat(n)}}return t},[]),ot=(e,t,n)=>{const s={};return n.filter(t=>!!Array.isArray(t[e])||(void 0!==t[e]&&(t[e],console&&console.warn),!1)).map(t=>t[e]).reverse().reduce((e,n)=>{const i={};n.filter(e=>{let n;const r=Object.keys(e);for(let s=0;s<r.length;s+=1){const i=r[s],a=i.toLowerCase();-1===t.indexOf(a)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===a&&"stylesheet"===e[a].toLowerCase()||(n=a),-1===t.indexOf(i)||"innerHTML"!==i&&"cssText"!==i&&"itemprop"!==i||(n=i)}if(!n||!e[n])return!1;const a=e[n].toLowerCase();return s[n]||(s[n]={}),i[n]||(i[n]={}),!s[n][a]&&(i[n][a]=!0,!0)}).reverse().forEach(t=>e.push(t));const r=Object.keys(i);for(let t=0;t<r.length;t+=1){const e=r[t],n={...s[e],...i[e]};s[e]=n}return e},[]).reverse()},ct=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1)if(e[n][t])return!0;return!1},lt=e=>Array.isArray(e)?e.join(""):e,dt=(e,t)=>Array.isArray(e)?e.reduce((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let s=0;s<n.length;s+=1)if(t[n[s]]&&t[n[s]].includes(e[n[s]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e),{priority:[],default:[]}):{default:e,priority:[]},ut=(e,t)=>({...e,[t]:void 0}),pt=["noscript","script","style"],ht=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),mt=e=>Object.keys(e).reduce((t,n)=>{const s=void 0!==e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${s}`:s},""),ft=(e,t={})=>Object.keys(e).reduce((t,n)=>(t[Ye[n]||n]=e[n],t),t),gt=(e,t)=>t.map((t,n)=>{const s={key:n,[Je]:!0};return Object.keys(t).forEach(e=>{const n=Ye[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;s.dangerouslySetInnerHTML={__html:e}}else s[n]=t[e]}),a.createElement(e,s)}),vt=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const s=ft(n,{key:t,[Je]:!0});return[a.createElement("title",s,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,s)=>{const i=mt(n),r=lt(t);return i?`<${e} ${Je}="true" ${i}>${ht(r,s)}</${e}>`:`<${e} ${Je}="true">${ht(r,s)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ft(t),toString:()=>mt(t)};default:return{toComponent:()=>gt(e,t),toString:()=>((e,t,n=!0)=>t.reduce((t,s)=>{const i=s,r=Object.keys(i).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const s=void 0===i[t]?t:`${t}="${ht(i[t],n)}"`;return e?`${e} ${s}`:s},""),a=i.innerHTML||i.cssText||"",o=-1===pt.indexOf(e);return`${t}<${e} ${Je}="true" ${r}${o?"/>":`>${a}</${e}>`}`},""))(e,t,n)}}},xt=e=>{const{baseTag:t,bodyAttributes:n,encode:s=!0,htmlAttributes:i,noscriptTags:r,styleTags:a,title:o="",titleAttributes:c,prioritizeSeoTags:l}=e;let{linkTags:d,metaTags:u,scriptTags:p}=e,h={toComponent:()=>{},toString:()=>""};return l&&({priorityMethods:h,linkTags:d,metaTags:u,scriptTags:p}=(({metaTags:e,linkTags:t,scriptTags:n,encode:s})=>{const i=dt(e,We),r=dt(t,Be),a=dt(n,He);return{priorityMethods:{toComponent:()=>[...gt("meta",i.priority),...gt("link",r.priority),...gt("script",a.priority)],toString:()=>`${vt("meta",i.priority,s)} ${vt("link",r.priority,s)} ${vt("script",a.priority,s)}`},metaTags:i.default,linkTags:r.default,scriptTags:a.default}})(e)),{priority:h,base:vt("base",t,s),bodyAttributes:vt("bodyAttributes",n,s),htmlAttributes:vt("htmlAttributes",i,s),link:vt("link",d,s),meta:vt("meta",u,s),noscript:vt("noscript",r,s),script:vt("script",p,s),style:vt("style",a,s),title:vt("title",{title:o,titleAttributes:c},s)}},yt=[],bt=!("undefined"==typeof window||!window.document||!window.document.createElement),_t=class{constructor(e,t){n(this,"instances",[]),n(this,"canUseDOM",bt),n(this,"context"),n(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?yt:this.instances,add:e=>{(this.canUseDOM?yt:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?yt:this.instances).indexOf(e);(this.canUseDOM?yt:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=xt({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},wt=a.createContext({}),jt=(ye=class extends s.Component{constructor(e){super(e),n(this,"helmetData"),this.helmetData=new _t(this.props.context||{},ye.canUseDOM)}render(){return a.createElement(wt.Provider,{value:this.helmetData.value},this.props.children)}},n(ye,"canUseDOM",bt),ye),kt=(e,t)=>{const n=document.head||document.querySelector("head"),s=n.querySelectorAll(`${e}[${Je}]`),i=[].slice.call(s),r=[];let a;return t&&t.length&&t.forEach(t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const s=e,i=void 0===t[s]?"":t[s];n.setAttribute(e,i)}n.setAttribute(Je,"true"),i.some((e,t)=>(a=t,n.isEqualNode(e)))?i.splice(a,1):r.push(n)}),i.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),r.forEach(e=>n.appendChild(e)),{oldTags:i,newTags:r}},St=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const s=n.getAttribute(Je),i=s?s.split(","):[],r=[...i],a=Object.keys(t);for(const o of a){const e=t[o]||"";n.getAttribute(o)!==e&&n.setAttribute(o,e),-1===i.indexOf(o)&&i.push(o);const s=r.indexOf(o);-1!==s&&r.splice(s,1)}for(let o=r.length-1;o>=0;o-=1)n.removeAttribute(r[o]);i.length===r.length?n.removeAttribute(Je):n.getAttribute(Je)!==a.join(",")&&n.setAttribute(Je,a.join(","))},Et=(e,t)=>{const{baseTag:n,bodyAttributes:s,htmlAttributes:i,linkTags:r,metaTags:a,noscriptTags:o,onChangeClientState:c,scriptTags:l,styleTags:d,title:u,titleAttributes:p}=e;St("body",s),St("html",i),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=lt(e)),St("title",t)})(u,p);const h={baseTag:kt("base",n),linkTags:kt("link",r),metaTags:kt("meta",a),noscriptTags:kt("noscript",o),scriptTags:kt("script",l),styleTags:kt("style",d)},m={},f={};Object.keys(h).forEach(e=>{const{newTags:t,oldTags:n}=h[e];t.length&&(m[e]=t),n.length&&(f[e]=h[e].oldTags)}),t&&t(),c(e,m,f)},Tt=null,Nt=e=>{Tt&&cancelAnimationFrame(Tt),e.defer?Tt=requestAnimationFrame(()=>{Et(e,()=>{Tt=null})}):(Et(e),Tt=null)},Ct=class extends s.Component{constructor(){super(...arguments),n(this,"rendered",!1)}shouldComponentUpdate(e){return!ze(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const s=(i=e.get().map(e=>{const t={...e.props};return delete t.context,t}),{baseTag:at(["href"],i),bodyAttributes:rt("bodyAttributes",i),defer:nt(i,Xe),encode:nt(i,Ze),htmlAttributes:rt("htmlAttributes",i),linkTags:ot("link",["rel","href"],i),metaTags:ot("meta",["name","charset","http-equiv","property","itemprop"],i),noscriptTags:ot("noscript",["innerHTML"],i),onChangeClientState:it(i),scriptTags:ot("script",["src","innerHTML"],i),styleTags:ot("style",["cssText"],i),title:st(i),titleAttributes:rt("titleAttributes",i),prioritizeSeoTags:ct(i,tt)});var i;jt.canUseDOM?Nt(s):xt&&(n=xt(s)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Ot=(be=class extends s.Component{shouldComponentUpdate(e){return!Me(ut(this.props,"helmetData"),ut(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,s){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,s)}]}}mapObjectTypeChildren(e,t,n,s){switch(e.type){case"title":return{...t,[e.type]:s,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(t=>{n={...n,[t]:e[t]}}),n}warnOnInvalidChildren(e,t){return Fe(Ge.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ge.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),Fe(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return a.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:s,...i}=e.props,r=Object.keys(i).reduce((e,t)=>(e[Ke[t]||t]=i[t],e),{});let{type:a}=e;switch("symbol"==typeof a?a=a.toString():this.warnOnInvalidChildren(e,s),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,r,s);break;default:t=this.mapObjectTypeChildren(e,t,r,s)}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:s}=t;return e&&(n=this.mapChildrenToProps(e,n)),!s||s instanceof _t||(s=new _t(s.context,!0),delete n.helmetData),s?a.createElement(Ct,{...n,context:s.value}):a.createElement(wt.Consumer,null,e=>a.createElement(Ct,{...n,context:e}))}},n(be,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),be);const At={},It=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in At)return;At[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};class Pt extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Rt extends Pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $t extends Pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dt extends Pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lt,Mt;(Mt=Lt||(Lt={})).Any="any",Mt.ApNortheast1="ap-northeast-1",Mt.ApNortheast2="ap-northeast-2",Mt.ApSouth1="ap-south-1",Mt.ApSoutheast1="ap-southeast-1",Mt.ApSoutheast2="ap-southeast-2",Mt.CaCentral1="ca-central-1",Mt.EuCentral1="eu-central-1",Mt.EuWest1="eu-west-1",Mt.EuWest2="eu-west-2",Mt.EuWest3="eu-west-3",Mt.SaEast1="sa-east-1",Mt.UsEast1="us-east-1",Mt.UsWest1="us-west-1",Mt.UsWest2="us-west-2";var Ut=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};class Ft{constructor(e,{headers:t={},customFetch:n,region:s=Lt.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>It(async()=>{const{default:e}=await Promise.resolve().then(()=>Qt);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Ut(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:r}=t;let a,o={},{region:c}=t;c||(c=this.region),c&&"any"!==c&&(o["x-region"]=c),r&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=r):"string"==typeof r?(o["Content-Type"]="text/plain",a=r):"undefined"!=typeof FormData&&r instanceof FormData?a=r:(o["Content-Type"]="application/json",a=JSON.stringify(r)));const l=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:a}).catch(e=>{throw new Rt(e)}),d=l.headers.get("x-relay-error");if(d&&"true"===d)throw new $t(l);if(!l.ok)throw new Dt(l);let u,p=(null!==(n=l.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===p?yield l.json():"application/octet-stream"===p?yield l.blob():"text/event-stream"===p?l:"multipart/form-data"===p?yield l.formData():yield l.text(),{data:u,error:null}}catch(s){return{data:null,error:s}}})}}var zt={},qt={},Bt={},Ht={},Wt={},Gt={},Yt=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Kt=Yt.fetch,Jt=Yt.fetch.bind(Yt),Vt=Yt.Headers,Xt=Yt.Request,Zt=Yt.Response,Qt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vt,Request:Xt,Response:Zt,default:Jt,fetch:Kt},Symbol.toStringTag,{value:"Module"})),en=o(Qt);var tn={};Object.defineProperty(tn,"__esModule",{value:!0});let nn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};tn.default=nn;var sn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gt,"__esModule",{value:!0});const rn=sn(en),an=sn(tn);Gt.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=rn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s;let i=null,r=null,a=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(r="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(a=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(r)&&(r.length>1?(i={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,o=406,c="Not Acceptable"):r=1===r.length?r[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(r=[],i=null,o=200,c="OK")}catch(l){404===e.status&&""===t?(o=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,o=200,c="OK"),i&&this.shouldThrowOnError)throw new an.default(i)}return{error:i,data:r,count:a,status:o,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var on=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wt,"__esModule",{value:!0});const cn=on(Gt);let ln=class extends cn.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const r=i?`${i}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=void 0===s?"offset":`${s}.offset`,r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:r="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${c}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wt.default=ln;var dn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ht,"__esModule",{value:!0});const un=dn(Wt);let pn=class extends un.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${r}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Ht.default=pn;var hn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});const mn=hn(Ht);Bt.default=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",r),n&&(this.headers.Prefer=`count=${n}`),new mn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new mn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const r=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),i||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new mn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new mn.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new mn.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var fn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0}),gn.version=void 0,gn.version="0.0.0-automated",Object.defineProperty(fn,"__esModule",{value:!0}),fn.DEFAULT_HEADERS=void 0;const vn=gn;fn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${vn.version}`};var xn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});const yn=xn(Bt),bn=xn(Ht),_n=fn;qt.default=class e{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},_n.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new yn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let r;const a=new URL(`${this.url}/rpc/${e}`);let o;n||s?(r=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(r="POST",o=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new bn.default({method:r,url:a,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var wn=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.PostgrestError=zt.PostgrestBuilder=zt.PostgrestTransformBuilder=zt.PostgrestFilterBuilder=zt.PostgrestQueryBuilder=zt.PostgrestClient=void 0;const jn=wn(qt);zt.PostgrestClient=jn.default;const kn=wn(Bt);zt.PostgrestQueryBuilder=kn.default;const Sn=wn(Ht);zt.PostgrestFilterBuilder=Sn.default;const En=wn(Wt);zt.PostgrestTransformBuilder=En.default;const Tn=wn(Gt);zt.PostgrestBuilder=Tn.default;const Nn=wn(tn);zt.PostgrestError=Nn.default;var Cn=zt.default={PostgrestClient:jn.default,PostgrestQueryBuilder:kn.default,PostgrestFilterBuilder:Sn.default,PostgrestTransformBuilder:En.default,PostgrestBuilder:Tn.default,PostgrestError:Nn.default};const{PostgrestClient:On,PostgrestQueryBuilder:An,PostgrestFilterBuilder:In,PostgrestTransformBuilder:Pn,PostgrestBuilder:Rn,PostgrestError:$n}=Cn,Dn=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Ln,Mn,Un,Fn,zn,qn,Bn,Hn,Wn,Gn,Yn;(Mn=Ln||(Ln={}))[Mn.connecting=0]="connecting",Mn[Mn.open=1]="open",Mn[Mn.closing=2]="closing",Mn[Mn.closed=3]="closed",(Fn=Un||(Un={})).closed="closed",Fn.errored="errored",Fn.joined="joined",Fn.joining="joining",Fn.leaving="leaving",(qn=zn||(zn={})).close="phx_close",qn.error="phx_error",qn.join="phx_join",qn.reply="phx_reply",qn.leave="phx_leave",qn.access_token="access_token",(Bn||(Bn={})).websocket="websocket",(Wn=Hn||(Hn={})).Connecting="connecting",Wn.Open="open",Wn.Closing="closing",Wn.Closed="closed";class Kn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(e.slice(r,r+s));r+=s;const o=n.decode(e.slice(r,r+i));return r+=i,{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(r,e.byteLength)))}}}class Jn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Yn=Gn||(Gn={})).abstime="abstime",Yn.bool="bool",Yn.date="date",Yn.daterange="daterange",Yn.float4="float4",Yn.float8="float8",Yn.int2="int2",Yn.int4="int4",Yn.int4range="int4range",Yn.int8="int8",Yn.int8range="int8range",Yn.json="json",Yn.jsonb="jsonb",Yn.money="money",Yn.numeric="numeric",Yn.oid="oid",Yn.reltime="reltime",Yn.text="text",Yn.time="time",Yn.timestamp="timestamp",Yn.timestamptz="timestamptz",Yn.timetz="timetz",Yn.tsrange="tsrange",Yn.tstzrange="tstzrange";const Vn=(e,t,n={})=>{var s;const i=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((n,s)=>(n[s]=Xn(s,e,t,i),n),{})},Xn=(e,t,n,s)=>{const i=t.find(t=>t.name===e),r=null==i?void 0:i.type,a=n[e];return r&&!s.includes(r)?Zn(r,a):Qn(a)},Zn=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return ss(t,n)}switch(e){case Gn.bool:return es(t);case Gn.float4:case Gn.float8:case Gn.int2:case Gn.int4:case Gn.int8:case Gn.numeric:case Gn.oid:return ts(t);case Gn.json:case Gn.jsonb:return ns(t);case Gn.timestamp:return is(t);case Gn.abstime:case Gn.date:case Gn.daterange:case Gn.int4range:case Gn.int8range:case Gn.money:case Gn.reltime:case Gn.text:case Gn.time:case Gn.timestamptz:case Gn.timetz:case Gn.tsrange:case Gn.tstzrange:default:return Qn(t)}},Qn=e=>e,es=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ts=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ns=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},ss=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(i){s=r?r.split(","):[]}return s.map(e=>Zn(t,e))}return e},is=e=>"string"==typeof e?e.replace(" ","T"):e,rs=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class as{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var os,cs,ls,ds,us,ps,hs,ms;(cs=os||(os={})).SYNC="sync",cs.JOIN="join",cs.LEAVE="leave";class fs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=fs.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=fs.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),r=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{r[e]||(o[e]=t)}),this.map(r,(e,t)=>{const n=i[e];if(n){const s=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),r=t.filter(e=>i.indexOf(e.presence_ref)<0),c=n.filter(e=>s.indexOf(e.presence_ref)<0);r.length>0&&(a[e]=r),c.length>0&&(o[e]=c)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;const r=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(s),r.length>0){const n=e[t].map(e=>e.presence_ref),s=r.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,r,s)}),this.map(r,(t,n)=>{let i=e[t];if(!i)return;const r=n.map(e=>e.presence_ref);i=i.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=i,s(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(ds=ls||(ls={})).ALL="*",ds.INSERT="INSERT",ds.UPDATE="UPDATE",ds.DELETE="DELETE",(ps=us||(us={})).BROADCAST="broadcast",ps.PRESENCE="presence",ps.POSTGRES_CHANGES="postgres_changes",ps.SYSTEM="system",(ms=hs||(hs={})).SUBSCRIBED="SUBSCRIBED",ms.TIMED_OUT="TIMED_OUT",ms.CLOSED="CLOSED",ms.CHANNEL_ERROR="CHANNEL_ERROR";class gs{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Un.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new as(this,zn.join,this.params,this.timeout),this.rejoinTimer=new Jn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Un.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Un.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zn.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new fs(this),this.broadcastEndpointURL=rs(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Un.closed){const{config:{broadcast:i,presence:r,private:a}}=this.params;this._onError(t=>null==e?void 0:e(hs.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(hs.CLOSED));const o={},c={broadcast:i,presence:r,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,i=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,r=[];for(let n=0;n<i;n++){const i=s[n],{filter:{event:a,schema:o,table:c,filter:l}}=i,d=t&&t[n];if(!d||d.event!==a||d.schema!==o||d.table!==c||d.filter!==l)return this.unsubscribe(),this.state=Un.errored,void(null==e||e(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=r,void(e&&e(hs.SUBSCRIBED))}null==e||e(hs.SUBSCRIBED)}).receive("error",t=>{this.state=Un.errored,null==e||e(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,i,r;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(i=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===i?void 0:i.broadcast)||void 0===r?void 0:r.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:r,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Un.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new as(this,zn.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),r}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new as(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const r=e.toLocaleLowerCase(),{close:a,error:o,leave:c,join:l}=zn;if(n&&[a,o,c,l].indexOf(r)>=0&&n!==this._joinRef())return;let d=this._onMessage(r,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===r}).map(e=>e.callback(d,n)):null===(i=this.bindings[r])||void 0===i||i.filter(e=>{var n,s,i,a,o,c;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return r&&(null===(s=t.ids)||void 0===s?void 0:s.includes(r))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:s,type:i,errors:r}=e,a={schema:t,table:n,commit_timestamp:s,eventType:i,new:{},old:{},errors:r};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===Un.closed}_isJoined(){return this.state===Un.joined}_isJoining(){return this.state===Un.joining}_isLeaving(){return this.state===Un.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&gs.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zn.close,{},e)}_onError(e){this._on(zn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Un.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Vn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Vn(e.columns,e.old_record)),t}}const vs=()=>{};class xs{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vs,this.ref=0,this.logger=vs,this.conn=null,this.sendBuffer=[],this.serializer=new Kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>It(async()=>{const{default:e}=await Promise.resolve().then(()=>Qt);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Bn.websocket}`,this.httpEndpoint=rs(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Dn),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ln.connecting:return Hn.Connecting;case Ln.open:return Hn.Open;case Ln.closing:return Hn.Closing;default:return Hn.Closed}}isConnected(){return this.connectionState()===Hn.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new gs(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.11.15"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(zn.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:s,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,s),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(zn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class ys extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function bs(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class _s extends ys{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ws extends ys{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var js=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};const ks=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>It(async()=>{const{default:e}=await Promise.resolve().then(()=>Qt);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Ss=e=>{if(Array.isArray(e))return e.map(e=>Ss(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Ss(n)}),t};var Es=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};const Ts=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ns=(e,t,n)=>Es(void 0,void 0,void 0,function*(){const s=yield js(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield It(()=>Promise.resolve().then(()=>Qt),void 0)).Response:Response});e instanceof s&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{t(new _s(Ts(n),e.status||500))}).catch(e=>{t(new ws(Ts(e),e))}):t(new ws(Ts(e),e))});function Cs(e,t,n,s,i,r){return Es(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,((e,t,n,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),n))})(t,s,i,r)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>Ns(e,o,s))})})}function Os(e,t,n,s){return Es(this,void 0,void 0,function*(){return Cs(e,"GET",t,n,s)})}function As(e,t,n,s,i){return Es(this,void 0,void 0,function*(){return Cs(e,"POST",t,s,i,n)})}function Is(e,t,n,s,i){return Es(this,void 0,void 0,function*(){return Cs(e,"DELETE",t,s,i,n)})}var Ps=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};const Rs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$s={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ds{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ks(s)}uploadOrUpdate(e,t,n,s){return Ps(this,void 0,void 0,function*(){try{let i;const r=Object.assign(Object.assign({},$s),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const o=r.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",r.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",r.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:i,headers:a},(null==r?void 0:r.duplex)?{duplex:r.duplex}:{})),u=yield d.json();return d.ok?{data:{path:c,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(i){if(bs(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Ps(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),r=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:$s.upsert},s),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:r}),c=yield o.json();return o.ok?{data:{path:i,fullPath:c.Key},error:null}:{data:null,error:c}}catch(o){if(bs(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ps(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const i=yield As(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),r=new URL(this.url+i.url),a=r.searchParams.get("token");if(!a)throw new ys("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:a},error:null}}catch(n){if(bs(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ps(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ps(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Ps(this,void 0,void 0,function*(){try{return{data:{path:(yield As(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Ps(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield As(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${r}`)},{data:i,error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Ps(this,void 0,void 0,function*(){try{const s=yield As(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}download(e,t){return Ps(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield Os(this.fetch,`${this.url}/${n}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(r){if(bs(r))return{data:null,error:r};throw r}})}info(e){return Ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Os(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ss(e),error:null}}catch(n){if(bs(n))return{data:null,error:n};throw n}})}exists(e){return Ps(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return Es(this,void 0,void 0,function*(){return Cs(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(bs(n)&&n instanceof ws){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&s.push(i);const r=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${n}${o}`)}}}remove(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(bs(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ps(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Rs),t),{prefix:e||""});return{data:yield As(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(bs(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ls={"X-Client-Info":"storage-js/2.7.1"};var Ms=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};class Us{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ls),t),this.fetch=ks(n)}listBuckets(){return Ms(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(bs(e))return{data:null,error:e};throw e}})}getBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(bs(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ms(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bs(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Ms(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,s,i){return Es(this,void 0,void 0,function*(){return Cs(e,"PUT",t,s,i,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(bs(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(bs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ms(this,void 0,void 0,function*(){try{return{data:yield Is(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(bs(t))return{data:null,error:t};throw t}})}}class Fs extends Us{constructor(e,t={},n){super(e,t,n)}from(e){return new Ds(this.url,this.headers,e,this.fetch)}}let zs="";zs="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const qs={headers:{"X-Client-Info":`supabase-js-${zs}/2.50.2`}},Bs={schema:"public"},Hs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ws={};var Gs=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};const Ys=(e,t,n)=>{const s=(e=>{let t;return t=e||("undefined"==typeof fetch?Jt:fetch),(...e)=>t(...e)})(n),i="undefined"==typeof Headers?Vt:Headers;return(n,r)=>Gs(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let c=new i(null==r?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),s(n,Object.assign(Object.assign({},r),{headers:c}))})};var Ks=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};const Js="2.70.0",Vs=3e4,Xs=9e4,Zs={"X-Client-Info":`gotrue-js/${Js}`},Qs="X-Supabase-Api-Version",ei={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ti=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ni extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function si(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ii extends ni{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class ri extends ni{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ai extends ni{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class oi extends ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ci extends ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class li extends ai{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class di extends ai{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ui extends ai{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pi extends ai{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function hi(e){return si(e)&&"AuthRetryableFetchError"===e.name}class mi extends ai{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class fi extends ai{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vi=" \t\n\r=".split(""),xi=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vi.length;t+=1)e[vi[t].charCodeAt(0)]=-2;for(let t=0;t<gi.length;t+=1)e[gi[t].charCodeAt(0)]=t;return e})();function yi(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(gi[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(gi[e]),t.queuedBits-=6}}function bi(e,t,n){const s=xi[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function _i(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let a=0;a<e.length;a+=1)bi(e.charCodeAt(a),i,r);return t.join("")}function wi(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function ji(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)bi(e.charCodeAt(i),n,s);return new Uint8Array(t)}function ki(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}wi(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Si(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>yi(e,n,s)),yi(null,n,s),t.join("")}const Ei=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Ti={tested:!1,writable:!1},Ni=()=>{if(!Ei())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(so){return!1}if(Ti.tested)return Ti.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ti.tested=!0,Ti.writable=!0}catch(so){Ti.tested=!0,Ti.writable=!1}return Ti.writable},Ci=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>It(async()=>{const{default:e}=await Promise.resolve().then(()=>Qt);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Oi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},Ii=async(e,t)=>{await e.removeItem(t)};class Pi{constructor(){this.promise=new Pi.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ri(e){const t=e.split(".");if(3!==t.length)throw new fi("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ti.test(t[n]))throw new fi("JWT not in base64url format");return{header:JSON.parse(_i(t[0])),payload:JSON.parse(_i(t[1])),signature:ji(t[2]),raw:{header:t[0],payload:t[1]}}}function $i(e){return("0"+e.toString(16)).substr(-2)}async function Di(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Li(e,t,n=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,$i).join("")}();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await Oi(e,`${t}-code-verifier`,i);const r=await Di(s);return[r,s===r?"plain":"s256"]}Pi.promiseConstructor=Promise;const Mi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Ui=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fi(e){if(!Ui.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}const zi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qi=[502,503,504];async function Bi(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new pi(zi(e),0);if(qi.includes(e.status))throw new pi(zi(e),e.status);let s,i;try{s=await e.json()}catch(so){throw new ri(zi(so),so)}const r=function(e){const t=e.headers.get(Qs);if(!t)return null;if(!t.match(Mi))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(so){return null}}(e);if(r&&r.getTime()>=ei.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?i=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(i=s.error_code),i){if("weak_password"===i)throw new mi(zi(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new oi}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new mi(zi(s),e.status,s.weak_password.reasons);throw new ii(zi(s),e.status||500,i)}async function Hi(e,t,n,s){var i;const r=Object.assign({},null==s?void 0:s.headers);r[Qs]||(r[Qs]=ei.name),(null==s?void 0:s.jwt)&&(r.Authorization=`Bearer ${s.jwt}`);const a=null!==(i=null==s?void 0:s.query)&&void 0!==i?i:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await async function(e,t,n,s,i,r){const a=((e,t,n,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))})(t,s,i,r);let o;try{o=await e(n,Object.assign({},a))}catch(so){throw new pi(zi(so),0)}if(o.ok||await Bi(o),null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(so){await Bi(so)}}(e,t,n+o,{headers:r,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function Wi(e){var t;let n=null;var s;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s))),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Gi(e){const t=Wi(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Yi(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ki(e){return{data:e,error:null}}function Ji(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:i,verification_type:r}=e,a=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:i,verification_type:r},user:Object.assign({},a)},error:null}}function Vi(e){return e}const Xi=["global","local","others"];class Zi{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ci(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Xi[0]){if(Xi.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xi.join(", ")}`);try{return await Hi(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Hi(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Yi})}catch(n){if(si(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await Hi(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ji,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(si(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Hi(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yi})}catch(t){if(si(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,r,a,o;try{const c={nextPage:null,lastPage:0,total:0},l=await Hi(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==i?i:""},xform:Vi});if(l.error)throw l.error;const d=await l.json(),u=null!==(r=l.headers.get("x-total-count"))&&void 0!==r?r:0,p=null!==(o=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return p.length>0&&(p.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t}),c.total=parseInt(u)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(si(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Fi(e);try{return await Hi(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yi})}catch(t){if(si(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Fi(e);try{return await Hi(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Yi})}catch(n){if(si(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Fi(e);try{return await Hi(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Yi})}catch(n){if(si(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Fi(e.userId);try{const{data:t,error:n}=await Hi(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(si(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Fi(e.userId),Fi(e.id);try{return{data:await Hi(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(si(t))return{data:null,error:t};throw t}}}const Qi={getItem:e=>Ni()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ni()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ni()&&globalThis.localStorage.removeItem(e)}};function er(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const tr=!!(globalThis&&Ni()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class nr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sr extends nr{}async function ir(e,t,n){const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw new sr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tr)try{await globalThis.navigator.locks.query()}catch(so){}return await n()}try{return await n()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(so){"undefined"!=typeof self&&(self.globalThis=self)}}();const rr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zs,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ar(e,t,n){return await n()}class or{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=or.nextInstanceID,or.nextInstanceID+=1,this.instanceID>0&&Ei();const s=Object.assign(Object.assign({},rr),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Zi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ci(s.fetch),this.lock=s.lock||ar,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ei()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=ir:this.lock=ar,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ni()?this.storage=Qi:(this.memoryStorage={},this.storage=er(this.memoryStorage)):(this.memoryStorage={},this.storage=er(this.memoryStorage)),Ei()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(so){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Js}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(so){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ei()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return si(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:r,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return si(t)?{error:t}:{error:new ri("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await Hi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:Wi}),{data:r,error:a}=i;if(a||!r)return{data:{user:null,session:null},error:a};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(si(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:n,password:s,options:r}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Li(this.storage,this.storageKey)),i=await Hi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:o},xform:Wi})}else{if(!("phone"in e))throw new li("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:a}=e;i=await Hi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:r,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Wi})}}const{data:r,error:a}=i;if(a||!r)return{data:{user:null,session:null},error:a};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(si(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:i}=e;t=await Hi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Gi})}else{if(!("phone"in e))throw new li("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:i}=e;t=await Hi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Gi})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new ci}}catch(t){if(si(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,s,i,r,a,o,c,l,d,u,p;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:u,wallet:p,statement:f,options:g}=e;let v;if(Ei())if("object"==typeof p)v=p;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof p||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=p}const x=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(s=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(h),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await Hi(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:Si(m)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:Wi});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new ci}}catch(f){if(si(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await Ai(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await Hi(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Wi});if(await Ii(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new ci}}catch(i){if(si(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:r}=e,a=await Hi(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:r,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Wi}),{data:o,error:c}=a;return c?{data:{user:null,session:null},error:c}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c}):{data:{user:null,session:null},error:new ci}}catch(t){if(si(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,r;try{if("email"in e){const{email:s,options:i}=e;let r=null,a=null;"pkce"===this.flowType&&([r,a]=await Li(this.storage,this.storageKey));const{error:o}=await Hi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null==i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:r,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await Hi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(i=null==n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(r=null==n?void 0:n.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new li("You must provide either an email or phone number.")}catch(a){if(si(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:r,error:a}=await Hi(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wi});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,c=r.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(si(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,r=null;return"pkce"===this.flowType&&([i,r]=await Li(this.storage,this.storageKey)),await Hi(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:r}),headers:this.headers,xform:Ki})}catch(i){if(si(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new oi;const{error:s}=await Hi(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(si(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:r}=await Hi(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:n,type:s,options:i}=e,{data:r,error:a}=await Hi(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==r?void 0:r.message_id},error:a}}throw new li("You must provide either an email or phone number and a type")}catch(t){if(si(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(so){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(so){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Xs;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Hi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yi}):await this._useSession(async e=>{var t,n,s;const{data:i,error:r}=e;if(r)throw r;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Hi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:Yi}):{data:{user:null},error:new oi}})}catch(t){if(si(t))return function(e){return si(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ii(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new oi;const r=s.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await Li(this.storage,this.storageKey));const{data:c,error:l}=await Hi(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:r.access_token,xform:Yi});if(l)throw l;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(si(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oi;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:r}=Ri(e.access_token);if(r.exp&&(n=r.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:s,error:r}=await this._getUser(e.access_token);if(r)throw r;i={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(si(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:i}=t;if(i)throw i;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new oi;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(si(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ei())throw new di("No browser detected.");if(e.error||e.error_description||e.error_code)throw new di(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ui("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new di("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ui("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:r,expires_in:a,expires_at:o,token_type:c}=e;if(!(i&&a&&r&&c))throw new di("No session defined in URL");const l=Math.round(Date.now()/1e3),d=parseInt(a);let u=l+d;o&&(u=parseInt(o));const{data:p,error:h}=await this._getUser(i);if(h)throw h;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:u,refresh_token:r,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(si(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const r=null===(n=s.session)||void 0===n?void 0:n.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return si(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ii(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(i){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;"pkce"===this.flowType&&([n,s]=await Li(this.storage,this.storageKey,!0));try{return await Hi(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(si(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(si(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,i,r,a;const{data:o,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Hi(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0})});if(s)throw s;return Ei()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(si(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:r}=t;if(r)throw r;return await Hi(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(si(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Hi(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wi})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&hi(t)&&Date.now()+n-i<Vs},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!s(i,null,t))return void e(t)}catch(so){if(!s(i,so))return void t(so)}})()}))}catch(i){if(this._debug(t,"error",i),si(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ei()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Ai(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Xs;if(this._debug(t,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(hi(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(t,"error",n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new oi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pi;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new oi;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(s,"error",i),si(i)){const e={session:null,error:i};return hi(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(so){s.push(so)}});if(await Promise.all(i),s.length>0){for(let e=0;e<s.length;e+=1);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ii(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ei()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(so){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vs);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/Vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(so){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(so){if(!(so.isAcquireTimeout||so instanceof nr))throw so;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ei()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Li(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await Hi(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(si(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:r}=t;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:c}=await Hi(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==i?void 0:i.session)||void 0===n?void 0:n.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&(null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(si(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:r,error:a}=await Hi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(t){if(si(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await Hi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(si(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Ri(s.access_token);let a=null;r.aal&&(a=r.aal);let o=a;return(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2"),{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:s,error:i}=await Hi(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||0===s.keys.length)throw new fi("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(t=>t.kid===e),!n)throw new fi("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:i,signature:r,raw:{header:a,payload:o}}=Ri(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!s.kid||"HS256"===s.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:s,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),l=await this.fetchJwk(s.kid,t),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,r,ki(`${a}.${o}`))))throw new fi("Invalid JWT signature");return{data:{claims:i,header:s,signature:r},error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}}}or.nextInstanceID=0;const cr=or;class lr extends cr{constructor(e){super(e)}}var dr=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})};class ur{constructor(e,t,n){var s,i,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,d=function(e,t){var n,s;const{db:i,auth:r,realtime:a,global:o}=e,{db:c,auth:l,realtime:d,global:u}=t,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null==u?void 0:u.headers)&&void 0!==n?n:{}),null!==(s=null==o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ks(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}(null!=n?n:{},{db:Bs,realtime:Ws,auth:Object.assign(Object.assign({},Hs),{storageKey:l}),global:qs});this.storageKey=null!==(s=d.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=d.auth)&&void 0!==r?r:{},this.headers,d.global.fetch),this.fetch=Ys(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new On(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ft(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fs(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return dr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:r,lock:a,debug:o},c,l){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:r,lock:a,debug:o,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new xs(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const pr=new ur("https://mzdldixwiedqdfvuuxxi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16ZGxkaXh3aWVkcWRmdnV1eHhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5Nzg5NzAsImV4cCI6MjA2NjU1NDk3MH0.SrPUb4xe95zJl6qjdrw3uJz24IL_bmg5J6lj8KMSfaM",hr);var hr;function mr(){const[e,t]=s.useState(null),[n,i]=s.useState(null),[r,a]=s.useState(!0);return s.useEffect(()=>{pr.auth.getSession().then(({data:{session:e}})=>{i(e),t((null==e?void 0:e.user)??null),a(!1)});const{data:{subscription:e}}=pr.auth.onAuthStateChange((e,n)=>{i(n),t((null==n?void 0:n.user)??null),a(!1)});return()=>e.unsubscribe()},[]),{user:e,session:n,loading:r,signUp:async(e,t,n)=>{const{data:s,error:i}=await pr.auth.signUp({email:e,password:t,options:{data:{full_name:n}}});return s.user&&!i&&await pr.from("profiles").insert({user_id:s.user.id,email:s.user.email,full_name:n}),{data:s,error:i}},signIn:async(e,t)=>await pr.auth.signInWithPassword({email:e,password:t}),signOut:async()=>await pr.auth.signOut()}}function fr({isOpen:e,onClose:t}){const[n,i]=s.useState(!1),[r,a]=s.useState(""),[o,c]=s.useState(""),[h,m]=s.useState(""),[f,g]=s.useState(!1),[v,x]=s.useState(""),{signIn:y,signUp:b}=mr();return e?Ae.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[Ae.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n?"Create Account":"Sign In"}),Ae.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:Ae.jsx(l,{className:"h-5 w-5"})})]}),Ae.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g(!0),x("");try{if(n){const{error:e}=await b(r,o,h);if(e)throw e}else{const{error:e}=await y(r,o);if(e)throw e}t()}catch(s){x(s.message)}finally{g(!1)}},className:"p-6 space-y-4",children:[n&&Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Ae.jsx("input",{type:"text",value:h,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Ae.jsx("input",{type:"email",value:r,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),Ae.jsxs("div",{className:"relative",children:[Ae.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Ae.jsx("input",{type:"password",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your password",required:!0,minLength:6})]})]}),v&&Ae.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:v}),Ae.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 disabled:opacity-50",children:f?"Loading...":n?"Create Account":"Sign In"}),Ae.jsx("div",{className:"text-center",children:Ae.jsx("button",{type:"button",onClick:()=>i(!n),className:"text-purple-600 hover:text-purple-700 font-medium",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})}):null}function gr(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{c(s.next(e))}catch(so){r(so)}}function o(e){try{c(s.throw(e))}catch(so){r(so)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((s=s.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const vr=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function xr(e,t,n){const s=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),s=vr.get(n);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:i}=e,r="string"==typeof t?t:"string"==typeof i&&i.length>0?i:`./${e.name}`;return"string"!=typeof s.path&&yr(s,"path",r),yr(s,"relativePath",r),s}function yr(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const br=[".DS_Store","Thumbs.db"];function _r(e){return"object"==typeof e&&null!==e}function wr(e){return e.filter(e=>-1===br.indexOf(e.name))}function jr(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const s=e[n];t.push(s)}return t}function kr(e){if("function"!=typeof e.webkitGetAsEntry)return Er(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?Nr(t):Er(e,t)}function Sr(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?Sr(t):[t]],[])}function Er(e,t){return gr(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,xr(e)}}const s=e.getAsFile();if(!s)throw new Error(`${e} is not a File`);return xr(s,null!==(n=null==t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function Tr(e){return gr(this,void 0,void 0,function*(){return e.isDirectory?Nr(e):function(e){return gr(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{const s=xr(n,e.fullPath);t(s)},e=>{n(e)})})})}(e)})}function Nr(e){const t=e.createReader();return new Promise((e,n)=>{const s=[];!function i(){t.readEntries(t=>gr(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(Tr));s.push(e),i()}else try{const t=yield Promise.all(s);e(t)}catch(r){n(r)}}),e=>{n(e)})}()})}var Cr=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var s=e.name||"",i=(e.type||"").toLowerCase(),r=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?s.toLowerCase().endsWith(t):t.endsWith("/*")?r===t.replace(/\/.*$/,""):i===t})}return!0};function Or(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach(function(t){Pr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return r}}(e,t)||$r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Lr=Cr,Mr=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},Ur=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Fr=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},zr={code:"too-many-files",message:"Too many files"};function qr(e,t){var n="application/x-moz-file"===e.type||Lr(e,t);return[n,n?null:Mr(t)]}function Br(e,t,n){if(Hr(e.size))if(Hr(t)&&Hr(n)){if(e.size>n)return[!1,Ur(n)];if(e.size<t)return[!1,Fr(t)]}else{if(Hr(t)&&e.size<t)return[!1,Fr(t)];if(Hr(n)&&e.size>n)return[!1,Ur(n)]}return[!0,null]}function Hr(e){return null!=e}function Wr(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function Gr(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function Yr(e){e.preventDefault()}function Kr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return t.some(function(t){return!Wr(e)&&t&&t.apply(void 0,[e].concat(s)),Wr(e)})}}function Jr(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Vr(e){return/^.*\.[\w]+$/.test(e)}var Xr=["children"],Zr=["open"],Qr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ea=["refKey","onChange","onClick"];function ta(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return r}}(e,t)||sa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){if(e){if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ia(e,t):void 0}}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach(function(t){oa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ca(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var la=s.forwardRef(function(e,t){var n=e.children,i=pa(ca(e,Xr)),r=i.open,o=ca(i,Zr);return s.useImperativeHandle(t,function(){return{open:r}},[r]),a.createElement(s.Fragment,null,n(aa(aa({},o),{},{open:r})))});la.displayName="Dropzone";var da={disabled:!1,getFilesFromEvent:function(e){return gr(this,void 0,void 0,function*(){return _r(e)&&_r(e.dataTransfer)?function(e,t){return gr(this,void 0,void 0,function*(){if(e.items){const n=jr(e.items).filter(e=>"file"===e.kind);return"drop"!==t?n:wr(Sr(yield Promise.all(n.map(kr))))}return wr(jr(e.files).map(e=>xr(e)))})}(e.dataTransfer,e.type):function(e){return _r(e)&&_r(e.target)}(e)?function(e){return jr(e.target.files).map(e=>xr(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return gr(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>xr(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};la.defaultProps=da,la.propTypes={children:ae.func,accept:ae.objectOf(ae.arrayOf(ae.string)),multiple:ae.bool,preventDropOnDocument:ae.bool,noClick:ae.bool,noKeyboard:ae.bool,noDrag:ae.bool,noDragEventsBubbling:ae.bool,minSize:ae.number,maxSize:ae.number,maxFiles:ae.number,disabled:ae.bool,getFilesFromEvent:ae.func,onFileDialogCancel:ae.func,onFileDialogOpen:ae.func,useFsAccessApi:ae.bool,autoFocus:ae.bool,onDragEnter:ae.func,onDragLeave:ae.func,onDragOver:ae.func,onDrop:ae.func,onDropAccepted:ae.func,onDropRejected:ae.func,onError:ae.func,validator:ae.func};var ua={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=aa(aa({},da),e),n=t.accept,i=t.disabled,r=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,c=t.multiple,l=t.maxFiles,d=t.onDragEnter,u=t.onDragLeave,p=t.onDragOver,h=t.onDrop,m=t.onDropAccepted,f=t.onDropRejected,g=t.onFileDialogCancel,v=t.onFileDialogOpen,x=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,_=t.noClick,w=t.noKeyboard,j=t.noDrag,k=t.noDragEventsBubbling,S=t.onError,E=t.validator,T=s.useMemo(function(){return function(e){if(Hr(e))return Object.entries(e).reduce(function(e,t){var n=Rr(t,2),s=n[0],i=n[1];return[].concat(Or(e),[s],Or(i))},[]).filter(function(e){return Jr(e)||Vr(e)}).join(",")}(n)},[n]),N=s.useMemo(function(){return function(e){return Hr(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=Rr(e,2),n=t[0],s=t[1],i=!0;return Jr(n)||(i=!1),Array.isArray(s)&&s.every(Vr)||(i=!1),i}).reduce(function(e,t){var n=Rr(t,2),s=n[0],i=n[1];return Ir(Ir({},e),{},Pr({},s,i))},{})}]:e}(n)},[n]),C=s.useMemo(function(){return"function"==typeof v?v:ma},[v]),O=s.useMemo(function(){return"function"==typeof g?g:ma},[g]),A=s.useRef(null),I=s.useRef(null),P=na(s.useReducer(ha,ua),2),R=P[0],$=P[1],D=R.isFocused,L=R.isFileDialogActive,M=s.useRef("undefined"!=typeof window&&window.isSecureContext&&x&&"showOpenFilePicker"in window),U=function(){!M.current&&L&&setTimeout(function(){I.current&&(I.current.files.length||($({type:"closeDialog"}),O()))},300)};s.useEffect(function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}},[I,L,O,M]);var F=s.useRef([]),z=function(e){A.current&&A.current.contains(e.target)||(e.preventDefault(),F.current=[])};s.useEffect(function(){return b&&(document.addEventListener("dragover",Yr,!1),document.addEventListener("drop",z,!1)),function(){b&&(document.removeEventListener("dragover",Yr),document.removeEventListener("drop",z))}},[A,b]),s.useEffect(function(){return!i&&y&&A.current&&A.current.focus(),function(){}},[A,y,i]);var q=s.useCallback(function(e){S&&S(e)},[S]),B=s.useCallback(function(e){e.preventDefault(),e.persist(),ne(e),F.current=[].concat(ta(F.current),[e.target]),Gr(e)&&Promise.resolve(r(e)).then(function(t){if(!Wr(e)||k){var n=t.length,s=n>0&&function(e){var t=e.files,n=e.accept,s=e.minSize,i=e.maxSize,r=e.multiple,a=e.maxFiles,o=e.validator;return!(!r&&t.length>1||r&&a>=1&&t.length>a)&&t.every(function(e){var t=Rr(qr(e,n),1)[0],r=Rr(Br(e,s,i),1)[0],a=o?o(e):null;return t&&r&&!a})}({files:t,accept:T,minSize:o,maxSize:a,multiple:c,maxFiles:l,validator:E});$({isDragAccept:s,isDragReject:n>0&&!s,isDragActive:!0,type:"setDraggedFiles"}),d&&d(e)}}).catch(function(e){return q(e)})},[r,d,q,k,T,o,a,c,l,E]),H=s.useCallback(function(e){e.preventDefault(),e.persist(),ne(e);var t=Gr(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&p&&p(e),!1},[p,k]),W=s.useCallback(function(e){e.preventDefault(),e.persist(),ne(e);var t=F.current.filter(function(e){return A.current&&A.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||($({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Gr(e)&&u&&u(e))},[A,u,k]),G=s.useCallback(function(e,t){var n=[],s=[];e.forEach(function(e){var t=na(qr(e,T),2),i=t[0],r=t[1],c=na(Br(e,o,a),2),l=c[0],d=c[1],u=E?E(e):null;if(i&&l&&!u)n.push(e);else{var p=[r,d];u&&(p=p.concat(u)),s.push({file:e,errors:p.filter(function(e){return e})})}}),(!c&&n.length>1||c&&l>=1&&n.length>l)&&(n.forEach(function(e){s.push({file:e,errors:[zr]})}),n.splice(0)),$({acceptedFiles:n,fileRejections:s,isDragReject:s.length>0,type:"setFiles"}),h&&h(n,s,t),s.length>0&&f&&f(s,t),n.length>0&&m&&m(n,t)},[$,c,T,o,a,l,h,m,f,E]),Y=s.useCallback(function(e){e.preventDefault(),e.persist(),ne(e),F.current=[],Gr(e)&&Promise.resolve(r(e)).then(function(t){Wr(e)&&!k||G(t,e)}).catch(function(e){return q(e)}),$({type:"reset"})},[r,G,q,k]),K=s.useCallback(function(){if(M.current){$({type:"openDialog"}),C();var e={multiple:c,types:N};window.showOpenFilePicker(e).then(function(e){return r(e)}).then(function(e){G(e,null),$({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(O(e),$({type:"closeDialog"})):function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?(M.current=!1,I.current?(I.current.value=null,I.current.click()):q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):q(e)})}else I.current&&($({type:"openDialog"}),C(),I.current.value=null,I.current.click())},[$,C,O,x,G,q,N,c]),J=s.useCallback(function(e){A.current&&A.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),K()))},[A,K]),V=s.useCallback(function(){$({type:"focus"})},[]),X=s.useCallback(function(){$({type:"blur"})},[]),Z=s.useCallback(function(){_||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?setTimeout(K,0):K())},[_,K]),Q=function(e){return i?null:e},ee=function(e){return w?null:Q(e)},te=function(e){return j?null:Q(e)},ne=function(e){k&&e.stopPropagation()},se=s.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,s=e.role,r=e.onKeyDown,a=e.onFocus,o=e.onBlur,c=e.onClick,l=e.onDragEnter,d=e.onDragOver,u=e.onDragLeave,p=e.onDrop,h=ca(e,Qr);return aa(aa(oa({onKeyDown:ee(Kr(r,J)),onFocus:ee(Kr(a,V)),onBlur:ee(Kr(o,X)),onClick:Q(Kr(c,Z)),onDragEnter:te(Kr(l,B)),onDragOver:te(Kr(d,H)),onDragLeave:te(Kr(u,W)),onDrop:te(Kr(p,Y)),role:"string"==typeof s&&""!==s?s:"presentation"},n,A),i||w?{}:{tabIndex:0}),h)}},[A,J,V,X,Z,B,H,W,Y,w,j,i]),ie=s.useCallback(function(e){e.stopPropagation()},[]),re=s.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,s=e.onChange,i=e.onClick,r=ca(e,ea);return aa(aa({},oa({accept:T,multiple:c,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(Kr(s,Y)),onClick:Q(Kr(i,ie)),tabIndex:-1},n,I)),r)}},[I,n,c,Y,i]);return aa(aa({},R),{},{isFocused:D&&!i,getRootProps:se,getInputProps:re,rootRef:A,inputRef:I,open:Q(K)})}function ha(e,t){switch(t.type){case"focus":return aa(aa({},e),{},{isFocused:!0});case"blur":return aa(aa({},e),{},{isFocused:!1});case"openDialog":return aa(aa({},ua),{},{isFileDialogActive:!0});case"closeDialog":return aa(aa({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return aa(aa({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return aa(aa({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return aa({},ua);default:return e}}function ma(){}function fa({personaId:e,onUploadComplete:t}){const[n,i]=s.useState([]),[r,a]=s.useState(!1),o=async t=>{const n=`${Date.now()}-${t.name}`,s=`personas/${e}/${n}`,r={id:n,name:t.name,size:t.size,type:t.type,url:"",status:"uploading",progress:0};try{const{data:o,error:c}=await pr.storage.from("persona-content").upload(s,t,{cacheControl:"3600",upsert:!1});if(c)throw c;const{data:{publicUrl:l}}=pr.storage.from("persona-content").getPublicUrl(s);r.url=l,r.status="processing",r.progress=50;const{error:d}=await pr.from("persona_content").insert({persona_id:e,content_type:(a=t.type,a.startsWith("video/")?"video":a.startsWith("audio/")?"audio":a.startsWith("image/")?"image":(a.startsWith("text/")||a.includes("document"),"text")),file_url:l,file_name:t.name,file_size:t.size,metadata:{original_name:t.name,mime_type:t.type,upload_date:(new Date).toISOString()},processing_status:"processing"});if(d)throw d;return setTimeout(()=>{r.status="completed",r.progress=100,i(e=>e.map(e=>e.id===n?r:e))},2e3),r}catch(o){return r.status="error",r.progress=0,r}var a},c=s.useCallback(async e=>{a(!0);const n=e.map(e=>({id:`${Date.now()}-${e.name}`,name:e.name,size:e.size,type:e.type,url:"",status:"uploading",progress:0}));i(e=>[...e,...n]);try{const n=e.map(o),s=await Promise.all(n);i(e=>e.map(e=>s.find(t=>t.name===e.name)||e)),null==t||t(s)}catch(s){}finally{a(!1)}},[e,t]),{getRootProps:d,getInputProps:u,isDragActive:p}=pa({onDrop:c,accept:{"video/*":[".mp4",".mov",".avi",".mkv"],"audio/*":[".mp3",".wav",".m4a",".aac"],"image/*":[".jpg",".jpeg",".png",".gif"],"text/*":[".txt",".md"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxSize:104857600,multiple:!0}),_=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{...d(),className:"border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all duration-300 "+(p?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50"),children:[Ae.jsx("input",{...u()}),Ae.jsx(h,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p?"Drop files here":"Upload memories and content"}),Ae.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here, or click to browse"}),Ae.jsxs("div",{className:"text-sm text-gray-500",children:[Ae.jsx("p",{children:"Supported formats: Videos (MP4, MOV), Audio (MP3, WAV), Images (JPG, PNG), Documents (PDF, DOC, TXT)"}),Ae.jsx("p",{children:"Maximum file size: 100MB"})]})]}),n.length>0&&Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Content"}),n.map(e=>{const t=(n=e.type).startsWith("video/")?g:n.startsWith("audio/")?v:n.startsWith("image/")?x:n.startsWith("text/")||n.includes("document")?y:b;var n;return Ae.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:Ae.jsx(t,{className:"h-5 w-5 text-gray-600"})}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium text-gray-900",children:e.name}),Ae.jsx("p",{className:"text-sm text-gray-500",children:_(e.size)})]})]}),Ae.jsxs("div",{className:"flex items-center space-x-3",children:["uploading"===e.status&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),Ae.jsx("span",{className:"text-sm text-gray-600",children:"Uploading..."})]}),"processing"===e.status&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx("div",{className:"animate-pulse h-4 w-4 bg-yellow-400 rounded-full"}),Ae.jsx("span",{className:"text-sm text-yellow-600",children:"Processing..."})]}),"completed"===e.status&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(m,{className:"h-4 w-4 text-green-500"}),Ae.jsx("span",{className:"text-sm text-green-600",children:"Complete"})]}),"error"===e.status&&Ae.jsxs("div",{className:"flex items-center space-x-2",children:[Ae.jsx(f,{className:"h-4 w-4 text-red-500"}),Ae.jsx("span",{className:"text-sm text-red-600",children:"Error"})]}),Ae.jsx("button",{onClick:()=>{return t=e.id,void i(e=>e.filter(e=>e.id!==t));var t},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:Ae.jsx(l,{className:"h-4 w-4 text-gray-400"})})]})]}),("uploading"===e.status||"processing"===e.status)&&Ae.jsx("div",{className:"mt-3",children:Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Ae.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})})]},e.id)})]})]})}function ga({personaId:e,onTrainingComplete:t}){const[n,i]=s.useState([{id:"content-analysis",name:"Content Analysis",description:"Analyzing uploaded videos, audio, and text content",status:"pending",progress:0},{id:"voice-modeling",name:"Voice Modeling",description:"Creating voice synthesis model from audio samples",status:"pending",progress:0},{id:"personality-extraction",name:"Personality Extraction",description:"Learning speech patterns, mannerisms, and personality traits",status:"pending",progress:0},{id:"conversation-training",name:"Conversation Training",description:"Training conversational AI with extracted personality",status:"pending",progress:0},{id:"final-optimization",name:"Final Optimization",description:"Optimizing model for real-time conversations",status:"pending",progress:0}]),[r,a]=s.useState(0),[o,c]=s.useState(!1);s.useEffect(()=>{const e=n.reduce((e,t)=>e+t.progress,0)/n.length;a(e),n.every(e=>"completed"===e.status)&&o&&(c(!1),l("active",100),null==t||t())},[n,o,t]);const l=async(t,n)=>{try{await pr.from("personas").update({status:t,training_progress:n,updated_at:(new Date).toISOString()}).eq("id",e)}catch(s){}},d=(e,t)=>new Promise(n=>{let s=0;const r=setInterval(()=>{s+=15*Math.random()+5,s>=100?(s=100,clearInterval(r),i(t=>t.map(t=>t.id===e?{...t,status:"completed",progress:100}:t)),n()):i(t=>t.map(t=>t.id===e?{...t,status:"processing",progress:Math.floor(s)}:t))},t/20)}),u=e=>{switch(e){case"completed":return Ae.jsx(m,{className:"h-5 w-5 text-green-500"});case"processing":return Ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"});case"error":return Ae.jsx(f,{className:"h-5 w-5 text-red-500"});default:return Ae.jsx(j,{className:"h-5 w-5 text-gray-400"})}};return Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[Ae.jsxs("div",{className:"text-center mb-8",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:Ae.jsx(_,{className:"h-8 w-8 text-white"})}),Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"AI Training Progress"}),Ae.jsx("p",{className:"text-gray-600",children:o?"Training your persona with uploaded content...":"Ready to start training your AI persona"})]}),Ae.jsxs("div",{className:"mb-8",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-2",children:[Ae.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),Ae.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Math.floor(r),"%"]})]}),Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:Ae.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${r}%`}})})]}),Ae.jsx("div",{className:"space-y-4 mb-8",children:n.map((e,t)=>Ae.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[Ae.jsx("div",{className:"flex-shrink-0",children:u(e.status)}),Ae.jsxs("div",{className:"flex-1",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-1",children:[Ae.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),Ae.jsxs("span",{className:"text-sm text-gray-500",children:[e.progress,"%"]})]}),Ae.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),"processing"===e.status&&Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Ae.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})]})]},e.id))}),Ae.jsxs("div",{className:"text-center",children:[!o&&0===r&&Ae.jsxs("button",{onClick:async()=>{c(!0),await l("training",0),i(e=>e.map(e=>({...e,status:"pending",progress:0})));for(const e of n)await d(e.id,3e3*Math.random()+2e3)},className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-full font-semibold hover:shadow-lg transition-all duration-300 flex items-center mx-auto",children:[Ae.jsx(w,{className:"h-5 w-5 mr-2"}),"Start AI Training"]}),o&&Ae.jsxs("div",{className:"flex items-center justify-center text-purple-600",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600 mr-2"}),Ae.jsx("span",{className:"font-medium",children:"Training in progress..."})]}),!o&&100===r&&Ae.jsxs("div",{className:"flex items-center justify-center text-green-600",children:[Ae.jsx(m,{className:"h-5 w-5 mr-2"}),Ae.jsx("span",{className:"font-medium",children:"Training completed successfully!"})]})]})]})}function va({personaId:e,personaName:t,conversationType:n,onEndCall:i}){const[r,a]=s.useState([]),[o,c]=s.useState(""),[l,d]=s.useState(!1),[u,p]=s.useState(!1),[h,m]=s.useState(!0),[f,v]=s.useState(null),[x,y]=s.useState(!1),b=s.useRef(null),_=s.useRef(null);s.useEffect(()=>{j(),O()},[]),s.useEffect(()=>{w()},[r]);const w=()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})},j=async()=>{try{const{data:t,error:s}=await pr.from("conversations").insert({persona_id:e,conversation_type:n,started_at:(new Date).toISOString(),metadata:{}}).select().single();if(s)throw s;v(t.id)}catch(t){}},O=()=>{const e=[{id:"1",sender_type:"persona",content:"Hello! It's so wonderful to see you. I've missed our conversations. How are you feeling today?",timestamp:(new Date).toISOString(),message_type:"text"}];a(e)},A=async()=>{if(!o.trim()||!f)return;const e={id:Date.now().toString(),sender_type:"user",content:o,timestamp:(new Date).toISOString(),message_type:"text"};a(t=>[...t,e]),c(""),y(!0);try{await pr.from("messages").insert({conversation_id:f,sender_type:"user",content:o,message_type:"text",metadata:{}});const e=await(async()=>{const e=["I understand how you're feeling. That reminds me of when we used to talk about similar things.","You know, I've been thinking about our memories together. Tell me more about what's on your mind.","That's exactly the kind of thing I would have said! You know me so well.","I'm here for you, just like I always was. What would you like to talk about?","Your strength has always amazed me. Remember when we faced challenges together?","I can hear the emotion in your words. I'm listening, and I care about what you're going through."];return await new Promise(e=>setTimeout(e,1e3+2e3*Math.random())),e[Math.floor(Math.random()*e.length)]})(),t={id:(Date.now()+1).toString(),sender_type:"persona",content:e,timestamp:(new Date).toISOString(),message_type:"text"};a(e=>[...e,t]),y(!1),await pr.from("messages").insert({conversation_id:f,sender_type:"persona",content:e,message_type:"text",metadata:{}})}catch(t){y(!1)}},I=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},P=async()=>{var e;if(f)try{await pr.from("conversations").update({ended_at:(new Date).toISOString(),duration_seconds:Math.floor((Date.now()-Date.parse((null==(e=r[0])?void 0:e.timestamp)||""))/1e3)}).eq("id",f)}catch(t){}null==i||i()};return"video_call"===n?Ae.jsxs("div",{className:"h-screen bg-black flex flex-col",children:[Ae.jsxs("div",{className:"flex-1 relative",children:[Ae.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:Ae.jsxs("div",{className:"text-center text-white",children:[Ae.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-400 to-blue-400 rounded-full mx-auto mb-6 flex items-center justify-center",children:Ae.jsx("span",{className:"text-4xl font-bold",children:t[0]})}),Ae.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t}),Ae.jsx("p",{className:"text-gray-300",children:"Connected"})]})}),Ae.jsx("div",{className:"absolute top-4 right-4 w-32 h-24 bg-gray-800 rounded-lg border-2 border-white/20 flex items-center justify-center",children:h?Ae.jsx("div",{className:"text-white text-xs",children:"Your Video"}):Ae.jsx(k,{className:"h-6 w-6 text-gray-400"})}),Ae.jsx("div",{className:"absolute bottom-20 left-4 right-4 max-h-64 overflow-y-auto",children:Ae.jsxs("div",{className:"space-y-2",children:[r.slice(-3).map(e=>Ae.jsx("div",{className:"p-3 rounded-lg max-w-xs "+("user"===e.sender_type?"bg-purple-600 text-white ml-auto":"bg-white/90 text-gray-900"),children:Ae.jsx("p",{className:"text-sm",children:e.content})},e.id)),x&&Ae.jsx("div",{className:"bg-white/90 text-gray-900 p-3 rounded-lg max-w-xs",children:Ae.jsxs("div",{className:"flex space-x-1",children:[Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})]}),Ae.jsxs("div",{className:"p-6 bg-black/50 backdrop-blur",children:[Ae.jsxs("div",{className:"flex justify-center items-center space-x-6 mb-4",children:[Ae.jsx("button",{onClick:()=>p(!u),className:"p-4 rounded-full transition-colors "+(u?"bg-red-500":"bg-white/20 hover:bg-white/30"),children:u?Ae.jsx(S,{className:"h-6 w-6 text-white"}):Ae.jsx(E,{className:"h-6 w-6 text-white"})}),Ae.jsx("button",{onClick:P,className:"p-4 bg-red-500 rounded-full hover:bg-red-600 transition-colors",children:Ae.jsx(T,{className:"h-6 w-6 text-white"})}),Ae.jsx("button",{onClick:()=>m(!h),className:"p-4 rounded-full transition-colors "+(h?"bg-white/20 hover:bg-white/30":"bg-red-500"),children:h?Ae.jsx(g,{className:"h-6 w-6 text-white"}):Ae.jsx(k,{className:"h-6 w-6 text-white"})})]}),Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("input",{ref:_,type:"text",value:o,onChange:e=>c(e.target.value),onKeyPress:I,placeholder:"Type a message...",className:"flex-1 bg-white/20 backdrop-blur text-white placeholder-gray-300 px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500"}),Ae.jsx("button",{onClick:A,disabled:!o.trim(),className:"p-2 bg-purple-600 rounded-full hover:bg-purple-700 transition-colors disabled:opacity-50",children:Ae.jsx(N,{className:"h-5 w-5 text-white"})})]})]})]}):Ae.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[Ae.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-blue-400 rounded-full flex items-center justify-center",children:Ae.jsx("span",{className:"text-white font-semibold",children:t[0]})}),Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"font-semibold text-gray-900",children:t}),Ae.jsx("p",{className:"text-sm text-green-500",children:"Online"})]})]}),Ae.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:Ae.jsx(C,{className:"h-5 w-5 text-gray-600"})})]})}),Ae.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map(e=>{return Ae.jsx("div",{className:"flex "+("user"===e.sender_type?"justify-end":"justify-start"),children:Ae.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-2xl "+("user"===e.sender_type?"bg-purple-600 text-white":"bg-white text-gray-900 shadow-sm"),children:[Ae.jsx("p",{children:e.content}),Ae.jsx("p",{className:"text-xs mt-1 "+("user"===e.sender_type?"text-purple-200":"text-gray-500"),children:(t=e.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]})},e.id);var t}),x&&Ae.jsx("div",{className:"flex justify-start",children:Ae.jsx("div",{className:"bg-white text-gray-900 shadow-sm max-w-xs px-4 py-2 rounded-2xl",children:Ae.jsxs("div",{className:"flex space-x-1",children:[Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),Ae.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),Ae.jsx("div",{ref:b})]}),Ae.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("button",{onClick:()=>{d(!l)},className:"p-2 rounded-full transition-colors "+(l?"bg-red-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"),children:l?Ae.jsx(S,{className:"h-5 w-5"}):Ae.jsx(E,{className:"h-5 w-5"})}),Ae.jsx("input",{ref:_,type:"text",value:o,onChange:e=>c(e.target.value),onKeyPress:I,placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),Ae.jsx("button",{onClick:A,disabled:!o.trim(),className:"p-2 bg-purple-600 rounded-full hover:bg-purple-700 transition-colors disabled:opacity-50",children:Ae.jsx(N,{className:"h-5 w-5 text-white"})})]})})]})}function xa(){const[e,t]=s.useState(null),[n,i]=s.useState(null),[r,a]=s.useState(!1);s.useEffect(()=>{o()},[]);const o=async()=>{t("testing");const e=await async function(){try{const{data:e,error:t}=await pr.from("profiles").select("count",{count:"exact",head:!0});return!t}catch(e){return!1}}();t(e?"success":"error"),e&&c()},c=async()=>{i("testing");const e=await async function(){try{const{error:e}=await pr.from("profiles").select("count",{count:"exact",head:!0});return!(e&&"PGRST116"===e.code||e)}catch(e){return!1}}();i(e?"success":"error"),e||a(!0)};return Ae.jsx("div",{className:"max-w-4xl mx-auto p-6",children:Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[Ae.jsxs("div",{className:"text-center mb-8",children:[Ae.jsx(O,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Database Setup"}),Ae.jsx("p",{className:"text-gray-600",children:"Setting up your Supabase database for AlwayZ"})]}),Ae.jsxs("div",{className:"space-y-6",children:[Ae.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsxs("div",{className:"flex-shrink-0",children:["testing"===e&&Ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),"success"===e&&Ae.jsx(m,{className:"h-5 w-5 text-green-500"}),"error"===e&&Ae.jsx(f,{className:"h-5 w-5 text-red-500"})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-gray-900",children:"Supabase Connection"}),Ae.jsxs("p",{className:"text-sm text-gray-600",children:["testing"===e&&"Testing connection...","success"===e&&"Connected successfully","error"===e&&"Connection failed"]})]})]}),Ae.jsx("button",{onClick:o,className:"px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Test Again"})]}),"success"===e&&Ae.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsxs("div",{className:"flex-shrink-0",children:["testing"===n&&Ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),"success"===n&&Ae.jsx(m,{className:"h-5 w-5 text-green-500"}),"error"===n&&Ae.jsx(f,{className:"h-5 w-5 text-red-500"})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-gray-900",children:"Database Tables"}),Ae.jsxs("p",{className:"text-sm text-gray-600",children:["testing"===n&&"Checking database schema...","success"===n&&"All tables are ready","error"===n&&"Tables need to be created"]})]})]}),Ae.jsx("button",{onClick:c,className:"px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Check Again"})]}),r&&Ae.jsx("div",{className:"p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:Ae.jsxs("div",{className:"flex items-start space-x-3",children:[Ae.jsx(f,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-0.5"}),Ae.jsxs("div",{className:"flex-1",children:[Ae.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Database Migration Required"}),Ae.jsx("p",{className:"text-yellow-700 mb-4",children:"Your database tables haven't been created yet. Follow these steps:"}),Ae.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-yellow-700 mb-4",children:[Ae.jsx("li",{children:"Click the button below to copy the migration SQL"}),Ae.jsxs("li",{children:["Go to your ",Ae.jsx("a",{href:"https://supabase.com/dashboard/project/mzdldixwiedqdfvuuxxi/sql",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Supabase SQL Editor"})]}),Ae.jsx("li",{children:'Paste the SQL and click "Run"'}),Ae.jsx("li",{children:'Come back here and click "Check Again"'})]}),Ae.jsxs("button",{onClick:()=>{navigator.clipboard.writeText('-- Copy this SQL and run it in your Supabase SQL Editor\n-- Go to: https://supabase.com/dashboard/project/mzdldixwiedqdfvuuxxi/sql\n\n/*\n  # Initial AlwayZ Database Schema\n\n  1. New Tables\n    - profiles - User profile information\n    - personas - AI personas created by users\n    - persona_content - Uploaded content for training personas\n    - conversations - Chat/call sessions between users and personas\n    - messages - Individual messages within conversations\n    - subscriptions - User subscription management\n\n  2. Security\n    - Enable RLS on all tables\n    - Add policies for authenticated users to access their own data\n    - Secure file uploads and content access\n*/\n\n-- Create profiles table\nCREATE TABLE IF NOT EXISTS profiles (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE,\n  email text NOT NULL,\n  full_name text,\n  avatar_url text,\n  subscription_tier text DEFAULT \'free\',\n  created_at timestamptz DEFAULT now(),\n  updated_at timestamptz DEFAULT now()\n);\n\n-- Create personas table\nCREATE TABLE IF NOT EXISTS personas (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE,\n  name text NOT NULL,\n  relationship text,\n  description text,\n  personality_traits text,\n  common_phrases text[],\n  avatar_url text,\n  voice_model_id text,\n  status text DEFAULT \'training\',\n  training_progress integer DEFAULT 0,\n  created_at timestamptz DEFAULT now(),\n  updated_at timestamptz DEFAULT now()\n);\n\n-- Create persona content table for uploaded training data\nCREATE TABLE IF NOT EXISTS persona_content (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  persona_id uuid REFERENCES personas(id) ON DELETE CASCADE,\n  content_type text NOT NULL,\n  file_url text,\n  file_name text,\n  file_size bigint,\n  content_text text,\n  metadata jsonb DEFAULT \'{}\',\n  processing_status text DEFAULT \'pending\',\n  created_at timestamptz DEFAULT now()\n);\n\n-- Create conversations table\nCREATE TABLE IF NOT EXISTS conversations (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE,\n  persona_id uuid REFERENCES personas(id) ON DELETE CASCADE,\n  title text,\n  conversation_type text DEFAULT \'chat\',\n  duration_seconds integer DEFAULT 0,\n  started_at timestamptz DEFAULT now(),\n  ended_at timestamptz,\n  metadata jsonb DEFAULT \'{}\'\n);\n\n-- Create messages table\nCREATE TABLE IF NOT EXISTS messages (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  conversation_id uuid REFERENCES conversations(id) ON DELETE CASCADE,\n  sender_type text NOT NULL,\n  content text NOT NULL,\n  message_type text DEFAULT \'text\',\n  audio_url text,\n  video_url text,\n  timestamp timestamptz DEFAULT now(),\n  metadata jsonb DEFAULT \'{}\'\n);\n\n-- Create subscriptions table\nCREATE TABLE IF NOT EXISTS subscriptions (\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE,\n  stripe_customer_id text,\n  stripe_subscription_id text,\n  plan_name text NOT NULL,\n  status text NOT NULL,\n  current_period_start timestamptz,\n  current_period_end timestamptz,\n  created_at timestamptz DEFAULT now(),\n  updated_at timestamptz DEFAULT now()\n);\n\n-- Enable Row Level Security\nALTER TABLE profiles ENABLE ROW LEVEL SECURITY;\nALTER TABLE personas ENABLE ROW LEVEL SECURITY;\nALTER TABLE persona_content ENABLE ROW LEVEL SECURITY;\nALTER TABLE conversations ENABLE ROW LEVEL SECURITY;\nALTER TABLE messages ENABLE ROW LEVEL SECURITY;\nALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;\n\n-- Create RLS Policies\nCREATE POLICY "Users can read own profile" ON profiles FOR SELECT TO authenticated USING (auth.uid() = user_id);\nCREATE POLICY "Users can update own profile" ON profiles FOR UPDATE TO authenticated USING (auth.uid() = user_id);\nCREATE POLICY "Users can insert own profile" ON profiles FOR INSERT TO authenticated WITH CHECK (auth.uid() = user_id);\n\nCREATE POLICY "Users can read own personas" ON personas FOR SELECT TO authenticated USING (auth.uid() = user_id);\nCREATE POLICY "Users can create personas" ON personas FOR INSERT TO authenticated WITH CHECK (auth.uid() = user_id);\nCREATE POLICY "Users can update own personas" ON personas FOR UPDATE TO authenticated USING (auth.uid() = user_id);\nCREATE POLICY "Users can delete own personas" ON personas FOR DELETE TO authenticated USING (auth.uid() = user_id);\n\nCREATE POLICY "Users can read own persona content" ON persona_content FOR SELECT TO authenticated USING (EXISTS (SELECT 1 FROM personas WHERE personas.id = persona_content.persona_id AND personas.user_id = auth.uid()));\nCREATE POLICY "Users can upload persona content" ON persona_content FOR INSERT TO authenticated WITH CHECK (EXISTS (SELECT 1 FROM personas WHERE personas.id = persona_content.persona_id AND personas.user_id = auth.uid()));\n\nCREATE POLICY "Users can read own conversations" ON conversations FOR SELECT TO authenticated USING (auth.uid() = user_id);\nCREATE POLICY "Users can create conversations" ON conversations FOR INSERT TO authenticated WITH CHECK (auth.uid() = user_id);\n\nCREATE POLICY "Users can read messages from own conversations" ON messages FOR SELECT TO authenticated USING (EXISTS (SELECT 1 FROM conversations WHERE conversations.id = messages.conversation_id AND conversations.user_id = auth.uid()));\nCREATE POLICY "Users can create messages in own conversations" ON messages FOR INSERT TO authenticated WITH CHECK (EXISTS (SELECT 1 FROM conversations WHERE conversations.id = messages.conversation_id AND conversations.user_id = auth.uid()));\n\nCREATE POLICY "Users can read own subscription" ON subscriptions FOR SELECT TO authenticated USING (auth.uid() = user_id);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_personas_user_id ON personas(user_id);\nCREATE INDEX IF NOT EXISTS idx_persona_content_persona_id ON persona_content(persona_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_user_id ON conversations(user_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_persona_id ON conversations(persona_id);\nCREATE INDEX IF NOT EXISTS idx_messages_conversation_id ON messages(conversation_id);\nCREATE INDEX IF NOT EXISTS idx_subscriptions_user_id ON subscriptions(user_id);\n\n-- Create updated_at trigger function\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = now();\n  RETURN NEW;\nEND;\n$$ language \'plpgsql\';\n\n-- Create triggers for updated_at\nCREATE TRIGGER update_profiles_updated_at BEFORE UPDATE ON profiles FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_personas_updated_at BEFORE UPDATE ON personas FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_subscriptions_updated_at BEFORE UPDATE ON subscriptions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();'),alert("Migration SQL copied to clipboard!")},className:"flex items-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[Ae.jsx(A,{className:"h-4 w-4 mr-2"}),"Copy Migration SQL"]})]})]})}),"success"===n&&Ae.jsx("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg",children:Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx(m,{className:"h-6 w-6 text-green-600"}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-green-800",children:"Database Ready!"}),Ae.jsx("p",{className:"text-green-700",children:"Your Supabase database is fully configured and ready to use. You can now create accounts, personas, and start conversations!"})]})]})})]})]})})}const ya=[{id:"facebook",name:"Facebook",icon:$,color:"bg-blue-600",description:"Posts, photos, videos, and comments",dataTypes:["Posts","Photos","Videos","Comments","Profile Info"],requiresAuth:!0},{id:"instagram",name:"Instagram",icon:D,color:"bg-gradient-to-r from-purple-500 to-pink-500",description:"Photos, videos, stories, and captions",dataTypes:["Photos","Videos","Stories","Captions","Comments"],requiresAuth:!0},{id:"twitter",name:"Twitter/X",icon:L,color:"bg-black",description:"Tweets, replies, and media",dataTypes:["Tweets","Replies","Media","Bio"],requiresAuth:!0},{id:"linkedin",name:"LinkedIn",icon:M,color:"bg-blue-700",description:"Posts, articles, and professional content",dataTypes:["Posts","Articles","Comments","Profile"],requiresAuth:!0},{id:"youtube",name:"YouTube",icon:U,color:"bg-red-600",description:"Videos, comments, and channel info",dataTypes:["Videos","Comments","Channel Info","Playlists"],requiresAuth:!0},{id:"website",name:"Personal Website/Blog",icon:I,color:"bg-gray-600",description:"Blog posts, articles, and content",dataTypes:["Articles","Blog Posts","About Pages"],requiresAuth:!1}];function ba({personaId:e,onImportComplete:t}){var n;const[i,r]=s.useState([]),[a,o]=s.useState([]),[c,l]=s.useState(!1),[d,u]=s.useState(""),[h,g]=s.useState(null),v=e=>{switch(e){case"completed":return Ae.jsx(m,{className:"h-5 w-5 text-green-500"});case"error":return Ae.jsx(f,{className:"h-5 w-5 text-red-500"});case"authenticating":case"scraping":case"processing":return Ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"});default:return Ae.jsx("div",{className:"h-5 w-5 bg-gray-300 rounded-full"})}};return Ae.jsxs("div",{className:"space-y-8",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Import from Social Media"}),Ae.jsx("p",{className:"text-gray-600",children:"Automatically gather content from social media profiles to train your AI persona"})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Platforms"}),Ae.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:ya.map(e=>{const t=e.icon,n=i.includes(e.id);return Ae.jsx("div",{onClick:()=>{return"website"!==e.id&&(t=e.id,void r(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]));var t},className:`p-4 border-2 rounded-xl cursor-pointer transition-all duration-300 ${n?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300 hover:bg-gray-50"} ${"website"===e.id?"cursor-default":""}`,children:Ae.jsxs("div",{className:"flex items-start space-x-3",children:[Ae.jsx("div",{className:`p-2 rounded-lg ${e.color} flex-shrink-0`,children:Ae.jsx(t,{className:"h-5 w-5 text-white"})}),Ae.jsxs("div",{className:"flex-1",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Ae.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),e.requiresAuth&&Ae.jsx(p,{className:"h-4 w-4 text-gray-400"})]}),Ae.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),Ae.jsx("div",{className:"flex flex-wrap gap-1",children:e.dataTypes.map(e=>Ae.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e))})]})]})},e.id)})})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Website or Blog"}),Ae.jsxs("div",{className:"flex space-x-3",children:[Ae.jsx("div",{className:"flex-1",children:Ae.jsx("input",{type:"url",value:d,onChange:e=>u(e.target.value),placeholder:"https://example.com or https://blog.example.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),Ae.jsx("button",{onClick:()=>u(""),className:"px-4 py-3 text-gray-500 hover:text-gray-700 transition-colors",children:"Clear"})]}),Ae.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"We'll scrape publicly available content like blog posts, articles, and about pages"})]}),Ae.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ae.jsxs("div",{className:"flex items-start space-x-3",children:[Ae.jsx(p,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Privacy & Security"}),Ae.jsx("p",{className:"text-sm text-blue-700",children:"We only access content you explicitly authorize. All data is encrypted and used solely to train your personal AI persona. You can revoke access at any time."})]})]})}),a.length>0&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Progress"}),a.map(e=>{const t=ya.find(t=>t.id===e.platform),n=(null==t?void 0:t.icon)||I;return Ae.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[Ae.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("div",{className:`p-2 rounded-lg ${(null==t?void 0:t.color)||"bg-gray-600"}`,children:Ae.jsx(n,{className:"h-4 w-4 text-white"})}),Ae.jsxs("div",{children:[Ae.jsx("h4",{className:"font-medium text-gray-900",children:(null==t?void 0:t.name)||"Website"}),Ae.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[e.status.replace("_"," "),e.itemsFound>0&&`  ${e.itemsFound} items found`]})]})]}),v(e.status)]}),("scraping"===e.status||"processing"===e.status)&&Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Ae.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})]},e.id)})]}),Ae.jsxs("div",{className:"flex justify-end space-x-4",children:[Ae.jsx("button",{onClick:()=>{r([]),u(""),o([])},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Clear All"}),Ae.jsx("button",{onClick:async()=>{if(0===i.length&&!d)return;l(!0);const n=[];i.forEach(e=>{n.push({id:`${e}-${Date.now()}`,platform:e,status:"pending",progress:0,itemsFound:0})}),d&&n.push({id:`website-${Date.now()}`,platform:"website",status:"pending",progress:0,itemsFound:0}),o(n);try{const s=await Promise.all(n.map(e=>(async e=>{const t={id:`${e}-${Date.now()}`,platform:e,status:"pending",progress:0,itemsFound:0};t.status="authenticating",await new Promise(e=>setTimeout(e,1e3)),t.status="scraping";const n=Math.floor(200*Math.random())+50;for(let s=0;s<=100;s+=5)t.progress=s,t.itemsFound=Math.floor(s/100*n),o(e=>e.map(e=>e.id===t.id?{...t}:e)),await new Promise(e=>setTimeout(e,200));return t.status="processing",await new Promise(e=>setTimeout(e,1500)),t.status="completed",t.progress=100,t.itemsFound=n,t})(e.platform)));for(const t of s){const n=ya.find(e=>e.id===t.platform);await pr.from("persona_content").insert({persona_id:e,content_type:"social_media",content_text:`Imported ${t.itemsFound} items from ${(null==n?void 0:n.name)||t.platform}`,metadata:{platform:t.platform,items_count:t.itemsFound,import_date:(new Date).toISOString(),data_types:(null==n?void 0:n.dataTypes)||[]},processing_status:"completed"})}null==t||t(s)}catch(s){}finally{l(!1)}},disabled:c||0===i.length&&!d,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 disabled:opacity-50 flex items-center",children:c?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(P,{className:"h-4 w-4 mr-2"}),"Start Import"]})})]}),h&&Ae.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:Ae.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:Ae.jsx(R,{className:"h-8 w-8 text-white"})}),Ae.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:["Connecting to ",null==(n=ya.find(e=>e.id===h))?void 0:n.name]}),Ae.jsx("p",{className:"text-gray-600 mb-6",children:"Please wait while we establish a secure connection..."}),Ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"})]})})})]})}var _a,wa="https://js.stripe.com/v3",ja=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ka=function(e){var t=document.createElement("script");t.src="".concat(wa).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},Sa=null,Ea=null,Ta=null,Na=function(e){return null!==Sa?Sa:(Sa=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(wa,'"]')),t=0;t<e.length;t++){var n=e[t];if(ja.test(n.src))return n}return null}();if(s&&e);else if(s){if(s&&null!==Ta&&null!==Ea){var i;s.removeEventListener("load",Ta),s.removeEventListener("error",Ea),null===(i=s.parentNode)||void 0===i||i.removeChild(s),s=ka()}}else s=ka();Ta=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),Ea=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),s.addEventListener("load",Ta),s.addEventListener("error",Ea)}catch(r){return void n(r)}else t(null)})).catch(function(e){return Sa=null,Promise.reject(e)})},Ca=function(){return _a||(_a=Na(null).catch(function(e){return _a=null,Promise.reject(e)}))};let Oa;Promise.resolve().then(function(){return Ca()}).catch(function(e){});const Aa=()=>(Oa||(Oa=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=Date.now();return Ca().then(function(e){return function(e,t,n){if(null===e)return null;var s=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})}(s,n),s}(e,t,s)})}("pk_test_51Rf6twERRUj60hol0bcKr0pIj8tej8WJtXK0g1ceO3cYgDej4LRVaHo01TtochYWynSa1ddSgyecZ0pOKr5AecZg00u3jolEwh")),Oa),Ia=[{id:"free",name:"Free",price:0,interval:"month",features:["1 AI Persona","10 conversations/month","Basic voice synthesis","100MB storage","Community support"],limits:{personas:1,conversations:10,storage:"100MB",voiceMinutes:30},stripePriceId:""},{id:"pro",name:"Pro",price:29,interval:"month",features:["5 AI Personas","Unlimited conversations","Premium voice synthesis","10GB storage","Video calls","Social media import","Priority support"],limits:{personas:5,conversations:-1,storage:"10GB",voiceMinutes:500},stripePriceId:"price_pro_monthly"},{id:"premium",name:"Premium",price:99,interval:"month",features:["Unlimited AI Personas","Unlimited conversations","Custom voice cloning","100GB storage","Advanced video calls","API access","White-label options","Dedicated support"],limits:{personas:-1,conversations:-1,storage:"100GB",voiceMinutes:-1},stripePriceId:"price_premium_monthly"}],Pa=new class{constructor(){this.stripe=null}async initialize(){this.stripe=await Aa()}async createCheckoutSession(e,t){try{const n=Ia.find(t=>t.id===e);if(!n||0===n.price)throw new Error("Invalid plan selected");const{data:s,error:i}=await pr.functions.invoke("create-checkout-session",{body:{priceId:n.stripePriceId,userId:t,planId:e}});if(i)throw i;return{sessionId:s.sessionId,url:s.url}}catch(n){throw new Error("Failed to create checkout session")}}async createPortalSession(e){try{const{data:t,error:n}=await pr.functions.invoke("create-portal-session",{body:{customerId:e}});if(n)throw n;return t}catch(t){throw new Error("Failed to create portal session")}}async getCurrentSubscription(e){try{const{data:t,error:n}=await pr.from("subscriptions").select("*").eq("user_id",e).eq("status","active").single();return n||!t?null:{plan:Ia.find(e=>e.id===t.plan_name)||Ia[0],status:t.status,currentPeriodEnd:new Date(t.current_period_end),cancelAtPeriodEnd:t.cancel_at_period_end||!1}}catch(t){return null}}async getUsageStats(e){var t;try{const{count:n}=await pr.from("personas").select("*",{count:"exact",head:!0}).eq("user_id",e),s=new Date;s.setDate(1),s.setHours(0,0,0,0);const{count:i}=await pr.from("conversations").select("*",{count:"exact",head:!0}).eq("user_id",e).gte("started_at",s.toISOString()),{data:r}=await pr.from("persona_content").select("file_size").in("persona_id",(null==(t=(await pr.from("personas").select("id").eq("user_id",e)).data)?void 0:t.map(e=>e.id))||[]),a=(null==r?void 0:r.reduce((e,t)=>e+(t.file_size||0),0))||0,{data:o}=await pr.from("conversations").select("duration_seconds").eq("user_id",e).gte("started_at",s.toISOString()),c=Math.round(((null==o?void 0:o.reduce((e,t)=>e+(t.duration_seconds||0),0))||0)/60);return{personas:n||0,conversations:i||0,storageUsed:Math.round(a/1048576),voiceMinutesUsed:c}}catch(n){return{personas:0,conversations:0,storageUsed:0,voiceMinutesUsed:0}}}async checkUsageLimits(e,t){try{const n=await this.getCurrentSubscription(e),s=await this.getUsageStats(e),i=(null==n?void 0:n.plan)||Ia[0];switch(t){case"create_persona":if(-1!==i.limits.personas&&s.personas>=i.limits.personas)return{allowed:!1,reason:`You've reached your limit of ${i.limits.personas} personas`,upgradeRequired:!0};break;case"start_conversation":if(-1!==i.limits.conversations&&s.conversations>=i.limits.conversations)return{allowed:!1,reason:`You've reached your monthly limit of ${i.limits.conversations} conversations`,upgradeRequired:!0}}return{allowed:!0}}catch(n){return{allowed:!0}}}};let Ra,$a,Da,La={data:""},Ma=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ua=/\/\*[^]*?\*\/|  +/g,Fa=/\n+/g,za=(e,t)=>{let n="",s="",i="";for(let r in e){let a=e[r];"@"==r[0]?"i"==r[1]?n=r+" "+a+";":s+="f"==r[1]?za(a,r):r+"{"+za(a,"k"==r[1]?"":t)+"}":"object"==typeof a?s+=za(a,t?t.replace(/([^,])+/g,e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):r):null!=a&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=za.p?za.p(r,a):r+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+s},qa={},Ba=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Ba(e[n]);return t}return e};function Ha(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,s,i)=>{let r=Ba(e),a=qa[r]||(qa[r]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(r));if(!qa[a]){let t=r!==e?e:(e=>{let t,n,s=[{}];for(;t=Ma.exec(e.replace(Ua,""));)t[4]?s.shift():t[3]?(n=t[3].replace(Fa," ").trim(),s.unshift(s[0][n]=s[0][n]||{})):s[0][t[1]]=t[2].replace(Fa," ").trim();return s[0]})(e);qa[a]=za(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&qa.g?qa.g:null;return n&&(qa.g=qa[a]),c=qa[a],l=t,d=s,(u=o)?l.data=l.data.replace(u,c):-1===l.data.indexOf(c)&&(l.data=d?c+l.data:l.data+c),a;var c,l,d,u})(n.unshift?n.raw?((e,t,n)=>e.reduce((e,s,i)=>{let r=t[i];if(r&&r.call){let e=r(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":za(e,""):!1===e?"":e}return e+s+(null==r?"":r)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,(s=t.target,"object"==typeof window?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||La),t.g,t.o,t.k);var s}Ha.bind({g:1});let Wa=Ha.bind({k:1});function Ga(e,t){let n=this||{};return function(){let t=arguments;return function s(i,r){let a=Object.assign({},i),o=a.className||s.className;n.p=Object.assign({theme:$a&&$a()},a),n.o=/ *go\d+/.test(o),a.className=Ha.apply(n,t)+(o?" "+o:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),Da&&c[0]&&Da(a),Ra(c,a)}}}var Ya=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ka=(()=>{let e=0;return()=>(++e).toString()})(),Ja=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Va=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return Va(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},Xa=[],Za={toasts:[],pausedAt:void 0},Qa=e=>{Za=Va(Za,e),Xa.forEach(e=>{e(Za)})},eo={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},to=e=>(t,n)=>{let s=((e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Ka()}))(t,e,n);return Qa({type:2,toast:s}),s.id},no=(e,t)=>to("blank")(e,t);no.error=to("error"),no.success=to("success"),no.loading=to("loading"),no.custom=to("custom"),no.dismiss=e=>{Qa({type:3,toastId:e})},no.remove=e=>Qa({type:4,toastId:e}),no.promise=(e,t,n)=>{let s=no.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let i=t.success?Ya(t.success,e):void 0;return i?no.success(i,{id:s,...n,...null==n?void 0:n.success}):no.dismiss(s),e}).catch(e=>{let i=t.error?Ya(t.error,e):void 0;i?no.error(i,{id:s,...n,...null==n?void 0:n.error}):no.dismiss(s)}),e};var so,io,ro,ao,oo=(e,t)=>{Qa({type:1,toast:{id:e,height:t}})},co=()=>{Qa({type:5,time:Date.now()})},lo=new Map,uo=e=>{let{toasts:t,pausedAt:n}=((e={})=>{let[t,n]=s.useState(Za),i=s.useRef(Za);s.useEffect(()=>(i.current!==Za&&n(Za),Xa.push(n),()=>{let e=Xa.indexOf(n);e>-1&&Xa.splice(e,1)}),[]);let r=t.toasts.map(t=>{var n,s,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(s=e[t.type])?void 0:s.duration)||(null==e?void 0:e.duration)||eo[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}});return{...t,toasts:r}})(e);s.useEffect(()=>{if(n)return;let e=Date.now(),s=t.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout(()=>no.dismiss(t.id),n);t.visible&&no.dismiss(t.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[t,n]);let i=s.useCallback(()=>{n&&Qa({type:6,time:Date.now()})},[n]),r=s.useCallback((e,n)=>{let{reverseOrder:s=!1,gutter:i=8,defaultPosition:r}=n||{},a=t.filter(t=>(t.position||r)===(e.position||r)&&t.height),o=a.findIndex(t=>t.id===e.id),c=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...s?[c+1]:[0,c]).reduce((e,t)=>e+(t.height||0)+i,0)},[t]);return s.useEffect(()=>{t.forEach(e=>{if(e.dismissed)((e,t=1e3)=>{if(lo.has(e))return;let n=setTimeout(()=>{lo.delete(e),Qa({type:4,toastId:e})},t);lo.set(e,n)})(e.id,e.removeDelay);else{let t=lo.get(e.id);t&&(clearTimeout(t),lo.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:oo,startPause:co,endPause:i,calculateOffset:r}}},po=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ho=Wa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mo=Wa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fo=Ga("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${po} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ho} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mo} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,go=Wa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,vo=Ga("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${go} 1s linear infinite;
`,xo=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yo=Wa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,bo=Ga("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xo} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yo} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_o=Ga("div")`
  position: absolute;
`,wo=Ga("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jo=Wa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ko=Ga("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jo} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,So=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return void 0!==t?"string"==typeof t?s.createElement(ko,null,t):t:"blank"===n?null:s.createElement(wo,null,s.createElement(vo,{...i}),"loading"!==n&&s.createElement(_o,null,"error"===n?s.createElement(fo,{...i}):s.createElement(bo,{...i})))},Eo=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,To=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,No=Ga("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Co=Ga("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Oo=s.memo(({toast:e,position:t,style:n,children:i})=>{let r=e.height?((e,t)=>{let n=e.includes("top")?1:-1,[s,i]=Ja()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Eo(n),To(n)];return{animation:t?`${Wa(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wa(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},a=s.createElement(So,{toast:e}),o=s.createElement(Co,{...e.ariaProps},Ya(e.message,e));return s.createElement(No,{className:e.className,style:{...r,...n,...e.style}},"function"==typeof i?i({icon:a,message:o}):s.createElement(s.Fragment,null,a,o))});so=s.createElement,za.p=io,Ra=so,$a=ro,Da=ao;var Ao=({id:e,className:t,style:n,onHeightUpdate:i,children:r})=>{let a=s.useCallback(t=>{if(t){let n=()=>{let n=t.getBoundingClientRect().height;i(e,n)};n(),new MutationObserver(n).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return s.createElement("div",{ref:a,className:t,style:n},r)},Io=Ha`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Po=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:r,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:l}=uo(n);return s.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...a},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},c.map(n=>{let a=n.position||t,o=((e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ja()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...i}})(a,l.calculateOffset(n,{reverseOrder:e,gutter:i,defaultPosition:t}));return s.createElement(Ao,{id:n.id,key:n.id,onHeightUpdate:l.updateHeight,className:n.visible?Io:"",style:o},"custom"===n.type?Ya(n.message,n):r?r(n):s.createElement(Oo,{toast:n,position:a}))}))},Ro=no;function $o(){const{user:e}=mr(),[t,n]=s.useState(null),[i,r]=s.useState(null),[a,o]=s.useState(!0),[c,l]=s.useState(null);s.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{await Pa.initialize();const[t,s]=await Promise.all([Pa.getCurrentSubscription(e.id),Pa.getUsageStats(e.id)]);n(t),r(s)}catch(t){Ro.error("Failed to load subscription information")}finally{o(!1)}},u=async()=>{if(null==t?void 0:t.customerId)try{const e=await Pa.createPortalSession(t.customerId);window.open(e.url,"_blank")}catch(e){Ro.error("Failed to open subscription management")}},p=(e,t)=>-1===t?0:Math.min(e/t*100,100);return a?Ae.jsx("div",{className:"max-w-6xl mx-auto p-6",children:Ae.jsxs("div",{className:"animate-pulse space-y-6",children:[Ae.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),Ae.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(e=>Ae.jsx("div",{className:"h-96 bg-gray-200 rounded-2xl"},e))})]})}):Ae.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Subscription & Usage"}),Ae.jsx("p",{className:"text-gray-600",children:"Manage your AlwayZ subscription and monitor your usage"})]}),i&&t&&Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Current Usage"}),Ae.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:Ae.jsx(F,{className:"h-8 w-8 text-purple-600"})}),Ae.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.personas}),Ae.jsxs("div",{className:"text-sm text-gray-500",children:["of ",-1===t.plan.limits.personas?"":t.plan.limits.personas," personas"]}),Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:Ae.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${p(i.personas,t.plan.limits.personas)}%`}})})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:Ae.jsx(j,{className:"h-8 w-8 text-blue-600"})}),Ae.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.conversations}),Ae.jsxs("div",{className:"text-sm text-gray-500",children:["of ",-1===t.plan.limits.conversations?"":t.plan.limits.conversations," conversations"]}),Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:Ae.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${p(i.conversations,t.plan.limits.conversations)}%`}})})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:Ae.jsx(z,{className:"h-8 w-8 text-green-600"})}),Ae.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(h=i.storageUsed,h<1024?`${h} MB`:`${(h/1024).toFixed(1)} GB`)}),Ae.jsxs("div",{className:"text-sm text-gray-500",children:["of ",t.plan.limits.storage]}),Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:Ae.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"25%"}})})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:Ae.jsx(E,{className:"h-8 w-8 text-orange-600"})}),Ae.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.voiceMinutesUsed}),Ae.jsxs("div",{className:"text-sm text-gray-500",children:["of ",-1===t.plan.limits.voiceMinutes?"":t.plan.limits.voiceMinutes," minutes"]}),Ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:Ae.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${p(i.voiceMinutesUsed,t.plan.limits.voiceMinutes)}%`}})})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Choose Your Plan"}),Ae.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Ia.map(n=>{var s;const i=(null==(s=null==t?void 0:t.plan)?void 0:s.id)===n.id,r="pro"===n.id;return Ae.jsxs("div",{className:"relative bg-white rounded-2xl shadow-sm border-2 transition-all duration-300 "+(i?"border-purple-500 ring-2 ring-purple-200":r?"border-purple-300":"border-gray-200 hover:border-purple-300"),children:[r&&Ae.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:Ae.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),i&&Ae.jsx("div",{className:"absolute -top-3 right-4",children:Ae.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current Plan"})}),Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"text-center mb-6",children:[Ae.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+("free"===n.id?"bg-gray-100":"pro"===n.id?"bg-purple-100":"bg-gradient-to-br from-purple-100 to-blue-100"),children:"premium"===n.id?Ae.jsx(q,{className:"h-8 w-8 "+("premium"===n.id?"text-purple-600":"text-gray-600")}):Ae.jsx(w,{className:"h-8 w-8 "+("pro"===n.id?"text-purple-600":"text-gray-600")})}),Ae.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:n.name}),Ae.jsxs("div",{className:"mt-2",children:[Ae.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",n.price]}),n.price>0&&Ae.jsxs("span",{className:"text-gray-500",children:["/",n.interval]})]})]}),Ae.jsx("ul",{className:"space-y-3 mb-8",children:n.features.map((e,t)=>Ae.jsxs("li",{className:"flex items-center",children:[Ae.jsx(B,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),Ae.jsx("span",{className:"text-gray-700",children:e})]},t))}),Ae.jsx("div",{className:"space-y-3",children:i?Ae.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[Ae.jsx(H,{className:"h-4 w-4 mr-2"}),"Manage Subscription"]}):Ae.jsx("button",{onClick:()=>(async t=>{if(e){l(t);try{const n=await Pa.createCheckoutSession(t,e.id);window.location.href=n.url}catch(n){Ro.error("Failed to start upgrade process")}finally{l(null)}}})(n.id),disabled:c===n.id||0===n.price,className:`w-full px-4 py-3 rounded-lg font-semibold transition-all duration-300 ${"pro"===n.id||"premium"===n.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:shadow-lg":"bg-gray-100 text-gray-500 cursor-not-allowed"} disabled:opacity-50`,children:c===n.id?Ae.jsxs("div",{className:"flex items-center justify-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):0===n.price?"Current Plan":`Upgrade to ${n.name}`})})]})]},n.id)})})]}),t&&t.plan.price>0&&Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Billing Information"}),Ae.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Current Plan"}),Ae.jsxs("p",{className:"text-gray-600",children:[t.plan.name," - $",t.plan.price,"/",t.plan.interval]})]}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Next Billing Date"}),Ae.jsx("p",{className:"text-gray-600",children:t.currentPeriodEnd.toLocaleDateString()})]})]}),Ae.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:Ae.jsxs("button",{onClick:u,className:"flex items-center text-purple-600 hover:text-purple-700 font-medium",children:[Ae.jsx(W,{className:"h-4 w-4 mr-2"}),"Manage billing and payment methods"]})})]})]});var h}function Do(){const{user:e}=mr(),[t,n]=s.useState(null),[i,r]=s.useState(!0),[a,o]=s.useState("month");s.useEffect(()=>{e&&c()},[e,a]);const c=async()=>{try{r(!0);const t=new Date,s=new Date;switch(a){case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1);break;case"year":s.setFullYear(t.getFullYear()-1)}const{data:i}=await pr.from("conversations").select("\n          *,\n          personas(name),\n          messages(content, sender_type, timestamp)\n        ").eq("user_id",e.id).gte("started_at",s.toISOString());if(!i)return void n(null);const o=await l(i);n(o)}catch(t){}finally{r(!1)}},l=async e=>{const t=e.length,n=new Date;n.setDate(1),n.setHours(0,0,0,0);const s=e.filter(e=>new Date(e.started_at)>=n).length,i=e.reduce((e,t)=>e+(t.duration_seconds||0),0)/60,r=t>0?i/t:0,a=[],o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];for(let d=0;d<7;d++){const t=new Date;t.setDate(t.getDate()-(6-d));const n=e.filter(e=>new Date(e.started_at).toDateString()===t.toDateString());a.push({day:o[d],conversations:n.length,duration:n.reduce((e,t)=>e+(t.duration_seconds||0),0)/60})}const c=e.reduce((e,t)=>{var n;const s=(null==(n=t.personas)?void 0:n.name)||"Unknown",i=e.find(e=>e.name===s);return i?(i.conversations++,i.totalTime+=(t.duration_seconds||0)/60):e.push({name:s,conversations:1,totalTime:(t.duration_seconds||0)/60}),e},[]),l=[];for(let d=5;d>=0;d--){const t=new Date;t.setMonth(t.getMonth()-d);const n=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0),i=e.filter(e=>{const t=new Date(e.started_at);return t>=n&&t<=s});l.push({month:t.toLocaleDateString("en-US",{month:"short"}),conversations:i.length,avgDuration:i.length>0?i.reduce((e,t)=>e+(t.duration_seconds||0),0)/i.length/60:0})}return{conversationStats:{total:t,thisMonth:s,avgDuration:Math.round(r),totalMinutes:Math.round(i)},emotionalInsights:[{emotion:"Joy",count:45,color:"#10B981"},{emotion:"Nostalgia",count:32,color:"#8B5CF6"},{emotion:"Comfort",count:28,color:"#06B6D4"},{emotion:"Sadness",count:15,color:"#EF4444"},{emotion:"Peace",count:22,color:"#F59E0B"}],weeklyActivity:a,personaUsage:c,monthlyTrends:l}};return i?Ae.jsx("div",{className:"max-w-7xl mx-auto p-6",children:Ae.jsxs("div",{className:"animate-pulse space-y-6",children:[Ae.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),Ae.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>Ae.jsx("div",{className:"h-32 bg-gray-200 rounded-2xl"},e))}),Ae.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[1,2].map(e=>Ae.jsx("div",{className:"h-80 bg-gray-200 rounded-2xl"},e))})]})}):t?Ae.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[Ae.jsxs("div",{className:"flex justify-between items-center",children:[Ae.jsxs("div",{children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics & Insights"}),Ae.jsx("p",{className:"text-gray-600",children:"Track your conversations and emotional journey"})]}),Ae.jsx("div",{className:"flex space-x-2",children:["week","month","year"].map(e=>Ae.jsx("button",{onClick:()=>o(e),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(a===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),Ae.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Conversations"}),Ae.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.conversationStats.total})]}),Ae.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:Ae.jsx(G,{className:"h-6 w-6 text-purple-600"})})]})}),Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),Ae.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.conversationStats.thisMonth})]}),Ae.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:Ae.jsx(Y,{className:"h-6 w-6 text-blue-600"})})]})}),Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Duration"}),Ae.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t.conversationStats.avgDuration,"m"]})]}),Ae.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:Ae.jsx(j,{className:"h-6 w-6 text-green-600"})})]})}),Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsxs("div",{children:[Ae.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Time"}),Ae.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[t.conversationStats.totalMinutes,"m"]})]}),Ae.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:Ae.jsx(K,{className:"h-6 w-6 text-orange-600"})})]})})]}),Ae.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Weekly Activity"}),Ae.jsx(oe,{width:"100%",height:300,children:Ae.jsxs(ce,{data:t.weeklyActivity,children:[Ae.jsx(le,{strokeDasharray:"3 3"}),Ae.jsx(de,{dataKey:"day"}),Ae.jsx(ue,{}),Ae.jsx(pe,{}),Ae.jsx(he,{dataKey:"conversations",fill:"#8B5CF6"})]})})]}),Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Emotional Insights"}),Ae.jsx(oe,{width:"100%",height:300,children:Ae.jsxs(me,{children:[Ae.jsx(fe,{data:t.emotionalInsights,cx:"50%",cy:"50%",outerRadius:100,dataKey:"count",label:({emotion:e,count:t})=>`${e}: ${t}`,children:t.emotionalInsights.map((e,t)=>Ae.jsx(ge,{fill:e.color},`cell-${t}`))}),Ae.jsx(pe,{})]})})]}),Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Monthly Trends"}),Ae.jsx(oe,{width:"100%",height:300,children:Ae.jsxs(ve,{data:t.monthlyTrends,children:[Ae.jsx(le,{strokeDasharray:"3 3"}),Ae.jsx(de,{dataKey:"month"}),Ae.jsx(ue,{}),Ae.jsx(pe,{}),Ae.jsx(xe,{type:"monotone",dataKey:"conversations",stroke:"#8B5CF6",strokeWidth:2})]})})]}),Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Persona Usage"}),Ae.jsx("div",{className:"space-y-4",children:t.personaUsage.map((e,t)=>Ae.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[Ae.jsxs("div",{className:"flex items-center space-x-3",children:[Ae.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-blue-400 rounded-full flex items-center justify-center",children:Ae.jsx("span",{className:"text-white font-semibold",children:e.name[0]})}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),Ae.jsxs("p",{className:"text-sm text-gray-600",children:[e.conversations," conversations"]})]})]}),Ae.jsxs("div",{className:"text-right",children:[Ae.jsxs("p",{className:"font-semibold text-gray-900",children:[Math.round(e.totalTime),"m"]}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"total time"})]})]},t))})]})]})]}):Ae.jsx("div",{className:"max-w-7xl mx-auto p-6 text-center",children:Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-12",children:[Ae.jsx(G,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),Ae.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Data Yet"}),Ae.jsx("p",{className:"text-gray-600",children:"Start having conversations with your personas to see analytics here."})]})})}const Lo=s.createContext(null),Mo={didCatch:!1,error:null};let Uo=class extends s.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Mo}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,n,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];null===(t=(n=this.props).onReset)||void 0===t||t.call(n,{args:i,reason:"imperative-api"}),this.setState(Mo)}}componentDidCatch(e,t){var n,s;null===(n=(s=this.props).onError)||void 0===n||n.call(s,e,t)}componentDidUpdate(e,t){const{didCatch:n}=this.state,{resetKeys:s}=this.props;var i,r;n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}(e.resetKeys,s)&&(null===(i=(r=this.props).onReset)||void 0===i||i.call(r,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(Mo))}render(){const{children:e,fallbackRender:t,FallbackComponent:n,fallback:i}=this.props,{didCatch:r,error:a}=this.state;let o=e;if(r){const e={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)o=t(e);else if(n)o=s.createElement(n,e);else{if(void 0===i)throw a;o=i}}return s.createElement(Lo.Provider,{value:{didCatch:r,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}};const Fo=Object.prototype.toString;function zo(e){switch(Fo.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Zo(e,Error)}}function qo(e,t){return Fo.call(e)===`[object ${t}]`}function Bo(e){return qo(e,"ErrorEvent")}function Ho(e){return qo(e,"DOMError")}function Wo(e){return qo(e,"String")}function Go(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Yo(e){return null===e||Go(e)||"object"!=typeof e&&"function"!=typeof e}function Ko(e){return qo(e,"Object")}function Jo(e){return"undefined"!=typeof Event&&Zo(e,Event)}function Vo(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Xo(e){return"number"==typeof e&&e!=e}function Zo(e,t){try{return e instanceof t}catch(n){return!1}}function Qo(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function ec(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function tc(e,t){if(!Array.isArray(e))return"";const n=[];for(let s=0;s<e.length;s++){const t=e[s];try{Qo(t)?n.push("[VueViewModel]"):n.push(String(t))}catch(so){n.push("[value cannot be serialized]")}}return n.join(t)}function nc(e,t,n=!1){return!!Wo(e)&&(qo(t,"RegExp")?t.test(e):!!Wo(t)&&(n?e===t:e.includes(t)))}function sc(e,t=[],n=!1){return t.some(t=>nc(e,t,n))}function ic(e,t,n=250,s,i,r,a){if(!(r.exception&&r.exception.values&&a&&Zo(a.originalException,Error)))return;const o=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;var c,l;o&&(r.exception.values=(c=rc(e,t,i,a.originalException,s,r.exception.values,o,0),l=n,c.map(e=>(e.value&&(e.value=ec(e.value,l)),e))))}function rc(e,t,n,s,i,r,a,o){if(r.length>=n+1)return r;let c=[...r];if(Zo(s[i],Error)){ac(a,o);const r=e(t,s[i]),l=c.length;oc(r,i,l,o),c=rc(e,t,n,s[i],i,[r,...c],r,l)}return Array.isArray(s.errors)&&s.errors.forEach((s,r)=>{if(Zo(s,Error)){ac(a,o);const l=e(t,s),d=c.length;oc(l,`errors[${r}]`,d,o),c=rc(e,t,n,s,i,[l,...c],l,d)}}),c}function ac(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function oc(e,t,n,s){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:s}}function cc(e){return e&&e.Math==Math?e:void 0}const lc="object"==typeof globalThis&&cc(globalThis)||"object"==typeof window&&cc(window)||"object"==typeof self&&cc(self)||"object"==typeof global&&cc(global)||function(){return this}()||{};function dc(){return lc}function uc(e,t,n){const s=n||lc,i=s.__SENTRY__=s.__SENTRY__||{};return i[e]||(i[e]=t())}const pc=dc();function hc(e,t={}){if(!e)return"<unknown>";try{let n=e;const s=5,i=[];let r=0,a=0;const o=" > ",c=o.length;let l;const d=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&r++<s&&(l=mc(n,d),!("html"===l||r>1&&a+i.length*c+l.length>=u));)i.push(l),a+=l.length,n=n.parentNode;return i.reverse().join(o)}catch(n){return"<unknown>"}}function mc(e,t){const n=e,s=[];let i,r,a,o,c;if(!n||!n.tagName)return"";if(pc.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;s.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(l&&l.length)l.forEach(e=>{s.push(`[${e[0]}="${e[1]}"]`)});else if(n.id&&s.push(`#${n.id}`),i=n.className,i&&Wo(i))for(r=i.split(/\s+/),c=0;c<r.length;c++)s.push(`.${r[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)a=d[c],o=n.getAttribute(a),o&&s.push(`[${a}="${o}"]`);return s.join("")}function fc(e){if(!pc.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const gc="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,vc=["debug","info","warn","error","log","assert","trace"],xc={};function yc(e){if(!("console"in lc))return e();const t=lc.console,n={},s=Object.keys(xc);s.forEach(e=>{const s=xc[e];n[e]=t[e],t[e]=s});try{return e()}finally{s.forEach(e=>{t[e]=n[e]})}}const bc=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return gc?vc.forEach(n=>{t[n]=(...t)=>{e&&yc(()=>{lc.console[n](`Sentry Logger [${n}]:`,...t)})}}):vc.forEach(e=>{t[e]=()=>{}}),t}(),_c=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function wc(e,t=!1){const{host:n,path:s,pass:i,port:r,projectId:a,protocol:o,publicKey:c}=e;return`${o}://${c}${t&&i?`:${i}`:""}@${n}${r?`:${r}`:""}/${s?`${s}/`:s}${a}`}function jc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function kc(e){const t="string"==typeof e?function(e){const t=_c.exec(e);if(!t)return void yc(()=>{});const[n,s,i="",r,a="",o]=t.slice(1);let c="",l=o;const d=l.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),l=d.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return jc({host:r,pass:i,path:c,projectId:l,port:a,protocol:n,publicKey:s})}(e):jc(e);if(t&&function(e){if(!gc)return!0;const{port:t,projectId:n,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(bc.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(s)?t&&isNaN(parseInt(t,10))&&(bc.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(bc.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(bc.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Sc extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Ec(e,t,n){if(!(t in e))return;const s=e[t],i=n(s);"function"==typeof i&&Nc(i,s),e[t]=i}function Tc(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(s){gc&&bc.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Nc(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Tc(e,"__sentry_original__",t)}catch(n){}}function Cc(e){return e.__sentry_original__}function Oc(e){if(zo(e))return{message:e.message,name:e.name,stack:e.stack,...Ic(e)};if(Jo(e)){const t={type:e.type,target:Ac(e.target),currentTarget:Ac(e.currentTarget),...Ic(e)};return"undefined"!=typeof CustomEvent&&Zo(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Ac(e){try{return t=e,"undefined"!=typeof Element&&Zo(t,Element)?hc(e):Object.prototype.toString.call(e)}catch(n){return"<unknown>"}var t}function Ic(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Pc(e){return Rc(e,new Map)}function Rc(e,t){if(function(e){if(!Ko(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(so){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const s={};t.set(e,s);for(const i of Object.keys(e))void 0!==e[i]&&(s[i]=Rc(e[i],t));return s}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const s=[];return t.set(e,s),e.forEach(e=>{s.push(Rc(e,t))}),s}return e}const $c=/\(error: (.*)\)/,Dc=/captureMessage|captureException/;function Lc(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0)=>{const s=[],i=e.split("\n");for(let r=n;r<i.length;r++){const e=i[r];if(e.length>1024)continue;const n=$c.test(e)?e.replace($c,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){s.push(t);break}}if(s.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Dc.test(t[t.length-1].function||"")&&(t.pop(),Dc.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"}))}(s)}}const Mc="<anonymous>";function Uc(e){try{return e&&"function"==typeof e&&e.name||Mc}catch(so){return Mc}}const Fc={},zc={};function qc(e,t){Fc[e]=Fc[e]||[],Fc[e].push(t)}function Bc(e,t){zc[e]||(t(),zc[e]=!0)}function Hc(e,t){const n=e&&Fc[e];if(n)for(const s of n)try{s(t)}catch(so){gc&&bc.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Uc(s)}\nError:`,so)}}function Wc(){"console"in lc&&vc.forEach(function(e){e in lc.console&&Ec(lc.console,e,function(t){return xc[e]=t,function(...t){Hc("console",{args:t,level:e});const n=xc[e];n&&n.apply(lc.console,t)}})})}function Gc(){const e=lc,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(s){}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&n())>>e/4).toString(16))}function Yc(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Kc(e){const{message:t,event_id:n}=e;if(t)return t;const s=Yc(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function Jc(e,t,n){const s=e.exception=e.exception||{},i=s.values=s.values||[],r=i[0]=i[0]||{};r.value||(r.value=t||""),r.type||(r.type="Error")}function Vc(e,t){const n=Yc(e);if(!n)return;const s=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...s,...t},t&&"data"in t){const e={...s&&s.data,...t.data};n.mechanism.data=e}}function Xc(e){if(e&&e.__sentry_captured__)return!0;try{Tc(e,"__sentry_captured__",!0)}catch(t){}return!1}function Zc(e){return Array.isArray(e)?e:[e]}const Qc=lc;let el,tl,nl;function sl(){if(!Qc.document)return;const e=Hc.bind(null,"dom"),t=il(e,!0);Qc.document.addEventListener("click",t,!1),Qc.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{const n=Qc[t]&&Qc[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ec(n,"addEventListener",function(t){return function(n,s,i){if("click"===n||"keypress"==n)try{const s=this,r=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},a=r[n]=r[n]||{refCount:0};if(!a.handler){const s=il(e);a.handler=s,t.call(this,n,s,i)}a.refCount++}catch(so){}return t.call(this,n,s,i)}}),Ec(n,"removeEventListener",function(e){return function(t,n,s){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},r=i[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,s),r.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(so){}return e.call(this,t,n,s)}}))})}function il(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const s=function(e){try{return e.target}catch(so){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,s))return;Tc(n,"_sentryCaptured",!0),s&&!s._sentryId&&Tc(s,"_sentryId",Gc());const i="keypress"===n.type?"input":n.type;(function(e){if(e.type!==tl)return!1;try{if(!e.target||e.target._sentryId!==nl)return!1}catch(so){}return!0})(n)||(e({event:n,name:i,global:t}),tl=n.type,nl=s?s._sentryId:void 0),clearTimeout(el),el=Qc.setTimeout(()=>{nl=void 0,tl=void 0},1e3)}}const rl=dc();function al(){if(!("fetch"in rl))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(so){return!1}}function ol(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function cl(e){const t="fetch";qc(t,e),Bc(t,ll)}function ll(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!al())return!1;if(ol(rl.fetch))return!0;let e=!1;const t=rl.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ol(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){gc&&bc.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e})()&&Ec(lc,"fetch",function(e){return function(...t){const{method:n,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:ul(t),method:dl(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:ul(t),method:dl(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:s},startTimestamp:Date.now()};return Hc("fetch",{...i}),e.apply(lc,t).then(e=>(Hc("fetch",{...i,endTimestamp:Date.now(),response:e}),e),e=>{throw Hc("fetch",{...i,endTimestamp:Date.now(),error:e}),e})}})}function dl(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ul(e){return"string"==typeof e?e:e?dl(e,"url")?e.url:e.toString?e.toString():"":""}let pl=null;function hl(e){const t="error";qc(t,e),Bc(t,ml)}function ml(){pl=lc.onerror,lc.onerror=function(e,t,n,s,i){return Hc("error",{column:s,error:i,line:n,msg:e,url:t}),!(!pl||pl.__SENTRY_LOADER__)&&pl.apply(this,arguments)},lc.onerror.__SENTRY_INSTRUMENTED__=!0}let fl=null;function gl(e){const t="unhandledrejection";qc(t,e),Bc(t,vl)}function vl(){fl=lc.onunhandledrejection,lc.onunhandledrejection=function(e){return Hc("unhandledrejection",e),!(fl&&!fl.__SENTRY_LOADER__)||fl.apply(this,arguments)},lc.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const xl=dc(),yl=lc;let bl;function _l(e){const t="history";qc(t,e),Bc(t,wl)}function wl(){if(!function(){const e=xl.chrome,t=e&&e.app&&e.app.runtime,n="history"in xl&&!!xl.history.pushState&&!!xl.history.replaceState;return!t&&n}())return;const e=yl.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=bl,t=String(n);bl=t,Hc("history",{from:e,to:t})}return e.apply(this,t)}}yl.onpopstate=function(...t){const n=yl.location.href,s=bl;if(bl=n,Hc("history",{from:s,to:n}),e)try{return e.apply(this,t)}catch(i){}},Ec(yl.history,"pushState",t),Ec(yl.history,"replaceState",t)}const jl=lc,kl="__sentry_xhr_v3__";function Sl(e){qc("xhr",e),Bc("xhr",El)}function El(){if(!jl.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Ec(e,"open",function(e){return function(...t){const n=Date.now(),s=Wo(t[0])?t[0].toUpperCase():void 0,i=function(e){if(Wo(e))return e;try{return e.toString()}catch(so){}}(t[1]);if(!s||!i)return e.apply(this,t);this[kl]={method:s,url:i,request_headers:{}},"POST"===s&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const e=this[kl];if(e&&4===this.readyState){try{e.status_code=this.status}catch(so){}Hc("xhr",{args:[s,i],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Ec(this,"onreadystatechange",function(e){return function(...t){return r(),e.apply(this,t)}}):this.addEventListener("readystatechange",r),Ec(this,"setRequestHeader",function(e){return function(...t){const[n,s]=t,i=this[kl];return i&&Wo(n)&&Wo(s)&&(i.request_headers[n.toLowerCase()]=s),e.apply(this,t)}}),e.apply(this,t)}}),Ec(e,"send",function(e){return function(...t){const n=this[kl];return n?(void 0!==t[0]&&(n.body=t[0]),Hc("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}})}function Tl(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Nl(e,t){return e.require(t)}function Cl(e,t=100,n=1/0){try{return Al("",e,t,n)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function Ol(e,t=3,n=102400){const s=Cl(e,t);return i=s,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?Ol(e,t-1,n):s;var i}function Al(e,t,n=1/0,s=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[r,a]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&!Xo(t))return t;const o=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Qo(t))return"[VueViewModel]";if(Ko(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Uc(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const s=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}var n}(e,t);if(!o.startsWith("[object "))return o;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return o.replace("object ","");if(r(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Al("",l.toJSON(),c-1,s,i)}catch(h){}const d=Array.isArray(t)?[]:{};let u=0;const p=Oc(t);for(const m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(u>=s){d[m]="[MaxProperties ~]";break}const e=p[m];d[m]=Al(m,e,c-1,s,i),u++}return a(t),d}var Il,Pl;function Rl(e){return new Dl(t=>{t(e)})}function $l(e){return new Dl((t,n)=>{n(e)})}(Pl=Il||(Il={}))[Pl.PENDING=0]="PENDING",Pl[Pl.RESOLVED=1]="RESOLVED",Pl[Pl.REJECTED=2]="REJECTED";class Dl{constructor(e){Dl.prototype.__init.call(this),Dl.prototype.__init2.call(this),Dl.prototype.__init3.call(this),Dl.prototype.__init4.call(this),this._state=Il.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(so){this._reject(so)}}then(e,t){return new Dl((n,s)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(so){s(so)}else n(t)},e=>{if(t)try{n(t(e))}catch(so){s(so)}else s(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new Dl((t,n)=>{let s,i;return this.then(t=>{i=!1,s=t,e&&e()},t=>{i=!0,s=t,e&&e()}).then(()=>{i?n(s):t(s)})})}__init(){this._resolve=e=>{this._setResult(Il.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Il.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Il.PENDING&&(Vo(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Il.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===Il.RESOLVED&&e[1](this._value),this._state===Il.REJECTED&&e[2](this._value),e[0]=!0)})}}}function Ll(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return $l(new Sc("Not adding Promise because buffer limit was reached."));const i=s();return-1===t.indexOf(i)&&t.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(e){return new Dl((n,s)=>{let i=t.length;if(!i)return n(!0);const r=setTimeout(()=>{e&&e>0&&n(!1)},e);t.forEach(e=>{Rl(e).then(()=>{--i||(clearTimeout(r),n(!0))},s)})})}}}function Ml(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:s,relative:t[5]+n+s}}const Ul=["fatal","error","warning","log","info","debug"];function Fl(e){return"warn"===e?"warning":Ul.includes(e)?e:"log"}function zl(){return Date.now()/1e3}const ql=function(){const{performance:e}=lc;if(!e||!e.now)return zl;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),Bl=(()=>{const{performance:e}=lc;if(!e||!e.now)return;const t=36e5,n=e.now(),s=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-s):t,r=i<t,a=e.timing&&e.timing.navigationStart,o="number"==typeof a?Math.abs(a+n-s):t;return r||o<t?i<=o?e.timeOrigin:a:s})(),Hl="baggage",Wl="sentry-",Gl=/^sentry-/;function Yl(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((e,[t,n],s)=>{const i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,r=0===s?i:`${e},${i}`;return r.length>8192?(gc&&bc.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):r},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${Wl}${t}`]=n),e),{}))}function Kl(e){return e.split(",").map(e=>e.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((e,[t,n])=>(e[t]=n,e),{})}const Jl=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Vl(e,t){const n=function(e){if(!e)return;const t=e.match(Jl);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),s=function(e){if(!Wo(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((e,t)=>{const n=Kl(t);for(const s of Object.keys(n))e[s]=n[s];return e},{});else{if(!e)return;t=Kl(e)}const n=Object.entries(t).reduce((e,[t,n])=>(t.match(Gl)&&(e[t.slice(7)]=n),e),{});return Object.keys(n).length>0?n:void 0}(t),{traceId:i,parentSpanId:r,parentSampled:a}=n||{};return n?{traceId:i||Gc(),parentSpanId:r||Gc().substring(16),spanId:Gc().substring(16),sampled:a,dsc:s||{}}:{traceId:i||Gc(),spanId:Gc().substring(16)}}function Xl(e=Gc(),t=Gc().substring(16),n){let s="";return void 0!==n&&(s=n?"-1":"-0"),`${e}-${t}${s}`}function Zl(e,t=[]){return[e,t]}function Ql(e,t){const[n,s]=e;return[n,[...s,t]]}function ed(e,t){const n=e[1];for(const s of n)if(t(s,s[0].type))return!0;return!1}function td(e,t){return(t||new TextEncoder).encode(e)}function nd(e,t){const[n,s]=e;let i=JSON.stringify(n);function r(e){"string"==typeof i?i="string"==typeof e?i+e:[td(i,t),e]:i.push("string"==typeof e?td(e,t):e)}for(const a of s){const[e,t]=a;if(r(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)r(t);else{let e;try{e=JSON.stringify(t)}catch(so){e=JSON.stringify(Cl(t))}r(e)}}return"string"==typeof i?i:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let s=0;for(const i of e)n.set(i,s),s+=i.length;return n}(i)}function sd(e,t){const n="string"==typeof e.data?td(e.data,t):e.data;return[Pc({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const id={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function rd(e){return id[e]}function ad(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function od(e,{statusCode:t,headers:n},s=Date.now()){const i={...e},r=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(r)for(const o of r.trim().split(",")){const[e,t,,,n]=o.split(":",5),r=parseInt(e,10),a=1e3*(isNaN(r)?60:r);if(t)for(const o of t.split(";"))"metric_bucket"===o&&n&&!n.split(";").includes("custom")||(i[o]=s+a);else i.all=s+a}else a?i.all=s+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const s=Date.parse(`${e}`);return isNaN(s)?6e4:s-t}(a,s):429===t&&(i.all=s+6e4);return i}const cd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ld="production";function dd(){return uc("globalEventProcessors",()=>[])}function ud(e){dd().push(e)}function pd(e,t,n,s=0){return new Dl((i,r)=>{const a=e[s];if(null===t||"function"!=typeof a)i(t);else{const o=a({...t},n);cd&&a.id&&null===o&&bc.log(`Event processor "${a.id}" dropped event`),Vo(o)?o.then(t=>pd(e,t,n,s+1).then(i)).then(null,r):pd(e,o,n,s+1).then(i).then(null,r)}})}function hd(e){const t=ql(),n={sid:Gc(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Pc({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&md(n,e),n}function md(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ql(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Gc()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function fd(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),md(e,n)}function gd(e){const{spanId:t,traceId:n}=e.spanContext(),{data:s,op:i,parent_span_id:r,status:a,tags:o,origin:c}=bd(e);return Pc({data:s,op:i,parent_span_id:r,span_id:t,status:a,tags:o,trace_id:n,origin:c})}function vd(e){const{traceId:t,spanId:n}=e.spanContext();return Xl(t,n,_d(e))}function xd(e){return"number"==typeof e?yd(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?yd(e.getTime()):ql()}function yd(e){return e>9999999999?e/1e3:e}function bd(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function _d(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function wd(e,t,n,s,i,r){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Gc(),timestamp:t.timestamp||zl()},l=n.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:n,release:s,dist:i,maxValueLength:r=250}=t;"environment"in e||(e.environment="environment"in t?n:ld),void 0===e.release&&void 0!==s&&(e.release=s),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=ec(e.message,r));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=ec(a.value,r));const o=e.request;o&&o.url&&(o.url=ec(o.url,r))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=lc._sentryDebugIds;if(!n)return;let s;const i=jd.get(t);i?s=i:(s=new Map,jd.set(t,s));const r=Object.keys(n).reduce((e,i)=>{let r;const a=s.get(i);a?r=a:(r=t(i),s.set(i,r));for(let t=r.length-1;t>=0;t--){const s=r[t];if(s.filename){e[s.filename]=n[i];break}}return e},{});try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}catch(so){}}(c,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new zd;return n.update(t),n}(s,n.captureContext);n.mechanism&&Vc(c,n.mechanism);const u=i&&i.getEventProcessors?i.getEventProcessors():[],p=(Fd||(Fd=new zd),Fd).getScopeData();r&&Md(p,r.getScopeData()),d&&Md(p,d.getScopeData());const h=[...n.attachments||[],...p.attachments];return h.length&&(n.attachments=h),Ld(c,p),pd([...u,...dd(),...p.eventProcessors],c,n).then(e=>(e&&function(e){const t={};try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})})}catch(so){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})})}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:Cl(e.data,t,n)}}))},...e.user&&{user:Cl(e.user,t,n)},...e.contexts&&{contexts:Cl(e.contexts,t,n)},...e.extra&&{extra:Cl(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=Cl(e.contexts.trace.data,t,n))),e.spans&&(s.spans=e.spans.map(e=>{const s=bd(e).data;return s&&(e.data=Cl(s,t,n)),e})),s}(e,a,o):e))}const jd=new WeakMap;function kd(e,t){return Jd().captureException(e,void 0)}function Sd(e,t){return Jd().captureEvent(e,t)}function Ed(e,t){Jd().addBreadcrumb(e,t)}function Td(...e){const t=Jd();if(2===e.length){const[n,s]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,s(n))):t.withScope(s)}return t.withScope(e[0])}function Nd(){return Jd().getClient()}function Cd(){return Jd().getScope()}function Od(e){const t=Nd(),n=Vd(),s=Cd(),{release:i,environment:r=ld}=t&&t.getOptions()||{},{userAgent:a}=lc.navigator||{},o=hd({release:i,environment:r,user:s.getUser()||n.getUser(),...a&&{userAgent:a},...e}),c=n.getSession();return c&&"ok"===c.status&&md(c,{status:"exited"}),Ad(),n.setSession(o),s.setSession(o),o}function Ad(){const e=Vd(),t=Cd(),n=t.getSession()||e.getSession();n&&fd(n),Id(),e.setSession(),t.setSession()}function Id(){const e=Vd(),t=Cd(),n=Nd(),s=t.getSession()||e.getSession();s&&n&&n.captureSession&&n.captureSession(s)}function Pd(e=!1){e?Ad():Id()}function Rd(e){return e.transaction}function $d(e,t,n){const s=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:r}=n&&n.getUser()||{},a=Pc({environment:s.environment||ld,release:s.release,user_segment:r,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function Dd(e){const t=Nd();if(!t)return{};const n=$d(bd(e).trace_id||"",t,Cd()),s=Rd(e);if(!s)return n;const i=s&&s._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:r,source:a}=s.metadata;null!=r&&(n.sample_rate=`${r}`);const o=bd(s);return a&&"url"!==a&&(n.transaction=o.description),n.sampled=String(_d(s)),t.emit&&t.emit("createDsc",n),n}function Ld(e,t){const{fingerprint:n,span:s,breadcrumbs:i,sdkProcessingMetadata:r}=t;!function(e,t){const{extra:n,tags:s,user:i,contexts:r,level:a,transactionName:o}=t,c=Pc(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Pc(s);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const d=Pc(i);d&&Object.keys(d).length&&(e.user={...d,...e.user});const u=Pc(r);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts}),a&&(e.level=a),o&&(e.transaction=o)}(e,t),s&&function(e,t){e.contexts={trace:gd(t),...e.contexts};const n=Rd(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Dd(t),...e.sdkProcessingMetadata};const s=bd(n).description;s&&(e.tags={transaction:s,...e.tags})}}(e,s),function(e,t){e.fingerprint=e.fingerprint?Zc(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,r)}function Md(e,t){const{extra:n,tags:s,user:i,contexts:r,level:a,sdkProcessingMetadata:o,breadcrumbs:c,fingerprint:l,eventProcessors:d,attachments:u,propagationContext:p,transactionName:h,span:m}=t;Ud(e,"extra",n),Ud(e,"tags",s),Ud(e,"user",i),Ud(e,"contexts",r),Ud(e,"sdkProcessingMetadata",o),a&&(e.level=a),h&&(e.transactionName=h),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...p}}function Ud(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[t][s]=n[s])}}let Fd;class zd{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=qd()}static clone(e){return e?e.clone():new zd}clone(){const e=new zd;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&md(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof zd){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Ko(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=qd(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const s={timestamp:zl(),...e},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>n?i.slice(-n):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:s,_extra:i,_user:r,_level:a,_fingerprint:o,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:u,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:s,extra:i,user:r,level:a,fingerprint:o||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:d,transactionName:u,span:p}}applyToEvent(e,t={},n=[]){return Ld(e,this.getScopeData()),pd([...n,...dd(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Gc();if(!this._client)return bc.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...t,event_id:n},this),n}captureMessage(e,t,n){const s=n&&n.event_id?n.event_id:Gc();if(!this._client)return bc.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:s},this),s}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Gc();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(bc.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function qd(){return{traceId:Gc(),spanId:Gc().substring(16)}}const Bd="7.120.3",Hd=parseFloat(Bd),Wd=100;class Gd{constructor(e,t,n,s=Hd){let i,r;this._version=s,t?i=t:(i=new zd,i.setClient(e)),n?r=n:(r=new zd,r.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=r}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(so){throw this.popScope(),so}return Vo(n)?n.then(e=>(this.popScope(),e),e=>{throw this.popScope(),e}):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Gc(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...t,event_id:n}),n}captureMessage(e,t,n){const s=this._lastEventId=n&&n.event_id?n.event_id:Gc(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:s}),s}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Gc();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:r=Wd}=s.getOptions&&s.getOptions()||{};if(r<=0)return;const a={timestamp:zl(),...e},o=i?yc(()=>i(a,t)):a;null!==o&&(s.emit&&s.emit("beforeAddBreadcrumb",o,t),n.addBreadcrumb(o,r))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Kd(this);try{e(this)}finally{Kd(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return cd&&bc.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);return cd&&!n&&(this.getClient()?bc.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):bc.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&fd(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:s,environment:i=ld}=n&&n.getOptions()||{},{userAgent:r}=lc.navigator||{},a=hd({release:s,environment:i,user:t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession&&t.getSession();return o&&"ok"===o.status&&md(o,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Yd().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);cd&&bc.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Yd(){return lc.__SENTRY__=lc.__SENTRY__||{extensions:{},hub:void 0},lc}function Kd(e){const t=Yd(),n=Xd(t);return Zd(t,e),n}function Jd(){const e=Yd();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Yd()){var t;return(t=e)&&t.__SENTRY__&&t.__SENTRY__.hub&&!Xd(e).isOlderThan(Hd)||Zd(e,new Gd),Xd(e)}(e)}function Vd(){return Jd().getIsolationScope()}function Xd(e){return uc("hub",()=>new Gd,e)}function Zd(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function Qd(e){return(e||Jd()).getScope().getTransaction()}let eu=!1;function tu(){const e=Qd();if(e){const t="internal_error";cd&&bc.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var nu,su;function iu(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);"unknown_error"!==n&&e.setStatus(n)}function ru(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Nd(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function au(e){if(!ru())return;const t=cu(e),n=Jd(),s=e.scope?e.scope.getSpan():Cd().getSpan();if(e.onlyIfParent&&!s)return;const i=(e.scope||Cd()).clone();return ou(n,{parentSpan:s,spanContext:t,forceTransaction:e.forceTransaction,scope:i})}function ou(e,{parentSpan:t,spanContext:n,forceTransaction:s,scope:i}){if(!ru())return;const r=Vd();let a;if(t&&!s)a=t.startChild(n);else if(t){const s=Dd(t),{traceId:i,spanId:r}=t.spanContext(),o=_d(t);a=e.startTransaction({traceId:i,parentSpanId:r,parentSampled:o,...n,metadata:{dynamicSamplingContext:s,...n.metadata}})}else{const{traceId:t,dsc:s,parentSpanId:o,sampled:c}={...r.getPropagationContext(),...i.getPropagationContext()};a=e.startTransaction({traceId:t,parentSpanId:o,parentSampled:c,...n,metadata:{dynamicSamplingContext:s,...n.metadata}})}return i.setSpan(a),function(e,t,n){e&&(Tc(e,du,n),Tc(e,lu,t))}(a,i,r),a}function cu(e){if(e.startTime){const t={...e};return t.startTimestamp=xd(e.startTime),delete t.startTime,t}return e}tu.tag="sentry_tracingErrorCallback",(su=nu||(nu={})).Ok="ok",su.DeadlineExceeded="deadline_exceeded",su.Unauthenticated="unauthenticated",su.PermissionDenied="permission_denied",su.NotFound="not_found",su.ResourceExhausted="resource_exhausted",su.InvalidArgument="invalid_argument",su.Unimplemented="unimplemented",su.Unavailable="unavailable",su.InternalError="internal_error",su.UnknownError="unknown_error",su.Cancelled="cancelled",su.AlreadyExists="already_exists",su.FailedPrecondition="failed_precondition",su.Aborted="aborted",su.OutOfRange="out_of_range",su.DataLoss="data_loss";const lu="_sentryScope",du="_sentryIsolationScope",uu="sentry.source",pu="sentry.sample_rate",hu="sentry.op",mu="sentry.origin";class fu{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class gu{constructor(e={}){this._traceId=e.traceId||Gc(),this._spanId=e.spanId||Gc().substring(16),this._startTime=e.startTimestamp||ql(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[mu]:e.origin||"manual",[hu]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[hu]}set op(e){this.setAttribute(hu,e)}get origin(){return this._attributes[mu]}set origin(e){this.setAttribute(mu,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new gu({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Rd(this);if(t.transaction=n,cd&&n){const s=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${bd(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;bc.log(s),this._logMessage=s}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return iu(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Rd(this);if(cd&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&bc.log(e.replace("Starting","Finishing"))}this._endTime=xd(e)}toTraceparent(){return vd(this)}toContext(){return Pc({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return gd(this)}getSpanJSON(){return Pc({data:this._getData(),description:this._name,op:this._attributes[hu],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[mu],_metrics_summary:void 0,profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,s=Object.keys(t).length>0;if(n||s)return n&&s?{...e,...t}:n?e:t}}class vu extends gu{constructor(e,t){super(e),this._contexts={},this._hub=t||Jd(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[uu]&&{source:this._attributes[uu]},...this._attributes[pu]&&{sampleRate:this._attributes[pu]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(uu,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new fu(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=xd(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Pc({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Dd(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(cd&&bc.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return cd&&bc.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter(e=>e!==this&&bd(e).timestamp):[];if(this._trimEnd&&n.length>0){const e=n.map(e=>bd(e).timestamp).filter(Boolean);this._endTime=e.reduce((e,t)=>e>t?e:t)}const{scope:s,isolationScope:i}={scope:(r=this)[lu],isolationScope:r[du]};var r;const{metadata:a}=this,{source:o}=a,c={contexts:{...this._contexts,trace:gd(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:s,capturedSpanIsolationScope:i,...Pc({dynamicSamplingContext:Dd(this)})},_metrics_summary:void 0,...o&&{transaction_info:{source:o}}};return Object.keys(this._measurements).length>0&&(cd&&bc.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),cd&&bc.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const xu={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},yu=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class bu extends fu{constructor(e,t,n,s){super(s),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===bd(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class _u extends vu{constructor(e,t,n=xu.idleTimeout,s=xu.finalTimeout,i=xu.heartbeatInterval,r=!1,a=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=r,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=yu[4],this._autoFinishAllowed=!a,r&&(cd&&bc.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=yu[3],this.end())},this._finalTimeout)}end(e){const t=xd(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){cd&&bc.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;bd(e).timestamp||(e.setStatus("cancelled"),e.end(t),cd&&bc.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:s}=bd(e),i=n&&n<t,r=(this._finalTimeout+this._idleTimeout)/1e3,a=s&&n&&s-n<r;if(cd){const t=JSON.stringify(e,void 0,2);i?a||bc.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):bc.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return i&&a}),cd&&bc.log("[Tracing] flushing IdleTransaction")}else cd&&bc.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new bu(t,n,this.spanContext().spanId,e),cd&&bc.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=yu[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(cd&&bc.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=yu[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),cd&&bc.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,cd&&bc.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(cd&&bc.log(`[Tracing] popActivity ${e}`),delete this.activities[e],cd&&bc.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=ql();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=yu[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(cd&&bc.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=yu[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){cd&&bc.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function wu(e,t,n){if(!ru(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(pu,Number(e.sampled)),e;let s;return"function"==typeof t.tracesSampler?(s=t.tracesSampler(n),e.setAttribute(pu,Number(s))):void 0!==n.parentSampled?s=n.parentSampled:void 0!==t.tracesSampleRate?(s=t.tracesSampleRate,e.setAttribute(pu,Number(s))):(s=1,e.setAttribute(pu,s)),ju(s)?s?(e.sampled=Math.random()<s,e.sampled?(cd&&bc.log(`[Tracing] starting ${e.op} transaction - ${bd(e).description}`),e):(cd&&bc.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),e)):(cd&&bc.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(cd&&bc.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function ju(e){return Xo(e)||"number"!=typeof e&&"boolean"!=typeof e?(cd&&bc.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(cd&&bc.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function ku(){const e=this.getScope().getSpan();return e?{"sentry-trace":vd(e)}:{}}function Su(e,t){const n=this.getClient(),s=n&&n.getOptions()||{},i=s.instrumenter||"sentry",r=e.instrumenter||"sentry";i!==r&&(cd&&bc.error(`A transaction was started with instrumenter=\`${r}\`, but the SDK is configured with the \`${i}\` instrumenter.\nThe transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let a=new vu(e,this);return a=wu(a,s,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(s._experiments&&s._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Eu(e,t,n,s,i,r,a,o=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let d=new _u(t,e,n,s,a,i,o);return d=wu(d,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...r}),d.isRecording()&&d.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",d),d}function Tu(){const e=Yd();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Su),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ku),eu||(eu=!0,hl(tu),gl(tu)))}function Nu(e,t,n,s){const i=ad(n),r=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=function(e,t,n,s){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&s&&{dsn:wc(s)},...i&&{trace:Pc({...i})}}}(e,i,s,t);return delete e.sdkProcessingMetadata,Zl(a,[[{type:r},e]])}function Cu(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&");var n}const Ou=[];function Au(e){const t=e.defaultIntegrations||[],n=e.integrations;let s;t.forEach(e=>{e.isDefaultInstance=!0}),s=Array.isArray(n)?[...t,...n]:"function"==typeof n?Zc(n(t)):t;const i=function(e){const t={};return e.forEach(e=>{const{name:n}=e,s=t[n];s&&!s.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.keys(t).map(e=>t[e])}(s),r=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(i,e=>"Debug"===e.name);if(-1!==r){const[e]=i.splice(r,1);i.push(e)}return i}function Iu(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Pu(e,t,n){if(n[t.name])cd&&bc.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Ou.indexOf(t.name)&&(t.setupOnce(ud,Jd),Ou.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,s)=>n(t,s,e))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),s=Object.assign((t,s)=>n(t,s,e),{id:t.name});e.addEventProcessor(s)}cd&&bc.log(`Integration installed: ${t.name}`)}}function Ru(e,t){return Object.assign(function(...e){return t(...e)},{id:e})}function $u(e,t,n,s){const i={sent_at:(new Date).toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),s&&t&&(i.dsn=wc(t));const r=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),s=e.length>0?`|#${e.map(([e,t])=>`${e}:${t}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Zl(i,[r])}const Du="Not capturing exception because it's already been captured.";class Lu{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=kc(e.dsn):cd&&bc.warn("No DSN provided, client will not send events."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,s="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${Cu(e,s)}`}(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Xc(e))return void(cd&&bc.log(Du));let s=t&&t.event_id;return this._process(this.eventFromException(e,t).then(e=>this._captureEvent(e,t,n)).then(e=>{s=e})),s}captureMessage(e,t,n,s){let i=n&&n.event_id;const r=Go(e)?e:String(e),a=Yo(e)?this.eventFromMessage(r,t,n):this.eventFromException(e,n);return this._process(a.then(e=>this._captureEvent(e,n,s)).then(e=>{i=e})),i}captureEvent(e,t,n){if(t&&t.originalException&&Xc(t.originalException))return void(cd&&bc.log(Du));let s=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||n).then(e=>{s=e})),s}captureSession(e){"string"!=typeof e.release?cd&&bc.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),md(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then(n=>t.flush(e).then(e=>n&&e))):Rl(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return cd&&bc.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Pu(this,e,this._integrations),t||Iu(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Nu(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of t.attachments||[])n=Ql(n,sd(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(n);s&&s.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const t=function(e,t,n,s){const i=ad(n);return Zl({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!s&&t&&{dsn:wc(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const s="number"==typeof n?n:1,i=`${e}:${t}`;cd&&bc.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}captureAggregateMetrics(e){cd&&bc.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=$u(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach(e=>e(...t))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach(t=>{t&&Pu(e,t,n)}),n}(this,e),Iu(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,s=!1;const i=t.exception&&t.exception.values;if(i){s=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const r="ok"===e.status;(r&&0===e.errors||r&&n)&&(md(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Dl(t=>{let n=0;const s=setInterval(()=>{0==this._numProcessing?(clearInterval(s),t(!0)):(n+=1,e&&n>=e&&(clearInterval(s),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,s=Vd()){const i=this.getOptions(),r=Object.keys(this._integrations);return!t.integrations&&r.length>0&&(t.integrations=r),this.emit("preprocessEvent",e,t),wd(i,e,t,n,this,s).then(e=>{if(null===e)return e;const t={...s.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:s,spanId:i,parentSpanId:r,dsc:a}=t;e.contexts={trace:{trace_id:s,span_id:i,parent_span_id:r},...e.contexts};const o=a||$d(s,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:o,...e.sdkProcessingMetadata}}return e})}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then(e=>e.event_id,e=>{if(cd){const t=e;"log"===t.logLevel?bc.log(t.message):bc.warn(t)}})}_processEvent(e,t,n){const s=this.getOptions(),{sampleRate:i}=s,r=Uu(e),a=Mu(e),o=e.type||"error",c=`before send for type \`${o}\``;if(a&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),$l(new Sc(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l="replay_event"===o?"replay":o,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then(n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new Sc("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n){const{beforeSend:s,beforeSendTransaction:i}=e;if(Mu(t)&&s)return s(t,n);if(Uu(t)&&i){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(t,n)}return t}(s,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Vo(e))return e.then(e=>{if(!Ko(e)&&null!==e)throw new Sc(n);return e},e=>{throw new Sc(`${t} rejected with ${e}`)});if(!Ko(e)&&null!==e)throw new Sc(n);return e}(i,c)}).then(s=>{if(null===s){if(this.recordDroppedEvent("before_send",l,e),r){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Sc(`${c} returned \`null\`, will not send event.`,"log")}const i=n&&n.getSession();if(!r&&i&&this._updateSessionFromEvent(i,s),r){const e=(s.sdkProcessingMetadata&&s.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=s.transaction_info;if(r&&a&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...a,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{if(e instanceof Sc)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Sc(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,e=>{cd&&bc.error("Error while sending event:",e)});cd&&bc.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{const[n,s]=t.split(":");return{reason:n,category:s,quantity:e[t]}})}}function Mu(e){return void 0===e.type}function Uu(e){return"transaction"===e.type}function Fu(e,t){!0===t.debug&&(cd?bc.enable():yc(()=>{})),Cd().update(t.initialScope);const n=new e(t);!function(e){const t=Jd().getStackTop();t.client=e,t.scope.setClient(e)}(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}function zu(e,t,n=Ll(e.bufferSize||30)){let s={};function i(i){const r=[];if(ed(i,(t,n)=>{const i=rd(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(s,i)){const s=qu(t,n);e.recordDroppedEvent("ratelimit_backoff",i,s)}else r.push(t)}),0===r.length)return Rl();const a=Zl(i[0],r),o=t=>{ed(a,(n,s)=>{const i=qu(n,s);e.recordDroppedEvent(t,rd(s),i)})};return n.add(()=>t({body:nd(a,e.textEncoder)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&cd&&bc.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=od(s,e),e),e=>{throw o("network_error"),e})).then(e=>e,e=>{if(e instanceof Sc)return cd&&bc.error("Skipped sending event because buffer is full."),o("queue_overflow"),Rl();throw e})}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>n.drain(e)}}function qu(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function Bu(e){return[{type:"span"},e]}function Hu(e,t,n=[t],s="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${s}:@sentry/${e}`,version:Bd})),version:Bd}),e._metadata=i}const Wu=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Gu=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Yu="InboundFilters",Ku=(e={})=>({name:Yu,setupOnce(){},processEvent(t,n,s){const i=s.getOptions(),r=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Wu],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Gu],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(so){}return!1}(e)?(cd&&bc.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Kc(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(so){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),cd&&0===t.length&&bc.error(`Could not extract message for event ${Kc(e)}`),t}(e).some(e=>sc(e,t))}(e,t.ignoreErrors)?(cd&&bc.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Kc(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&sc(n,t)}(e,t.ignoreTransactions)?(cd&&bc.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Kc(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=Ju(e);return!!n&&sc(n,t)}(e,t.denyUrls)?(cd&&bc.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Kc(e)}.\nUrl: ${Ju(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=Ju(e);return!n||sc(n,t)}(e,t.allowUrls)&&(cd&&bc.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Kc(e)}.\nUrl: ${Ju(e)}`),!0)}(t,r)?null:t}});function Ju(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(so){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return cd&&bc.error(`Cannot extract url for event ${Kc(e)}`),null}}let Vu;Ru(Yu,Ku);const Xu="FunctionToString",Zu=new WeakMap,Qu=()=>({name:Xu,setupOnce(){Vu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Cc(this),n=Zu.has(Nd())&&void 0!==t?t:this;return Vu.apply(n,e)}}catch(so){}},setup(e){Zu.set(e,!0)}});Ru(Xu,Qu);const ep="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,tp=lc,np=(e,t,n)=>{let s,i;return r=>{t.value>=0&&(r||n)&&(i=t.value-(s||0),(i||void 0===s)&&(s=t.value,t.delta=i,e(t)))}},sp=()=>tp.__WEB_VITALS_POLYFILL__?tp.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=tp.performance.timing,t=tp.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const s in e)"navigationStart"!==s&&"toJSON"!==s&&(n[s]=Math.max(e[s]-e.navigationStart,0));return n})()):tp.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ip=()=>{const e=sp();return e&&e.activationStart||0},rp=(e,t)=>{const n=sp();let s="navigate";return n&&(s=tp.document&&tp.document.prerendering||ip()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},ap=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(e=>{t(e.getEntries())});return s.observe(Object.assign({type:e,buffered:!0},n||{})),s}}catch(so){}},op=(e,t)=>{const n=s=>{"pagehide"!==s.type&&"hidden"!==tp.document.visibilityState||(e(s),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};tp.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let cp=-1;const lp=()=>(cp<0&&(tp.document&&tp.document.visibilityState&&(cp="hidden"!==tp.document.visibilityState||tp.document.prerendering?1/0:0),op(({timeStamp:e})=>{cp=e},!0)),{get firstHiddenTime(){return cp}});let dp=0,up=1/0,pp=0;const hp=e=>{e.forEach(e=>{e.interactionId&&(up=Math.min(up,e.interactionId),pp=Math.max(pp,e.interactionId),dp=pp?(pp-up)/7+1:0)})};let mp;const fp=()=>mp?dp:performance.interactionCount||0,gp=[],vp={},xp=e=>{const t=gp[gp.length-1],n=vp[e.interactionId];if(n||gp.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};vp[t.id]=t,gp.push(t)}gp.sort((e,t)=>t.latency-e.latency),gp.splice(10).forEach(e=>{delete vp[e.id]})}},yp=(e,t)=>{t=t||{},"interactionCount"in performance||mp||(mp=ap("event",hp,{type:"event",buffered:!0,durationThreshold:0}));const n=rp("INP");let s;const i=e=>{e.forEach(e=>{e.interactionId&&xp(e),"first-input"===e.entryType&&!gp.some(t=>t.entries.some(t=>e.duration===t.duration&&e.startTime===t.startTime))&&xp(e)});const t=(()=>{const e=Math.min(gp.length-1,Math.floor(fp()/50));return gp[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,s())},r=ap("event",i,{durationThreshold:t.durationThreshold||40});s=np(e,n,t.reportAllChanges),r&&(r.observe({type:"first-input",buffered:!0}),op(()=>{i(r.takeRecords()),n.value<0&&fp()>0&&(n.value=0,n.entries=[]),s(!0)}))},bp={},_p=e=>{tp.document&&(tp.document.prerendering?addEventListener("prerenderingchange",()=>_p(e),!0):"complete"!==tp.document.readyState?addEventListener("load",()=>_p(e),!0):setTimeout(e,0))},wp={},jp={};let kp,Sp,Ep,Tp,Np;function Cp(e,t){return Lp(e,t),jp[e]||(function(e){const t={};"event"===e&&(t.durationThreshold=0),ap(e,t=>{Op(e,{entries:t})},t)}(e),jp[e]=!0),Mp(e,t)}function Op(e,t){const n=wp[e];if(n&&n.length)for(const s of n)try{s(t)}catch(so){ep&&bc.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Uc(s)}\nError:`,so)}}function Ap(){return((e,t={})=>{const n=rp("CLS",0);let s,i=0,r=[];const a=e=>{e.forEach(e=>{if(!e.hadRecentInput){const t=r[0],a=r[r.length-1];i&&0!==r.length&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,r.push(e)):(i=e.value,r=[e]),i>n.value&&(n.value=i,n.entries=r,s&&s())}})},o=ap("layout-shift",a);if(o){s=np(e,n,t.reportAllChanges);const i=()=>{a(o.takeRecords()),s(!0)};return op(i),i}})(e=>{Op("cls",{metric:e}),kp=e},{reportAllChanges:!0})}function Ip(){return(e=>{const t=lp(),n=rp("FID");let s;const i=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),s(!0))},r=e=>{e.forEach(i)},a=ap("first-input",r);s=np(e,n),a&&op(()=>{r(a.takeRecords()),a.disconnect()},!0)})(e=>{Op("fid",{metric:e}),Sp=e})}function Pp(){return(e=>{const t=lp(),n=rp("LCP");let s;const i=e=>{const i=e[e.length-1];if(i){const e=Math.max(i.startTime-ip(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[i],s())}},r=ap("largest-contentful-paint",i);if(r){s=np(e,n);const t=()=>{bp[n.id]||(i(r.takeRecords()),r.disconnect(),bp[n.id]=!0,s(!0))};return["keydown","click"].forEach(e=>{tp.document&&addEventListener(e,t,{once:!0,capture:!0})}),op(t,!0),t}})(e=>{Op("lcp",{metric:e}),Ep=e})}function Rp(){return((e,t)=>{t=t||{};const n=rp("TTFB"),s=np(e,n,t.reportAllChanges);_p(()=>{const e=sp();if(e){if(n.value=Math.max(e.responseStart-ip(),0),n.value<0||n.value>performance.now())return;n.entries=[e],s(!0)}})})(e=>{Op("ttfb",{metric:e}),Tp=e})}function $p(){return yp(e=>{Op("inp",{metric:e}),Np=e})}function Dp(e,t,n,s,i=!1){let r;return Lp(e,t),jp[e]||(r=n(),jp[e]=!0),s&&t({metric:s}),Mp(e,t,i?r:void 0)}function Lp(e,t){wp[e]=wp[e]||[],wp[e].push(t)}function Mp(e,t,n){return()=>{n&&n();const s=wp[e];if(!s)return;const i=s.indexOf(t);-1!==i&&s.splice(i,1)}}function Up(e){return"number"==typeof e&&isFinite(e)}function Fp(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function zp(e){return e/1e3}function qp(){return tp&&tp.addEventListener&&tp.performance}let Bp,Hp,Wp=0,Gp={};function Yp(){const e=qp();if(e&&Bl){e.mark&&tp.performance.mark("sentry-tracing-init");const t=Dp("fid",({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=zp(Bl),s=zp(t.startTime);ep&&bc.log("[Measurements] Adding FID"),Gp.fid={value:e.value,unit:"millisecond"},Gp["mark.fid"]={value:n+s,unit:"second"}},Ip,Sp),n=function(e,t=!1){return Dp("cls",e,Ap,kp,t)}(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ep&&bc.log("[Measurements] Adding CLS"),Gp.cls={value:e.value,unit:""},Hp=t)},!0),s=function(e,t=!1){return Dp("lcp",e,Pp,Ep,t)}(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ep&&bc.log("[Measurements] Adding LCP"),Gp.lcp={value:e.value,unit:"millisecond"},Bp=t)},!0),i=function(e){return Dp("ttfb",e,Rp,Tp)}(({metric:e})=>{e.entries[e.entries.length-1]&&(ep&&bc.log("[Measurements] Adding TTFB"),Gp.ttfb={value:e.value,unit:"millisecond"})});return()=>{t(),n(),s(),i()}}return()=>{}}function Kp(e,t){if(qp()&&Bl){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const s=n.entries.find(e=>e.duration===n.value&&void 0!==Jp[e.name]),i=Nd();if(!s||!i)return;const r=Jp[s.name],a=i.getOptions(),o=zp(Bl+s.startTime),c=zp(n.value),l=void 0!==s.interactionId?e[s.interactionId]:void 0;if(void 0===l)return;const{routeName:d,parentContext:u,activeTransaction:p,user:h,replayId:m}=l,f=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,v=new gu({startTimestamp:o,endTimestamp:o+c,op:`ui.interaction.${r}`,name:hc(s.target),attributes:{release:a.release,environment:a.environment,transaction:d,...void 0!==f&&""!==f?{user:f}:{},...void 0!==g?{profile_id:g}:{},...void 0!==m?{replay_id:m}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),x=function(e,t,n){if(!ru(t))return!1;let s;return s=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:tp.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,ju(s)?!0===s?n:!1===s?0:s*n:(ep&&bc.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(u,a,t);if(x&&Math.random()<x){const e=v?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=wc(t)),Zl(n,e.map(Bu))}([v],i.getDsn()):void 0,t=i&&i.getTransport();return void(t&&e&&t.send(e).then(null,e=>{ep&&bc.error("Error while sending interaction:",e)}))}},Dp("inp",n,$p,Np);var n}(e,t);return()=>{n()}}return()=>{}}const Jp={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Vp(e){const t=qp();if(!t||!tp.performance.getEntries||!Bl)return;ep&&bc.log("[Tracing] Adding & adjusting spans using Performance API");const n=zp(Bl),s=t.getEntries(),{op:i,start_timestamp:r}=bd(e);if(s.slice(Wp).forEach(t=>{const s=zp(t.startTime),i=zp(t.duration);if(!("navigation"===e.op&&r&&n+s<r))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(s=>{Xp(e,t,s,n)}),Xp(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Xp(e,t,"fetch",n,"cache","domainLookupStart"),Xp(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Fp(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+zp(t.requestStart),endTimestamp:n+zp(t.responseEnd)}),Fp(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+zp(t.responseStart),endTimestamp:n+zp(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,s,i){const r=i+n,a=r+s;Fp(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:r})}(e,t,s,i,n);const r=lp(),a=t.startTime<r.firstHiddenTime;"first-paint"===t.name&&a&&(ep&&bc.log("[Measurements] Adding FP"),Gp.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(ep&&bc.log("[Measurements] Adding FCP"),Gp.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,s,i,r){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=Ml(n),o={};Zp(o,t,"transferSize","http.response_transfer_size"),Zp(o,t,"encodedBodySize","http.response_content_length"),Zp(o,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus),a.protocol&&(o["url.scheme"]=a.protocol.split(":").pop()),a.host&&(o["server.address"]=a.host),o["url.same_origin"]=n.includes(tp.location.origin);const c=r+s,l=c+i;Fp(e,{description:n.replace(tp.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:o})}(e,t,t.name,s,i,n)}}),Wp=Math.max(s.length-1,0),function(e){const t=tp.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Up(n.rtt)&&(Gp["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Up(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Up(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===i){!function(e){const t=sp();if(!t)return;const{responseStart:n,requestStart:s}=t;s<=n&&(ep&&bc.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-s,unit:"millisecond"})}(Gp),["fcp","fp","lcp"].forEach(e=>{if(!Gp[e]||!r||n>=r)return;const t=Gp[e].value,s=n+zp(t),i=Math.abs(1e3*(s-r)),a=i-t;ep&&bc.log(`[Measurements] Normalized ${e} from ${t} to ${i} (${a})`),Gp[e].value=i});const t=Gp["mark.fid"];t&&Gp.fid&&(Fp(e,{description:"first input delay",endTimestamp:t.value+zp(Gp.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Gp["mark.fid"]),"fcp"in Gp||delete Gp.cls,Object.keys(Gp).forEach(e=>{!function(e,t,n){const s=Qd();s&&s.setMeasurement(e,t,n)}(e,Gp[e].value,Gp[e].unit)}),function(e){Bp&&(ep&&bc.log("[Measurements] Adding LCP Data"),Bp.element&&e.setTag("lcp.element",hc(Bp.element)),Bp.id&&e.setTag("lcp.id",Bp.id),Bp.url&&e.setTag("lcp.url",Bp.url.trim().slice(0,200)),e.setTag("lcp.size",Bp.size)),Hp&&Hp.sources&&(ep&&bc.log("[Measurements] Adding CLS Data"),Hp.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,hc(t.node))))}(e)}Bp=void 0,Hp=void 0,Gp={}}function Xp(e,t,n,s,i,r){const a=r?t[r]:t[`${n}End`],o=t[`${n}Start`];o&&a&&Fp(e,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:s+zp(o),endTimestamp:s+zp(a)})}function Zp(e,t,n,s){const i=t[n];null!=i&&i<2147483647&&(e[s]=i)}function Qp(e,t,n,s,i="auto.http.browser"){if(!ru()||!e.fetchData)return;const r=t(e.fetchData.url);if(e.endTimestamp&&r){const t=e.fetchData.__span;if(!t)return;const n=s[t];return void(n&&(function(e,t){if(t.response){iu(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete s[t]))}const a=Cd(),o=Nd(),{method:c,url:l}=e.fetchData,d=function(e){try{return new URL(e).href}catch(so){return}}(l),u=d?Ml(d).host:void 0,p=r?au({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":d,"server.address":u,[mu]:i},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,s[p.spanContext().spanId]=p),n(e.fetchData.url)&&o){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,s,i){const r=i||n.getSpan(),a=Vd(),{traceId:o,spanId:c,sampled:l,dsc:d}={...a.getPropagationContext(),...n.getPropagationContext()},u=r?vd(r):Xl(o,c,l),p=Yl(d||(r?Dd(r):$d(o,t,n))),h=s.headers||("undefined"!=typeof Request&&Zo(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&Zo(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",u),p&&e.append(Hl,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",u]];return p&&e.push([Hl,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":u,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":u,baggage:p}}(t,o,a,n,p)}return p}const eh=["localhost",/^\/(?!\/)/],th={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:eh,tracePropagationTargets:eh};function nh(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:s,tracingOrigins:i,shouldCreateSpanForRequest:r,enableHTTPTimings:a}={traceFetch:th.traceFetch,traceXHR:th.traceXHR,...e},o="function"==typeof r?r:e=>!0,c=e=>function(e,t){return sc(e,t||eh)}(e,s||i),l={};t&&cl(e=>{const t=Qp(e,o,c,l);if(t){const n=rh(e.fetchData.url),s=n?Ml(n).host:void 0;t.setAttributes({"http.url":n,"server.address":s})}a&&t&&sh(t)}),n&&Sl(e=>{const t=function(e,t,n,s){const i=e.xhr,r=i&&i[kl];if(!ru()||!i||i.__sentry_own_request__||!r)return;const a=t(r.url);if(e.endTimestamp&&a){const e=i.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&void 0!==r.status_code&&(iu(t,r.status_code),t.end(),delete s[e]))}const o=Cd(),c=Vd(),l=rh(r.url),d=l?Ml(l).host:void 0,u=a?au({name:`${r.method} ${r.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":r.method,"http.url":l,url:r.url,"server.address":d,[mu]:"auto.http.browser"},op:"http.client"}):void 0;u&&(i.__sentry_xhr_span_id__=u.spanContext().spanId,s[i.__sentry_xhr_span_id__]=u);const p=Nd();if(i.setRequestHeader&&n(r.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:s}={...c.getPropagationContext(),...o.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Hl,n)}catch(s){}}(i,u?vd(u):Xl(e,t,n),Yl(s||(u?Dd(u):$d(e,p,o))))}return u}(e,o,c,l);a&&t&&sh(t)})}function sh(e){const{url:t}=bd(e).data||{};if(!t||"string"!=typeof t)return;const n=Cp("resource",({entries:s})=>{s.forEach(s=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(s)&&s.name.endsWith(t)&&(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",s="";for(const i of e){if("/"===i){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t="h"===s?"http":s,n=e.split(s)[1];break}s+=i}return s===e&&(t=s),{name:t,version:n}}(e.nextHopProtocol),s=[];return s.push(["network.protocol.version",n],["network.protocol.name",t]),Bl?[...s,["http.request.redirect_start",ih(e.redirectStart)],["http.request.fetch_start",ih(e.fetchStart)],["http.request.domain_lookup_start",ih(e.domainLookupStart)],["http.request.domain_lookup_end",ih(e.domainLookupEnd)],["http.request.connect_start",ih(e.connectStart)],["http.request.secure_connection_start",ih(e.secureConnectionStart)],["http.request.connection_end",ih(e.connectEnd)],["http.request.request_start",ih(e.requestStart)],["http.request.response_start",ih(e.responseStart)],["http.request.response_end",ih(e.responseEnd)]]:s}(s).forEach(t=>e.setAttribute(...t)),setTimeout(n))})})}function ih(e=0){return((Bl||performance.timeOrigin)+e)/1e3}function rh(e){try{return new URL(e,tp.location.origin).href}catch(so){return}}const ah={...xu,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!tp||!tp.location)return void(ep&&bc.warn("Could not initialize routing instrumentation due to invalid location"));let s,i=tp.location.href;t&&(s=e({name:tp.location.pathname,startTimestamp:Bl?Bl/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&_l(({to:t,from:n})=>{void 0===n&&i&&-1!==i.indexOf(t)?i=void 0:n!==t&&(i=void 0,s&&(ep&&bc.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=e({name:tp.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...th};function oh(e){const t=(n=`meta[name=${e}]`,pc.document&&pc.document.querySelector?pc.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}function ch(e){const t=e.attributes&&e.attributes[uu],n=e.data&&e.data[uu],s=e.metadata&&e.metadata.source;return t||n||s}function lh(){const e=Yd();if(!e.__SENTRY__)return;const n={mongodb:()=>new(Nl(t,"./node/integrations/mongo").Mongo),mongoose:()=>new(Nl(t,"./node/integrations/mongo").Mongo),mysql:()=>new(Nl(t,"./node/integrations/mysql").Mysql),pg:()=>new(Nl(t,"./node/integrations/postgres").Postgres)},s=Object.keys(n).filter(e=>!!function(e){let n;try{n=Nl(t,e)}catch(so){}try{const{cwd:s}=Nl(t,"process");n=Nl(t,`${s()}/node_modules/${e}`)}catch(so){}return n}(e)).map(e=>{try{return n[e]()}catch(so){return}}).filter(e=>e);s.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...s])}const dh=lc;let uh=0;function ph(){return uh>0}function hh(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(Cc(e))return e}catch(so){return e}const s=function(){const n=Array.prototype.slice.call(arguments);try{const s=n.map(e=>hh(e,t));return e.apply(this,s)}catch(s){throw uh++,setTimeout(()=>{uh--}),Td(e=>{e.addEventProcessor(e=>(t.mechanism&&(Jc(e,void 0),Vc(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),kd(s)}),s}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}catch(i){}Nc(s,e),Tc(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>e.name})}catch(i){}return s}const mh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function fh(e,t){const n=vh(e,t),s={type:t&&t.name,value:yh(t)};return n.length&&(s.stacktrace={frames:n}),void 0===s.type&&""===s.value&&(s.value="Unrecoverable error caught"),s}function gh(e,t){return{exception:{values:[fh(e,t)]}}}function vh(e,t){const n=t.stacktrace||t.stack||"",s=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(xh.test(e.message))return 1}return 0}(t);try{return e(n,s)}catch(so){}return[]}const xh=/Minified React error #\d+;/i;function yh(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function bh(e,t,n,s,i){let r;if(Bo(t)&&t.error)return gh(e,t.error);if(Ho(t)||qo(t,"DOMException")){const i=t;if("stack"in t)r=gh(e,t);else{const t=i.name||(Ho(i)?"DOMError":"DOMException"),a=i.message?`${t}: ${i.message}`:t;r=_h(e,a,n,s),Jc(r,a)}return"code"in i&&(r.tags={...r.tags,"DOMException.code":`${i.code}`}),r}return zo(t)?gh(e,t):Ko(t)||Jo(t)?(r=function(e,t,n,s){const i=Nd(),r=i&&i.getOptions().normalizeDepth,a={exception:{values:[{type:Jo(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:wh(t,{isUnhandledRejection:s})}]},extra:{__serialized__:Ol(t,r)}};if(n){const t=vh(e,n);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,n,i),Vc(r,{synthetic:!0}),r):(r=_h(e,t,n,s),Jc(r,`${t}`),Vc(r,{synthetic:!0}),r)}function _h(e,t,n,s){const i={};if(s&&n){const s=vh(e,n);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(Go(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function wh(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Oc(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return ec(n[0],t);for(let s=n.length;s>0;s--){const e=n.slice(0,s).join(", ");if(!(e.length>t))return s===n.length?e:ec(e,t)}return""}(e),s=t?"promise rejection":"exception";return Bo(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:Jo(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(so){}}(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${n}`}class jh extends Lu{constructor(e){Hu(e,"browser",["browser"],dh.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&dh.document&&dh.document.addEventListener("visibilitychange",()=>{"hidden"===dh.document.visibilityState&&this._flushOutcomes()})}eventFromException(e,t){return function(e,t,n,s){const i=bh(e,t,n&&n.syntheticException||void 0,s);return Vc(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Rl(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",s,i){const r=_h(e,t,s&&s.syntheticException||void 0,i);return r.level=n,s&&s.event_id&&(r.event_id=s.event_id),Rl(r)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(mh&&bc.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:s}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!s&&{dsn:wc(s)}},r=function(e){return[{type:"user_report"},e]}(e);return Zl(i,[r])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(mh&&bc.log("No outcomes to send"));if(!this._dsn)return void(mh&&bc.log("No dsn provided, will not send outcomes"));mh&&bc.log("Sending outcomes:",e);const t=(n=e,Zl((s=this._options.tunnel&&wc(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:zl(),discarded_events:n}]]));var n,s;this._sendEnvelope(t)}}let kh;function Sh(e,t=function(){if(kh)return kh;if(ol(dh.fetch))return kh=dh.fetch.bind(dh);const e=dh.document;let t=dh.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const s=n.contentWindow;s&&s.fetch&&(t=s.fetch),e.head.removeChild(n)}catch(so){mh&&bc.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",so)}return kh=t.bind(dh)}()){let n=0,s=0;return zu(e,function(i){const r=i.body.length;n+=r,s++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};try{return t(e.url,a).then(e=>(n-=r,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(so){return kh=void 0,n-=r,s--,$l(so)}})}function Eh(e){return zu(e,function(t){return new Dl((n,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{4===i.readyState&&n({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&i.setRequestHeader(t,e.headers[t]);i.send(t.body)})})}const Th="?";function Nh(e,t,n,s){const i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==s&&(i.colno=s),i}const Ch=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Oh=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ah=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ih=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ph=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Rh=Lc([30,e=>{const t=Ch.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Oh.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=$h(t[1]||Th,t[2]);return Nh(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Ah.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Ih.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Th;return[n,e]=$h(n,e),Nh(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Ph.exec(e);return t?Nh(t[2],t[1]||Th,+t[3],t[4]?+t[4]:void 0):void 0}]),$h=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),s=-1!==e.indexOf("safari-web-extension");return n||s?[-1!==e.indexOf("@")?e.split("@")[0]:Th,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Dh=1024,Lh="Breadcrumbs",Mh=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Lh,setupOnce(){},setup(e){var n;t.console&&function(e){const t="console";qc(t,e),Bc(t,Wc)}(function(e){return function(t){if(Nd()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Fl(t.level),message:tc(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${tc(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Ed(n,{input:t.args,level:t.level})}}(e)),t.dom&&(n=function(e,t){return function(n){if(Nd()!==e)return;let s,i,r="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>Dh&&(mh&&bc.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=Dh),"string"==typeof r&&(r=[r]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;s=hc(t,{keyAttrs:r,maxStringLength:a}),i=fc(t)}catch(so){s="<unknown>"}if(0===s.length)return;const o={category:`ui.${n.name}`,message:s};i&&(o.data={"ui.component_name":i}),Ed(o,{event:n.event,name:n.name,global:n.global})}}(e,t.dom),qc("dom",n),Bc("dom",sl)),t.xhr&&Sl(function(e){return function(t){if(Nd()!==e)return;const{startTimestamp:n,endTimestamp:s}=t,i=t.xhr[kl];if(!n||!s||!i)return;const{method:r,url:a,status_code:o,body:c}=i;Ed({category:"xhr",data:{method:r,url:a,status_code:o},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:s})}}(e)),t.fetch&&cl(function(e){return function(t){if(Nd()!==e)return;const{startTimestamp:n,endTimestamp:s}=t;if(s&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Ed({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:s});else{const e=t.response;Ed({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:s})}}}(e)),t.history&&_l(function(e){return function(t){if(Nd()!==e)return;let n=t.from,s=t.to;const i=Ml(dh.location.href);let r=n?Ml(n):void 0;const a=Ml(s);r&&r.path||(r=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===r.protocol&&i.host===r.host&&(n=r.relative),Ed({category:"navigation",data:{from:n,to:s}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Nd()===e&&Ed({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Kc(t)},{event:t})}}(e))}}};Ru(Lh,Mh);const Uh="Dedupe",Fh=()=>{let e;return{name:Uh,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const n=e.message,s=t.message;return!(!n&&!s)&&(!(n&&!s||!n&&s)&&(n===s&&(!!qh(e,t)&&!!zh(e,t))))}(e,t)||!!function(e,t){const n=Bh(t),s=Bh(e);return!(!n||!s)&&(n.type===s.type&&n.value===s.value&&(!!qh(e,t)&&!!zh(e,t)))}(e,t))}(t,e))return mh&&bc.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}};function zh(e,t){let n=Hh(e),s=Hh(t);if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;if(s.length!==n.length)return!1;for(let i=0;i<s.length;i++){const e=s[i],t=n[i];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function qh(e,t){let n=e.fingerprint,s=t.fingerprint;if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;try{return!(n.join("")!==s.join(""))}catch(i){return!1}}function Bh(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Hh(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}Ru(Uh,Fh);const Wh="GlobalHandlers",Gh=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Wh,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){hl(t=>{const{stackParser:n,attachStacktrace:s}=Jh();if(Nd()!==e||ph())return;const{msg:i,url:r,line:a,column:o,error:c}=t,l=void 0===c&&Wo(i)?function(e,t,n,s){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let r=Bo(e)?e.message:e,a="Error";const o=r.match(i);o&&(a=o[1],r=o[2]);const c={exception:{values:[{type:a,value:r}]}};return Yh(c,t,n,s)}(i,r,a,o):Yh(bh(n,c||i,void 0,s,!1),r,a,o);l.level="error",Sd(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}(e),Kh("onerror")),t.onunhandledrejection&&(function(e){gl(t=>{const{stackParser:n,attachStacktrace:s}=Jh();if(Nd()!==e||ph())return;const i=function(e){if(Yo(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(n){}return e}(t),r=Yo(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:bh(n,i,void 0,s,!0);r.level="error",Sd(r,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),Kh("onunhandledrejection"))}}};function Yh(e,t,n,s){const i=e.exception=e.exception||{},r=i.values=i.values||[],a=r[0]=r[0]||{},o=a.stacktrace=a.stacktrace||{},c=o.frames=o.frames||[],l=isNaN(parseInt(s,10))?void 0:s,d=isNaN(parseInt(n,10))?void 0:n,u=Wo(t)&&t.length>0?t:function(){try{return pc.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:l,filename:u,function:"?",in_app:!0,lineno:d}),e}function Kh(e){mh&&bc.log(`Global Handler attached: ${e}`)}function Jh(){const e=Nd();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}Ru(Wh,Gh);const Vh="HttpContext",Xh=()=>({name:Vh,setupOnce(){},preprocessEvent(e){if(!dh.navigator&&!dh.location&&!dh.document)return;const t=e.request&&e.request.url||dh.location&&dh.location.href,{referrer:n}=dh.document||{},{userAgent:s}=dh.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...s&&{"User-Agent":s}},r={...e.request,...t&&{url:t},headers:i};e.request=r}});Ru(Vh,Xh);const Zh="LinkedErrors",Qh=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Zh,setupOnce(){},preprocessEvent(e,s,i){const r=i.getOptions();ic(fh,r.stackParser,r.maxValueLength,n,t,e,s)}}};Ru(Zh,Qh);const em=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],tm="TryCatch",nm=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:tm,setupOnce(){t.setTimeout&&Ec(dh,"setTimeout",sm),t.setInterval&&Ec(dh,"setInterval",sm),t.requestAnimationFrame&&Ec(dh,"requestAnimationFrame",im),t.XMLHttpRequest&&"XMLHttpRequest"in dh&&Ec(XMLHttpRequest.prototype,"send",rm);const e=t.eventTarget;e&&(Array.isArray(e)?e:em).forEach(am)}}};function sm(e){return function(...t){const n=t[0];return t[0]=hh(n,{mechanism:{data:{function:Uc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function im(e){return function(t){return e.apply(this,[hh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Uc(e)},handled:!1,type:"instrument"}})])}}function rm(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"==typeof n[e]&&Ec(n,e,function(t){const n={mechanism:{data:{function:e,handler:Uc(t)},handled:!1,type:"instrument"}},s=Cc(t);return s&&(n.mechanism.data.handler=Uc(s)),hh(t,n)})}),e.apply(this,t)}}function am(e){const t=dh,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ec(n,"addEventListener",function(t){return function(n,s,i){try{"function"==typeof s.handleEvent&&(s.handleEvent=hh(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Uc(s),target:e},handled:!1,type:"instrument"}}))}catch(r){}return t.apply(this,[n,hh(s,{mechanism:{data:{function:"addEventListener",handler:Uc(s),target:e},handled:!1,type:"instrument"}}),i])}}),Ec(n,"removeEventListener",function(e){return function(t,n,s){const i=n;try{const n=i&&i.__sentry_wrapped__;n&&e.call(this,t,n,s)}catch(so){}return e.call(this,t,i,s)}}))}Ru(tm,nm);const om=[Ku(),Qu(),nm(),Mh(),Gh(),Qh(),Fh(),Xh()];function cm(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=[...om]),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),dh.SENTRY_RELEASE&&dh.SENTRY_RELEASE.id&&(e.release=dh.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Rh,Array.isArray(n)?Lc(...n):n),integrations:Au(e),transport:e.transport||(al()?Sh:Eh)};var n;Fu(jh,t),e.autoSessionTracking&&(void 0!==dh.document?(Od({ignoreDuration:!0}),Pd(),_l(({from:e,to:t})=>{void 0!==e&&e!==t&&(Od({ignoreDuration:!0}),Pd())})):mh&&bc.warn("Session tracking in non-browser environment with @sentry/browser is not supported."))}const lm=class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Tu(),ep&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...ah,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Yp(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Kp(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&Cp("longtask",({entries:e})=>{for(const t of e){const e=Qd();if(!e)return;const n=zp(Bl+t.startTime),s=zp(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s})}}),this.options._experiments.enableInteractions&&Cp("event",({entries:e})=>{for(const t of e){const e=Qd();if(!e)return;if("click"===t.name){const n=zp(Bl+t.startTime),s=zp(t.duration),i={description:hc(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s},r=fc(t.target);r&&(i.attributes={"ui.component_name":r}),e.startChild(i)}}}),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),s=n&&n.getOptions(),{routingInstrumentation:i,startTransactionOnLocationChange:r,startTransactionOnPageLoad:a,markBackgroundTransactions:o,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:d,enableHTTPTimings:u,_experiments:p}=this.options,h=s&&s.tracePropagationTargets,m=h||this.options.tracePropagationTargets;ep&&this._hasSetTracePropagationTargets&&h&&bc.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),i(e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n},a,r),o&&(tp.document?tp.document.addEventListener("visibilitychange",()=>{const e=Qd();if(tp.document.hidden&&e){const t="cancelled",{op:n,status:s}=bd(e);ep&&bc.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),s||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):ep&&bc.warn("[Tracing] Could not set up background tab detection due to lack of global document")),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),nh({traceFetch:c,traceXHR:l,tracePropagationTargets:m,shouldCreateSpanForRequest:d,enableHTTPTimings:u})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(ep&&bc.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:s,finalTimeout:i,heartbeatInterval:r}=this.options,a="pageload"===e.op;let o;if(a){const t=a?oh("sentry-trace"):"",n=a?oh("baggage"):void 0,{traceId:s,dsc:i,parentSpanId:r,sampled:c}=Vl(t,n);o={traceId:s,parentSpanId:r,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:i},trimEnd:!0}}else o={trimEnd:!0,...e};const c="function"==typeof n?n(o):o,l=void 0===c?{...o,sampled:!1}:c;l.metadata=l.name!==o.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&ep&&bc.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),ep&&bc.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:d}=tp,u=Eu(t,l,s,i,!0,{location:d},r,a);return a&&tp.document&&(tp.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(tp.document.readyState)&&u.sendAutoFinishSignal()}),["interactive","complete"].includes(tp.document.readyState)&&u.sendAutoFinishSignal()),u.registerBeforeFinishCallback(e=>{this._collectWebVitals(),Vp(e)}),u}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:s}=this.options,i="ui.action.click",r=Qd();if(r&&r.op&&["navigation","pageload"].includes(r.op))return void(ep&&bc.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(ep&&bc.warn(`[Tracing] Did not create ${i} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(ep&&bc.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:o}=tp,c={name:this._latestRoute.name,op:i,trimEnd:!0,data:{[uu]:this._latestRoute.context?ch(this._latestRoute.context):"url"}};e=Eu(a,c,t,n,!0,{location:o},s)};["click"].forEach(e=>{tp.document&&addEventListener(e,t,{once:!1,capture:!0})})}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Nd(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,s=void 0!==n?n.getReplayId():void 0,i=Qd(),r=Cd(),a=void 0!==r?r.getUser():void 0;e.forEach(e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],r=e.duration,o=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t):void 0;if("first-input"===e.entryType&&c.map(e=>this._interactionIdToRouteNameMapping[e]).some(e=>e.duration===r&&e.startTime===o))return;if(!t)return;if(n)n.duration=Math.max(n.duration,r);else if(c.length<10||void 0===l||r>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:r,parentContext:n,user:a,activeTransaction:i,replayId:s,startTime:o})}}})};Cp("event",e),Cp("first-input",e)}};function dm(e,t){Td(n=>{t&&Object.keys(t).forEach(e=>{n.setTag(e,t[e])}),kd(e)})}function um(e,t="info"){!function(e,t){const n="string"==typeof t?t:void 0,s="string"!=typeof t?{captureContext:t}:void 0;Jd().captureMessage(e,n,s)}(e,t)}function pm(e){!function(e){Jd().setUser(e)}({id:e.id,email:e.email,subscription:e.subscription})}function hm({error:e,resetErrorBoundary:t}){return a.useEffect(()=>{dm(e,{component:"ErrorBoundary"})},[e]),Ae.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:Ae.jsx(J,{className:"h-8 w-8 text-red-600"})}),Ae.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),Ae.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Our team has been notified and is working on a fix."}),!1,Ae.jsxs("div",{className:"flex space-x-3",children:[Ae.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[Ae.jsx(V,{className:"h-4 w-4 mr-2"}),"Try Again"]}),Ae.jsxs("button",{onClick:()=>window.location.href="/",className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[Ae.jsx(X,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})})}function mm({children:e}){return Ae.jsx(Uo,{FallbackComponent:hm,onError:(e,t)=>{dm(e,{errorInfo:t})},children:e})}function fm({title:e="AlwayZ - Keep Their Memory Alive",description:t="Create AI personas of loved ones using their voice, mannerisms, and memories. Have meaningful conversations that help you through the grieving process.",keywords:n="AI, personas, grief support, memory preservation, voice synthesis, conversations, healing",image:s="/og-image.png",url:i="https://alwayz.app",type:r="website"}){const a=e.includes("AlwayZ")?e:`${e} | AlwayZ`,o=i.startsWith("http")?i:`https://alwayz.app${i}`,c=s.startsWith("http")?s:`https://alwayz.app${s}`;return Ae.jsxs(Ot,{children:[Ae.jsx("title",{children:a}),Ae.jsx("meta",{name:"description",content:t}),Ae.jsx("meta",{name:"keywords",content:n}),Ae.jsx("meta",{name:"author",content:"AlwayZ"}),Ae.jsx("meta",{name:"robots",content:"index, follow"}),Ae.jsx("link",{rel:"canonical",href:o}),Ae.jsx("meta",{property:"og:type",content:r}),Ae.jsx("meta",{property:"og:title",content:a}),Ae.jsx("meta",{property:"og:description",content:t}),Ae.jsx("meta",{property:"og:image",content:c}),Ae.jsx("meta",{property:"og:url",content:o}),Ae.jsx("meta",{property:"og:site_name",content:"AlwayZ"}),Ae.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),Ae.jsx("meta",{name:"twitter:title",content:a}),Ae.jsx("meta",{name:"twitter:description",content:t}),Ae.jsx("meta",{name:"twitter:image",content:c}),Ae.jsx("meta",{name:"twitter:site",content:"@AlwayzApp"}),Ae.jsx("meta",{name:"theme-color",content:"#8B5CF6"}),Ae.jsx("meta",{name:"msapplication-TileColor",content:"#8B5CF6"}),Ae.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),Ae.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),Ae.jsx("meta",{name:"apple-mobile-web-app-title",content:"AlwayZ"}),Ae.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebApplication",name:"AlwayZ",description:t,url:"https://alwayz.app",applicationCategory:"LifestyleApplication",operatingSystem:"Web",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},author:{"@type":"Organization",name:"AlwayZ"}})})]})}("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(Tu(),Tl()&&lh());class gm{static getInstance(){return gm.instance||(gm.instance=new gm),gm.instance}async sendEmail(e){try{const{data:t,error:n}=await pr.functions.invoke("send-email",{body:e});if(n)throw n;return!0}catch(t){return!1}}async sendWelcomeEmail(e,t){const n="https://alwayz.app",s={to:e,subject:"Welcome to AlwayZ - Keep Their Memory Alive",html:`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>Welcome to AlwayZ</title>\n        </head>\n        <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">\n          <div style="text-align: center; margin-bottom: 30px;">\n            <h1 style="color: #8B5CF6; margin-bottom: 10px;">Welcome to AlwayZ</h1>\n            <p style="color: #666; font-size: 18px;">Keep Their Memory Alive</p>\n          </div>\n          \n          <div style="background: #f8f9fa; padding: 30px; border-radius: 10px; margin-bottom: 30px;">\n            <h2 style="color: #333; margin-bottom: 20px;">Hello ${t},</h2>\n            <p>Thank you for joining AlwayZ. We're honored to help you create meaningful connections with the memories of your loved ones.</p>\n            \n            <h3 style="color: #8B5CF6; margin-top: 25px;">Getting Started:</h3>\n            <ul style="padding-left: 20px;">\n              <li>Create your first AI persona</li>\n              <li>Upload photos, videos, and voice recordings</li>\n              <li>Train the AI with their personality and memories</li>\n              <li>Start having meaningful conversations</li>\n            </ul>\n          </div>\n          \n          <div style="text-align: center; margin-bottom: 30px;">\n            <a href="${n}/dashboard" \n               style="background: linear-gradient(135deg, #8B5CF6, #3B82F6); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; display: inline-block; font-weight: bold;">\n              Create Your First Persona\n            </a>\n          </div>\n          \n          <div style="border-top: 1px solid #eee; padding-top: 20px; text-align: center; color: #666; font-size: 14px;">\n            <p>Need help? Reply to this email or visit our <a href="${n}/support" style="color: #8B5CF6;">support center</a>.</p>\n            <p> 2024 AlwayZ. All rights reserved.</p>\n          </div>\n        </body>\n        </html>\n      `,text:`Welcome to AlwayZ, ${t}! Thank you for joining us. Visit ${n}/dashboard to create your first AI persona.`};return this.sendEmail(s)}async sendPersonaReadyEmail(e,t){const n={to:e,subject:`${t} is ready for conversations!`,html:`\n        <!DOCTYPE html>\n        <html>\n        <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">\n          <div style="text-align: center; margin-bottom: 30px;">\n            <h1 style="color: #8B5CF6;"> ${t} is Ready!</h1>\n          </div>\n          \n          <div style="background: #f0f9ff; padding: 30px; border-radius: 10px; border-left: 4px solid #8B5CF6;">\n            <p>Great news! Your AI persona <strong>${t}</strong> has finished training and is now ready for conversations.</p>\n            \n            <p>The AI has learned from the content you provided and can now:</p>\n            <ul>\n              <li>Respond in their unique voice and style</li>\n              <li>Reference shared memories and experiences</li>\n              <li>Provide comfort and meaningful conversations</li>\n            </ul>\n          </div>\n          \n          <div style="text-align: center; margin: 30px 0;">\n            <a href="https://alwayz.app/dashboard" \n               style="background: linear-gradient(135deg, #8B5CF6, #3B82F6); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; display: inline-block; font-weight: bold;">\n              Start Conversation with ${t}\n            </a>\n          </div>\n        </body>\n        </html>\n      `};return this.sendEmail(n)}async sendSubscriptionConfirmationEmail(e,t){const n={to:e,subject:`Welcome to AlwayZ ${t}!`,html:`\n        <!DOCTYPE html>\n        <html>\n        <body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">\n          <div style="text-align: center; margin-bottom: 30px;">\n            <h1 style="color: #8B5CF6;">Welcome to AlwayZ ${t}!</h1>\n          </div>\n          \n          <div style="background: #f0f9ff; padding: 30px; border-radius: 10px;">\n            <p>Thank you for upgrading to AlwayZ ${t}. You now have access to premium features:</p>\n            \n            ${"Pro"===t?"\n              <ul>\n                <li>5 AI Personas</li>\n                <li>Unlimited conversations</li>\n                <li>Premium voice synthesis</li>\n                <li>Video calls</li>\n                <li>Social media import</li>\n                <li>Priority support</li>\n              </ul>\n            ":"\n              <ul>\n                <li>Unlimited AI Personas</li>\n                <li>Unlimited conversations</li>\n                <li>Custom voice cloning</li>\n                <li>Advanced video calls</li>\n                <li>API access</li>\n                <li>White-label options</li>\n                <li>Dedicated support</li>\n              </ul>\n            "}\n          </div>\n          \n          <div style="text-align: center; margin: 30px 0;">\n            <a href="https://alwayz.app/dashboard" \n               style="background: linear-gradient(135deg, #8B5CF6, #3B82F6); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; display: inline-block; font-weight: bold;">\n              Explore Premium Features\n            </a>\n          </div>\n        </body>\n        </html>\n      `};return this.sendEmail(n)}}const vm=gm.getInstance();function xm(){const[e,t]=s.useState(!1),[n,i]=s.useState("chat"),[r,a]=s.useState(""),[o,c]=s.useState(""),[d,p]=s.useState(""),[h,m]=s.useState(!1),{user:f}=mr();return e?Ae.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col z-50",children:[Ae.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-t-2xl",children:[Ae.jsxs("div",{className:"flex items-center justify-between",children:[Ae.jsx("h3",{className:"font-semibold",children:"AlwayZ Support"}),Ae.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:Ae.jsx(l,{className:"h-4 w-4"})})]}),Ae.jsx("div",{className:"flex space-x-1 mt-3",children:[{id:"chat",label:"Chat",icon:G},{id:"contact",label:"Contact",icon:u},{id:"help",label:"Help",icon:Z}].map(({id:e,label:t,icon:s})=>Ae.jsxs("button",{onClick:()=>i(e),className:"flex items-center px-3 py-1 rounded-lg text-sm transition-colors "+(n===e?"bg-white/20":"hover:bg-white/10"),children:[Ae.jsx(s,{className:"h-3 w-3 mr-1"}),t]},e))})]}),Ae.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:["chat"===n&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:Ae.jsx("p",{className:"text-sm text-gray-700",children:" Hi! How can we help you today? Send us a message and we'll get back to you as soon as possible."})}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject (optional)"}),Ae.jsx("input",{type:"text",value:d,onChange:e=>p(e.target.value),placeholder:"What's this about?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),Ae.jsx("textarea",{value:r,onChange:e=>a(e.target.value),placeholder:"Describe your question or issue...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm resize-none"})]}),!f&&Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),Ae.jsx("input",{type:"email",value:o,onChange:e=>c(e.target.value),placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),Ae.jsxs("button",{onClick:async()=>{if(r.trim()){m(!0);try{await vm.sendEmail({to:"support@alwayz.app",subject:`Support Request from ${(null==f?void 0:f.email)||o}`,html:`\n          <h3>Support Request</h3>\n          <p><strong>From:</strong> ${(null==f?void 0:f.email)||o}</p>\n          <p><strong>Subject:</strong> ${d||"General Support"}</p>\n          <p><strong>Message:</strong></p>\n          <p>${r}</p>\n        `}),Ro.success("Message sent! We'll get back to you soon."),a(""),p(""),c("")}catch(e){Ro.error("Failed to send message. Please try again.")}finally{m(!1)}}},disabled:h||!r.trim()||!f&&!o.trim(),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:shadow-lg transition-all duration-300 disabled:opacity-50 flex items-center justify-center",children:[h?Ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):Ae.jsx(N,{className:"h-4 w-4 mr-2"}),h?"Sending...":"Send Message"]})]}),"contact"===n&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Get in Touch"}),Ae.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"We're here to help with any questions or concerns."})]}),Ae.jsxs("div",{className:"space-y-3",children:[Ae.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Ae.jsx(u,{className:"h-5 w-5 text-purple-600 mr-3"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium text-gray-900",children:"Email Support"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"support@alwayz.app"})]})]}),Ae.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Ae.jsx(T,{className:"h-5 w-5 text-purple-600 mr-3"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium text-gray-900",children:"Phone Support"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"1-800-ALWAYZ-1"})]})]}),Ae.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Ae.jsx(G,{className:"h-5 w-5 text-purple-600 mr-3"}),Ae.jsxs("div",{children:[Ae.jsx("p",{className:"font-medium text-gray-900",children:"Live Chat"}),Ae.jsx("p",{className:"text-sm text-gray-600",children:"Available 24/7"})]})]})]}),Ae.jsx("div",{className:"text-center text-sm text-gray-500",children:Ae.jsx("p",{children:"Average response time: 2-4 hours"})})]}),"help"===n&&Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Help Center"}),Ae.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Find answers to common questions and learn how to use AlwayZ."})]}),Ae.jsx("div",{className:"space-y-2",children:[{title:"Getting Started with AlwayZ",description:"Learn how to create your first AI persona",link:"/help/getting-started"},{title:"Training Your AI Persona",description:"Best practices for uploading content and training",link:"/help/training"},{title:"Video Calls and Conversations",description:"How to have meaningful conversations with your personas",link:"/help/conversations"},{title:"Subscription and Billing",description:"Manage your subscription and billing information",link:"/help/billing"},{title:"Privacy and Security",description:"How we protect your data and memories",link:"/help/privacy"}].map((e,t)=>Ae.jsxs("a",{href:e.link,className:"block p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[Ae.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:e.title}),Ae.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]},t))}),Ae.jsx("div",{className:"text-center",children:Ae.jsx("a",{href:"/help",className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"View All Help Articles "})})]})]})]}):Ae.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center z-50",children:Ae.jsx(G,{className:"h-6 w-6"})})}function ym(){return s.useEffect(()=>{if((async()=>{try{const{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:i}=await It(async()=>{const{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:i}=await import("./web-vitals-D7j7y4kJ.js");return{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:i}},[]);e(e=>{um(`CLS: ${e.value}`,"info")}),t(e=>{um(`FID: ${e.value}`,"info")}),n(e=>{um(`FCP: ${e.value}`,"info")}),s(e=>{um(`LCP: ${e.value}`,"info")}),i(e=>{um(`TTFB: ${e.value}`,"info")})}catch(e){}})(),"memory"in performance){const e=performance.memory,t={used:Math.round(e.usedJSHeapSize/1048576),total:Math.round(e.totalJSHeapSize/1048576),limit:Math.round(e.jsHeapSizeLimit/1048576)};t.used>.8*t.limit&&um(`High memory usage: ${t.used}MB`,"warning")}if("connection"in navigator){const e=navigator.connection;"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||um(`Slow connection detected: ${e.effectiveType}`,"info")}const e=()=>{setTimeout(()=>{const e=performance.timing.loadEventEnd-performance.timing.navigationStart;e>3e3&&um(`Slow page load: ${e}ms`,"warning")},0)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()},[]),null}var bm={},_m={},wm={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s;"undefined"!=typeof window&&(void 0===window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(s=window).gtag.apply(s,t))};e.default=t}(wm);var jm={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e||"";return s&&(r=e.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,s){return n>0&&n+e.length!==s.length&&e.search(t)>-1&&":"!==s.charAt(n-2)&&("-"!==s.charAt(n+e.length)||"-"===s.charAt(n-1))&&s.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})),i&&(r=function(e){return function(e){return"string"==typeof e&&-1!==e.indexOf("@")}(e)?n:e}(r)),r};var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i,n="REDACTED (Potential Email Address)"}(jm),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=a(wm),n=a(jm),s=["eventCategory","eventAction","eventLabel","eventValue","hitType"],i=["title","location"],r=["page","hitType"];function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r,a,o=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t);else for(;!(c=(s=r.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(d){l=!0,i=d}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function f(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,v(s.key),s)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!==c(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}var x=function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"reset",function(){a.isInitialized=!1,a._testMode=!1,a._currentMeasurementId,a._hasLoadedGA=!1,a._isQueuing=!1,a._queueGtag=[]}),g(this,"_gtag",function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];a._testMode||a._isQueuing?a._queueGtag.push(n):t.default.apply(void 0,n)}),g(this,"_loadGA",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://www.googletagmanager.com/gtag/js";if("undefined"!=typeof window&&"undefined"!=typeof document&&!a._hasLoadedGA){var s=document.createElement("script");s.async=!0,s.src="".concat(n,"?id=").concat(e),t&&s.setAttribute("nonce",t),document.body.appendChild(s),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},a._hasLoadedGA=!0}}),g(this,"_toGtagOptions",function(e){if(e){var t={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"};return Object.entries(e).reduce(function(e,n){var s=p(n,2),i=s[0],r=s[1];return t[i]?e[t[i]]=r:e[i]=r,e},{})}}),g(this,"initialize",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Require GA_MEASUREMENT_ID");var n="string"==typeof e?[{trackingId:e}]:e;a._currentMeasurementId=n[0].trackingId;var s=t.gaOptions,i=t.gtagOptions,r=t.nonce,o=t.testMode,c=void 0!==o&&o,d=t.gtagUrl;if(a._testMode=c,c||a._loadGA(a._currentMeasurementId,r,d),a.isInitialized||(a._gtag("js",new Date),n.forEach(function(e){var t=u(u(u({},a._toGtagOptions(u(u({},s),e.gaOptions))),i),e.gtagOptions);Object.keys(t).length?a._gtag("config",e.trackingId,t):a._gtag("config",e.trackingId)})),a.isInitialized=!0,!c){var p=l(a._queueGtag);for(a._queueGtag=[],a._isQueuing=!1;p.length;){var h=p.shift();a._gtag.apply(a,l(h)),"get"===h[0]&&(a._isQueuing=!0)}}}),g(this,"set",function(e){e&&"object"===c(e)&&(Object.keys(e).length,a._gaCommand("set",e))}),g(this,"_gaCommandSendEvent",function(e,t,n,s,i){a._gtag("event",t,u(u({event_category:e,event_label:n,value:s},i&&{non_interaction:i.nonInteraction}),a._toGtagOptions(i)))}),g(this,"_gaCommandSendEventParameters",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommandSendEvent.apply(a,l(t.slice(1)));else{var i=t[0],r=i.eventCategory,c=i.eventAction,d=i.eventLabel,u=i.eventValue;i.hitType;var p=o(i,s);a._gaCommandSendEvent(r,c,d,u,p)}}),g(this,"_gaCommandSendTiming",function(e,t,n,s){a._gtag("event","timing_complete",{name:t,value:n,event_category:e,event_label:s})}),g(this,"_gaCommandSendPageview",function(e,t){if(t&&Object.keys(t).length){var n=a._toGtagOptions(t),s=n.title,r=n.location,c=o(n,i);a._gtag("event","page_view",u(u(u(u({},e&&{page_path:e}),s&&{page_title:s}),r&&{page_location:r}),c))}else e?a._gtag("event","page_view",{page_path:e}):a._gtag("event","page_view")}),g(this,"_gaCommandSendPageviewParameters",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommandSendPageview.apply(a,l(t.slice(1)));else{var s=t[0],i=s.page;s.hitType;var c=o(s,r);a._gaCommandSendPageview(i,c)}}),g(this,"_gaCommandSend",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];switch("string"==typeof t[0]?t[0]:t[0].hitType){case"event":a._gaCommandSendEventParameters.apply(a,t);break;case"pageview":a._gaCommandSendPageviewParameters.apply(a,t);break;case"timing":a._gaCommandSendTiming.apply(a,l(t.slice(1)))}}),g(this,"_gaCommandSet",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&(t[0]=g({},t[0],t[1])),a._gtag("set",a._toGtagOptions(t[0]))}),g(this,"_gaCommand",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];switch(e){case"send":a._gaCommandSend.apply(a,n);break;case"set":a._gaCommandSet.apply(a,n)}}),g(this,"ga",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("string"==typeof t[0])a._gaCommand.apply(a,t);else{var s=t[0];a._gtag("get",a._currentMeasurementId,"client_id",function(e){a._isQueuing=!1;var t=a._queueGtag;for(s({get:function(t){return"clientId"===t?e:"trackingId"===t?a._currentMeasurementId:"apiVersion"===t?"1":void 0}});t.length;){var n=t.shift();a._gtag.apply(a,l(n))}}),a._isQueuing=!0}return a.ga}),g(this,"event",function(e,t){if("string"==typeof e)a._gtag("event",e,a._toGtagOptions(t));else{var s=e.action,i=e.category,r=e.label,o=e.value,c=e.nonInteraction,l=e.transport;if(!i||!s)return;var d={hitType:"event",eventCategory:(0,n.default)(i),eventAction:(0,n.default)(s)};r&&(d.eventLabel=(0,n.default)(r)),void 0!==o&&("number"!=typeof o||(d.eventValue=o)),void 0!==c&&("boolean"!=typeof c||(d.nonInteraction=c)),void 0!==l&&("string"!=typeof l||(["beacon","xhr","image"].indexOf(l),d.transport=l)),a._gaCommand("send",d)}}),g(this,"send",function(e){a._gaCommand("send",e)}),this.reset()}return f(e,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),e}();e.GA4=x;var y=new x;e.default=y}(_m),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var n=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var i=s(n);if(i&&i.has(e))return i.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=a?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,i&&i.set(e,r),r}(_m);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var i=n.GA4;e.ReactGAImplementation=i;var r=n.default;e.default=r}(bm);const km=r(bm);function Sm(){const[e,t]=s.useState("landing"),[n,i]=s.useState(!1),[r,a]=s.useState(!1),[o,c]=s.useState(null),{user:u,loading:p,signOut:m}=mr(),{personas:f,loading:v,createPersona:x}=function(){const{user:e}=mr(),[t,n]=s.useState([]),[i,r]=s.useState(!0);s.useEffect(()=>{e&&a()},[e]);const a=async()=>{try{const{data:e,error:t}=await pr.from("personas").select("*").order("created_at",{ascending:!1});if(t)throw t;n(e||[])}catch(e){}finally{r(!1)}};return{personas:t,loading:i,createPersona:async t=>{if(!e)return null;try{const{data:s,error:i}=await pr.from("personas").insert({...t,user_id:e.id}).select().single();if(i)throw i;return n(e=>[s,...e]),s}catch(s){return null}},updatePersona:async(e,t)=>{try{const{data:s,error:i}=await pr.from("personas").update(t).eq("id",e).select().single();if(i)throw i;return n(t=>t.map(t=>t.id===e?s:t)),s}catch(s){return null}},deletePersona:async e=>{try{const{error:t}=await pr.from("personas").delete().eq("id",e);if(t)throw t;return n(t=>t.filter(t=>t.id!==e)),!0}catch(t){return!1}},refetch:a}}();s.useEffect(()=>{u&&pm({id:u.id,email:u.email||"",subscription:"free"})},[u]),s.useEffect(()=>{var e;e=window.location.pathname,km.send({hitType:"pageview",page:e,title:document.title})},[e]),s.useEffect(()=>{var e;u&&u.email_confirmed_at&&new Date(u.created_at).getTime()>Date.now()-6e4&&vm.sendWelcomeEmail(u.email,(null==(e=u.user_metadata)?void 0:e.full_name)||"there")},[u]);const b=()=>Ae.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-100",children:[Ae.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ae.jsxs("div",{className:"flex justify-between items-center h-16",children:[Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx(se,{className:"h-8 w-8 text-purple-600 mr-3"}),Ae.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AlwayZ"})]}),Ae.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[Ae.jsx("button",{onClick:()=>t("landing"),className:"text-gray-700 hover:text-purple-600 transition-colors "+("landing"===e?"text-purple-600 font-medium":""),children:"Home"}),Ae.jsx("button",{onClick:()=>t("database-setup"),className:"text-gray-700 hover:text-purple-600 transition-colors "+("database-setup"===e?"text-purple-600 font-medium":""),children:"Database Setup"}),u&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("button",{onClick:()=>t("dashboard"),className:"text-gray-700 hover:text-purple-600 transition-colors "+("dashboard"===e?"text-purple-600 font-medium":""),children:"Dashboard"}),Ae.jsx("button",{onClick:()=>t("analytics"),className:"text-gray-700 hover:text-purple-600 transition-colors "+("analytics"===e?"text-purple-600 font-medium":""),children:"Analytics"}),Ae.jsx("button",{onClick:()=>t("subscription"),className:"text-gray-700 hover:text-purple-600 transition-colors "+("subscription"===e?"text-purple-600 font-medium":""),children:"Subscription"})]}),u?Ae.jsxs("div",{className:"flex items-center space-x-4",children:[Ae.jsx("span",{className:"text-gray-700",children:"Welcome back!"}),Ae.jsxs("button",{onClick:m,className:"flex items-center text-gray-700 hover:text-purple-600 transition-colors",children:[Ae.jsx(ie,{className:"h-4 w-4 mr-1"}),"Sign Out"]})]}):Ae.jsx("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-full hover:shadow-lg transition-all duration-300",children:"Sign In"})]}),Ae.jsx("button",{className:"md:hidden",onClick:()=>i(!n),children:n?Ae.jsx(l,{className:"h-6 w-6"}):Ae.jsx(re,{className:"h-6 w-6"})})]})}),n&&Ae.jsx("div",{className:"md:hidden bg-white border-t border-gray-100",children:Ae.jsxs("div",{className:"px-4 py-3 space-y-3",children:[Ae.jsx("button",{onClick:()=>{t("landing"),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600 "+("landing"===e?"text-purple-600 font-medium":""),children:"Home"}),Ae.jsx("button",{onClick:()=>{t("database-setup"),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600 "+("database-setup"===e?"text-purple-600 font-medium":""),children:"Database Setup"}),u&&Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("button",{onClick:()=>{t("dashboard"),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600 "+("dashboard"===e?"text-purple-600 font-medium":""),children:"Dashboard"}),Ae.jsx("button",{onClick:()=>{t("analytics"),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600 "+("analytics"===e?"text-purple-600 font-medium":""),children:"Analytics"}),Ae.jsx("button",{onClick:()=>{t("subscription"),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600 "+("subscription"===e?"text-purple-600 font-medium":""),children:"Subscription"})]}),u?Ae.jsx("button",{onClick:()=>{m(),i(!1)},className:"block w-full text-left text-gray-700 hover:text-purple-600",children:"Sign Out"}):Ae.jsx("button",{onClick:()=>{a(!0),i(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-full",children:"Sign In"})]})})]}),w=()=>Ae.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100",children:[Ae.jsx(fm,{}),Ae.jsx(b,{}),Ae.jsx("section",{className:"pt-20 pb-16 px-4 sm:px-6 lg:px-8",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[Ae.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:["Keep Their",Ae.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:" Memory "}),"Alive"]}),Ae.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-4xl mx-auto leading-relaxed",children:"Create AI personas of loved ones using their voice, mannerisms, and memories. Have meaningful conversations that help you through the grieving process."}),Ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[Ae.jsx("button",{onClick:()=>u?t("create-persona"):a(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:u?"Create a Persona":"Get Started"}),Ae.jsxs("button",{className:"flex items-center text-purple-600 hover:text-purple-700 font-semibold",children:[Ae.jsx(Q,{className:"h-5 w-5 mr-2"}),"Watch Demo"]})]})]})}),Ae.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-white",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ae.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-16",children:"How It Works"}),Ae.jsxs("div",{className:"grid md:grid-cols-3 gap-12",children:[Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:Ae.jsx(h,{className:"h-8 w-8 text-white"})}),Ae.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Upload Memories"}),Ae.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Share videos, voice recordings, texts, and social media posts to help us understand their unique personality and speaking patterns."})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-6",children:Ae.jsx(_,{className:"h-8 w-8 text-white"})}),Ae.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"AI Training"}),Ae.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Our advanced AI learns their voice, mannerisms, and conversation style to create an authentic digital presence."})]}),Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6",children:Ae.jsx(g,{className:"h-8 w-8 text-white"})}),Ae.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Connect & Heal"}),Ae.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Have natural video conversations that feel real, helping you process grief and maintain that special connection."})]})]})]})}),Ae.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gray-50",children:Ae.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[Ae.jsx(ee,{className:"h-16 w-16 text-purple-600 mx-auto mb-6"}),Ae.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Privacy & Security First"}),Ae.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Your loved one's memories are sacred. We use enterprise-grade encryption and never share your data. Your conversations remain private and secure, always."}),Ae.jsxs("div",{className:"flex justify-center items-center space-x-8 text-gray-500",children:[Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx(te,{className:"h-5 w-5 text-yellow-400 mr-2"}),Ae.jsx("span",{children:"256-bit Encryption"})]}),Ae.jsxs("div",{className:"flex items-center",children:[Ae.jsx(ee,{className:"h-5 w-5 text-green-500 mr-2"}),Ae.jsx("span",{children:"GDPR Compliant"})]})]})]})})]}),j=()=>Ae.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ae.jsx(fm,{title:"Dashboard"}),Ae.jsx(b,{}),Ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ae.jsxs("div",{className:"flex justify-between items-center mb-8",children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Personas"}),Ae.jsxs("button",{onClick:()=>t("create-persona"),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-full font-semibold hover:shadow-lg transition-all duration-300 flex items-center",children:[Ae.jsx(ne,{className:"h-5 w-5 mr-2"}),"Create New Persona"]})]}),v?Ae.jsxs("div",{className:"text-center py-12",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),Ae.jsx("p",{className:"text-gray-600 mt-4",children:"Loading your personas..."})]}):Ae.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.map(e=>Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:Ae.jsxs("div",{className:"p-6",children:[Ae.jsxs("div",{className:"flex items-center mb-4",children:[Ae.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-blue-400 rounded-full flex items-center justify-center mr-4",children:e.avatar_url?Ae.jsx("img",{src:e.avatar_url,alt:e.name,className:"w-16 h-16 rounded-full object-cover"}):Ae.jsx(d,{className:"h-8 w-8 text-white"})}),Ae.jsxs("div",{children:[Ae.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),Ae.jsx("p",{className:"text-gray-500",children:e.relationship||"Loved one"})]})]}),Ae.jsx("div",{className:"flex justify-between items-center mb-4",children:Ae.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("active"===e.status?"bg-green-100 text-green-800":"training"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"active"===e.status?"Ready to chat":"training"===e.status?`Training... ${e.training_progress}%`:"Needs training"})}),Ae.jsx("div",{className:"flex space-x-2",children:"active"===e.status?Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs("button",{onClick:()=>{c(e),t("chat")},className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:shadow-lg transition-all duration-300 flex items-center justify-center",children:[Ae.jsx(G,{className:"h-4 w-4 mr-2"}),"Chat"]}),Ae.jsxs("button",{onClick:()=>{c(e),t("video-call")},className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:shadow-lg transition-all duration-300 flex items-center justify-center",children:[Ae.jsx(g,{className:"h-4 w-4 mr-2"}),"Video"]})]}):Ae.jsxs("button",{onClick:()=>{c(e),t("persona-setup")},className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-gray-700 transition-colors flex items-center justify-center",children:[Ae.jsx(C,{className:"h-4 w-4 mr-2"}),"Setup Training"]})})]})},e.id)),0===f.length&&Ae.jsxs("div",{className:"col-span-full text-center py-12",children:[Ae.jsx(d,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),Ae.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No personas yet"}),Ae.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first AI persona to get started"}),Ae.jsx("button",{onClick:()=>t("create-persona"),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-full font-semibold",children:"Create First Persona"})]})]})]})]}),k=()=>{const[e,n]=s.useState({name:"",relationship:"",description:"",personality_traits:"",common_phrases:""}),[i,r]=s.useState(!1);return Ae.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ae.jsx(fm,{title:"Create New Persona"}),Ae.jsx(b,{}),Ae.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:[Ae.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Persona"}),Ae.jsx("p",{className:"text-gray-600 mb-8",children:"Help us learn about your loved one by sharing their memories and personality"}),Ae.jsxs("form",{onSubmit:async n=>{n.preventDefault(),r(!0);const s={...e,common_phrases:e.common_phrases.split(",").map(e=>e.trim()).filter(Boolean),status:"training",training_progress:0},i=await x(s);i&&(c(i),t("persona-setup")),r(!1)},className:"space-y-8",children:[Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),Ae.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),Ae.jsx("input",{type:"text",value:e.name,onChange:e=>n(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter their full name",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),Ae.jsxs("select",{value:e.relationship,onChange:e=>n(t=>({...t,relationship:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[Ae.jsx("option",{value:"",children:"Select relationship"}),Ae.jsx("option",{value:"Parent",children:"Parent"}),Ae.jsx("option",{value:"Grandparent",children:"Grandparent"}),Ae.jsx("option",{value:"Spouse",children:"Spouse"}),Ae.jsx("option",{value:"Sibling",children:"Sibling"}),Ae.jsx("option",{value:"Friend",children:"Friend"}),Ae.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),Ae.jsxs("div",{children:[Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Personality & Traits"}),Ae.jsxs("div",{className:"space-y-4",children:[Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe their personality in a few sentences"}),Ae.jsx("textarea",{rows:4,value:e.personality_traits,onChange:e=>n(t=>({...t,personality_traits:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"How would you describe their personality, humor, and way of speaking?",required:!0})]}),Ae.jsxs("div",{children:[Ae.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Common phrases or expressions they used (separate with commas)"}),Ae.jsx("input",{type:"text",value:e.common_phrases,onChange:e=>n(t=>({...t,common_phrases:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., You know what I mean?, Back in my day..."})]})]})]}),Ae.jsxs("div",{className:"flex justify-end space-x-4",children:[Ae.jsx("button",{type:"button",onClick:()=>t("dashboard"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),Ae.jsx("button",{type:"submit",disabled:i,className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 disabled:opacity-50",children:i?"Creating...":"Create Persona"})]})]})]})})]})},S=()=>{const[e,n]=s.useState("upload");return Ae.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ae.jsx(fm,{title:`Setup ${null==o?void 0:o.name}'s AI Persona`}),Ae.jsx(b,{}),Ae.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ae.jsxs("div",{className:"mb-8",children:[Ae.jsx("button",{onClick:()=>t("dashboard"),className:"flex items-center text-purple-600 hover:text-purple-700 font-medium mb-4",children:" Back to Dashboard"}),Ae.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Setup ",null==o?void 0:o.name,"'s AI Persona"]}),Ae.jsx("p",{className:"text-gray-600",children:"Upload content and train the AI to create an authentic digital presence"})]}),Ae.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-8 w-fit",children:[Ae.jsx("button",{onClick:()=>n("upload"),className:"px-6 py-2 rounded-md font-medium transition-colors "+("upload"===e?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Manual Upload"}),Ae.jsx("button",{onClick:()=>n("social"),className:"px-6 py-2 rounded-md font-medium transition-colors "+("social"===e?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Social Media Import"})]}),Ae.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[Ae.jsx("div",{children:"upload"===e?Ae.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-6",children:[Ae.jsxs("div",{className:"flex items-center mb-4",children:[Ae.jsx(y,{className:"h-6 w-6 text-purple-600 mr-3"}),Ae.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Content"})]}),Ae.jsx("p",{className:"text-gray-600 mb-6",children:"Upload videos, audio recordings, photos, and documents to help train the AI"}),Ae.jsx(fa,{personaId:(null==o?void 0:o.id)||"",onUploadComplete:e=>{}})]}):Ae.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-6",children:Ae.jsx(ba,{personaId:(null==o?void 0:o.id)||"",onImportComplete:e=>{}})})}),Ae.jsx("div",{children:Ae.jsx(ga,{personaId:(null==o?void 0:o.id)||"",onTrainingComplete:()=>{t("dashboard")}})})]})]})]})};return Ae.jsx(jt,{children:Ae.jsxs(mm,{children:[Ae.jsx(ym,{}),(()=>{if(p)return Ae.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ae.jsxs("div",{className:"text-center",children:[Ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),Ae.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});switch(e){case"database-setup":return Ae.jsx(xa,{});case"dashboard":return u?Ae.jsx(j,{}):Ae.jsx(w,{});case"create-persona":return u?Ae.jsx(k,{}):Ae.jsx(w,{});case"persona-setup":return u&&o?Ae.jsx(S,{}):Ae.jsx(w,{});case"analytics":return u?Ae.jsx(Do,{}):Ae.jsx(w,{});case"subscription":return u?Ae.jsx($o,{}):Ae.jsx(w,{});case"chat":return u&&o?Ae.jsx(va,{personaId:o.id,personaName:o.name,conversationType:"chat",onEndCall:()=>t("dashboard")}):Ae.jsx(w,{});case"video-call":return u&&o?Ae.jsx(va,{personaId:o.id,personaName:o.name,conversationType:"video_call",onEndCall:()=>t("dashboard")}):Ae.jsx(w,{});default:return Ae.jsx(w,{})}})(),Ae.jsx(fr,{isOpen:r,onClose:()=>a(!1)}),Ae.jsx(xm,{}),Ae.jsx(Po,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})}!function(e){const t={...e};Hu(t,"react"),cm(t)}({dsn:"https://0a9b19c9a2f143f3cf9726de55966d3c@o4509578670243840.ingest.us.sentry.io/4509578681253888",integrations:[new lm],tracesSampleRate:.1,environment:"production",beforeSend(e){var t;if(e.exception){const n=null==(t=e.exception.values)?void 0:t[0];if("ChunkLoadError"===(null==n?void 0:n.type)||"NetworkError"===(null==n?void 0:n.type))return null}return e},replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),km.initialize("G-YEJS87M2X8",{testMode:!1}),Oe(document.getElementById("root")).render(Ae.jsx(s.StrictMode,{children:Ae.jsx(Sm,{})}))}},function(){return be||(0,ye[t(ye)[0]])((be={exports:{}}).exports,be),be.exports});export default _e();
//# sourceMappingURL=index-CaDov0gr.js.map
